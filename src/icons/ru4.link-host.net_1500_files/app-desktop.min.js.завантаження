var App=App||{};App.init=function(){App.mgr();EventMgr.bind("nextEventBind",function(m,c){var a=c.event,f=c.cb,n=c.tData;if("function"===typeof f)EventMgr.one(a,f,n)})};App.Global=function(){return{HeaderMoving:!1,bannerHtml:null,warning:[],anychartXML:null,selid:void 0,scrollTop:void 0,msg:{},targetId:""}}();"use strict";
var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"===typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};
App.u=App.Common=function(m,c,a){var f=function(a){var h=a.which||a.keyCode;if(13===h||32===h)c(this).trigger("click"),a.preventDefault()},n={},b,l=function(a,c,e){"function"===typeof a&&(a(),n[e].lastRun=c,n[e].q=!1)},p=function(a){a.focus();if(a.selectionStart)return a.selectionStart;if(document.selection){var c=document.selection.createRange(),e=c.duplicate();c.collapse(!0);e.moveToElementText(a);e.setEndPoint("EndToEnd",c);return e.text.length}return 0};return{init:function(){a.on(c(m.document),
"a","keydown",f)},setOptionListPosition:function(a,h){var e,b,g,f,s;g=m.document.body.offsetHeight;b=c(a+h);b[0].style.top="";f=b.offset().top;e=b[0].offsetHeight;g-f<e&&(s=b[0].getAttribute("data-tabid"),g=c("#form-scroll-"+s),0===g.length&&(g=c("#tcw-"+s)),g=g.offset().top,b[0].style.top=g>f-e-19?"-"+e/2+"px":"-"+e+"px")},parseParams:function(a){if(void 0!==a&&null!==a){a=a.replace(/^\?/,"");a=a.split("&");for(var c={},e=/=(.+)?/,b,g=0;g<a.length;g++)b=a[g].split(e),c[b[0]]=b[1]?b[1]:"";return c}return{}},
replaceHtml:function(a,c){if(a){var e="string"===typeof a?document.getElementById(a):a,b=document.createElement(e.nodeName);b.id=e.id;b.className=e.className;b.innerHTML=c;e.parentNode?e.parentNode.replaceChild(b,e):e.innerHTML=c;return b}},serializeForAttr:function(a){var c,b="",f=0;for(c in a)f++,1!==f&&(b+="&"),b+=c+"="+encodeURIComponent(a[c]);return b},wordWrap:function(a,c){if(!a)return a;c=c||100;for(var b=a.split(" "),f=b.length,g,d,s,l=RegExp("(.{"+c+"})","g"),n=0;n<f;n++)if(b[n].length>
c){g=b[n].split(l);d=g.length;s="";for(var m=0;m<d;m++)""!==g[m]&&(s+=g[m]+"<br>");a=a.replace(b[n],s);a=a.replace(/\n/g,"<br/>")}return a},required:function(a,c,b){var f=document.getElementsByTagName("script")[0],g=document.createElement("script");g.onreadystatechange=function(){if("loaded"===g.readyState||"complete"===g.readyState)g.onreadystatechange=null,App.u.isFunction(c)&&(c(b),a=b=null)};g.onload=function(){App.u.isFunction(c)&&(c(b),a=b=null)};g.src=a;f.parentNode.insertBefore(g,f)},noMoreThan:function(a,
c,e){var f=(new Date).getTime(),g;c=c?c:100;n[a]?(g=f-n[a].lastRun,g>c?(l(e,f,a),clearTimeout(b)):(n[a].q=!0,clearTimeout(b),b=setTimeout(function(){!0===n[a].q&&l(e,f,a)},2*c))):(n[a]={q:!1,lastRun:f,timeOut:c},l(e,f,a))},clone:function h(a){if(null===a||"object"!==("undefined"===typeof a?"undefined":_typeof(a)))return a;var c;if(a instanceof Date)return c=new Date,c.setTime(a.getTime()),c;if(a instanceof Array){c=[];for(var b=0,f=a.length;b<f;b++)c[b]=h(a[b]);return c}if(a instanceof Object){c=
{};for(b in a)a.hasOwnProperty(b)&&(c[b]=h(a[b]));return c}throw Error("Unable to copy obj! Its type isn't supported.");},injectCss:function(a){var c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",a);document.getElementsByTagName("head")[0].appendChild(c)},msg:{},removeParam:function(a,c){var b=a.length,f,d;for(f=0;f<b;f++)d=a[f].name,delete c[d];return c},storage:{breadcrumb:{},dashboard:{}},selectorCache:function(){var a=
{};return function(b){if(a[b])return a.selector;a.selector=c(b);return a.selector}}(),isNumber:function(a){return"number"===typeof a},isString:function(a){return"string"===typeof a},isFunction:function(a){return"function"===typeof a},getQueryString:function(a,c){var b=0,f="",d,s;for(s in a)""!==s&&(0!==b&&(f+="&"),d=a[s],f=c?f+(s+"="+d):f+(s+"="+encodeURIComponent(d)),b++);return f},escapeRegExp:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},insertStringAfterCaret:function(a,
c,b){if(a&&c){a.focus();var f=a.value,d=0===f.length?0:p(a);b=b?f.lastIndexOf("\n",d-1)+1:d;b=f.substring(0,b);f=f.substring(d);a.value=b+c+f;c=(b+c).length;a.setSelectionRange?a.setSelectionRange(c,c):(a=a.createTextRange(),a.collapse(!0),a.select(c,c))}},getCaretPosition:p,escapeQuote:function(a){return String(a).replace(/"/g,"&quot;")},formatDateTime:function(a){a=new Date(a);return a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+" "+("0"+a.getHours()).slice(-2)+
":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)},parseDate:function(a){var c=String(a).split(" ");return 2===c.length&&(a=c[0].split("-"),c=c[1].split(":"),3===a.length&&3===c.length)?new Date(a[0],parseInt(a[1],10)-1,a[2],c[0],c[1],c[2]):new Date},checkFileSize:function(a,b){var f=null,g=null;(b?c("#"+b+"-"+a):c("#form-wrapper-"+a+' input[type="file"]')).each(function(){var a=this.getAttribute("data-max-size"),c=this.getAttribute("data-maxsize-msg");g=this;if(this.files&&a)for(var a=
a-0,b=0,e=this.files.length;b<e;b++)if(this.files[b].size>a)return f=String(pageInfo.messages.fileMaxSize).replace("__VALUE__",c),!1});return{msg:f,field:g}},openInNewWindow:function(a,c){var b=m.open("",c);b&&(b.openner=null,b.location=a)},CSSEscape:function(a){a=String(a);for(var c=a.length,b=-1,f,d="",s=a.charCodeAt(0);++b<c;){f=a.charCodeAt(b);if(0==f)throw new InvalidCharacterError("Invalid character: the input contains U+0000.");d=1<=f&&31>=f||127==f||0==b&&48<=f&&57>=f||1==b&&48<=f&&57>=f&&
45==s?d+("\\"+f.toString(16)+" "):128<=f||45==f||95==f||48<=f&&57>=f||65<=f&&90>=f||97<=f&&122>=f?d+a.charAt(b):d+("\\"+a.charAt(b))}return d},getPreviousNode:function(a){var c=null;if(a)for(;!c&&a;)a=a.previousSibling,1===a.nodeType&&(c=a);return c}}}(window,$,EventMgr);"use strict";
App.Dom=function(m){var c=document;m=c.createElement("div");return{init:function(){},byId:function(a){return"string"!==typeof a?null:c.getElementById(a)},addClass:m.classList?function(a,c){a&&"string"===typeof c&&a.classList.add(c)}:function(a,c){a&&"string"===typeof c&&!a.className.match(c)&&(a.className+=" "+c)},removeClass:m.classList?function(a,c){a&&"string"===typeof c&&a.classList.remove(c)}:function(a,c){a&&"string"===typeof c&&(a.className+=a.className.replace(RegExp(c,"g"),""))},toogleClass:m.classList?
function(a,c){a&&"string"===typeof c&&a.classList.toggle(c)}:function(a,c){if(a&&"string"===typeof c){var n=a.className;n.match(c)?a.className+=n.replace(RegExp(c,"g"),""):a.className+=" "+c}},hasClass:m.classList?function(a,c){if(a&&"string"===typeof c)return a.classList.contains(c)}:function(a,c){if(a&&"string"===typeof c)return a.className.match(c)}}}(window);"use strict";
App.Menu=function(m,c,a,f){var n=[],b=function(){c(".group .popular").parents(".group").addClass("popular");c(".group .favorite").parents(".group").addClass("favorite");var a;c(".group").each(function(){a=c(this);a.hasClass("favorite")||a.addClass("unfavorite");a.hasClass("popular")||a.addClass("unpopular")})},l=function(){var a,b;c("#menu-items a.textlink").each(function(){a=this.offsetWidth;b=this.scrollWidth-1;a<b&&!this.className.match("overwidth")&&(this.className+=" overwidth")})},p=function(a){c("#menu-items").removeClass("favorite popular all").addClass(a);
c(".menev").removeClass("active");c("#"+a).addClass("active")},t=function(a){if(!a.target.className.match("listened-elem")){if(c("body").hasClass("active-menu"))return!1;h.apply(m,[{type:"click"}])}},h=function(b,f){var g=c("body"),e=c("#left"),d=c("#content"),q=c("#cbutton"),h,k,s;"click"===b.type?(h=g.hasClass("active-menu")?"closed":"open",k=c(".tab-content_st_active").attr("data-tabid"),s=c("#cont-"+k),c("#sort_table-"+k).css("width","100%"),c(".block-table .sort_table").css("width","100%"),s.addClass("table-manip"),
"closed"===h?(e.stop().animate({left:"-203"},300,function(){a.trigger("hideHint")}),d.stop().animate({marginLeft:"0"},300),q.stop().fadeIn(300)):(d.stop().animate({marginLeft:"205"},300),q.stop().fadeOut(300)),g.toggleClass("active-menu"),setTimeout(function(){a.trigger("menuPositionChanged",{menupos:h,tabId:k});s.removeClass("table-manip");k=h=null},350)):"begin"===b.type&&(h=f,"closed"===h?g.toggleClass("active-menu"):d.css("marginLeft","205px"));c("#mfb").attr("data-state",h)},e=function(){var a=
c(this),b=c("body"),f=c("#cbutton");b.hasClass("active-menu")||(a.stop().animate({left:"0"},350),f.stop().fadeOut(300))},k=function(){var a=c(this),b=c("body"),f=c("#cbutton");b.hasClass("active-menu")||(a.stop().animate({left:"-203"},350),f.stop().fadeIn(300))},g=function(a,b){var f,g,e;f={type:"begin"};b.menupos?(g=RegExp(pageInfo.product+"-"+pageInfo.level+"-(open|closed)"),g=b.menupos.match(g),null!==g?h(f,g["1"]):(g=c("#content"),g.css("marginLeft","205px"))):(g=c("#content"),g.css("marginLeft",
"205px"),h(f,"open"));b.mbar?(g=RegExp(pageInfo.product+"-"+pageInfo.level+"-(all|popular|favorite)"),b.mbar.match(g)&&(f=b.mbar.match(g),p(f["1"]))):p("all");if(b.menupane&&""!==b.menupane)for(e in n)g=RegExp(n[e].level+"_"+n[e].id+"-0"),b.menupane.match(g)?n[e].disactivate():(g=RegExp(n[e].level+"_"+n[e].id+"-1"),b.menupane.match(g)&&n[e].activate());l()},d=function(){for(var a=c(".group"),b=a.length,f=0;f<b;f++)n[a[f].id]=new MenuGroup(pageInfo.level,a[f].id,"0",c(a[f]))},s=function(a){switch(this.getAttribute("id")){case "minus":r("minus");
break;case "plus":r("plus");break;case "all":u("all");break;case "favorite":u("favorite");break;case "popular":u("popular")}a.preventDefault()},r=function(c){var b;if("minus"===c)for(b in n)n[b].disactivate();else if("plus"===c)for(b in n)n[b].activate();a.trigger("groupChanged",{groups:n});a.trigger("updateScroll",{id:"menu-items-wr"})},u=function(c){p(c);a.trigger("menuTypeChanged",c)},z=function(c){var b=this.getAttribute("data-group");n[b].toggle();a.trigger("groupChanged",{groups:n});a.trigger("updateScroll",
{id:"menu-items-wr"});l();c.preventDefault()},q=0,v=[],w={q:"\u0439",w:"\u0446",e:"\u0443",r:"\u043a",t:"\u0435",y:"\u043d",u:"\u0433",i:"\u0448",o:"\u0449",p:"\u0437","[":"\u0445","]":"\u044a",a:"\u0444",s:"\u044b",d:"\u0432",f:"\u0430",g:"\u043f",h:"\u0440",j:"\u043e",k:"\u043b",l:"\u0434",";":"\u0436","'":"\u044d",z:"\u044f",x:"\u0447",c:"\u0441",v:"\u043c",b:"\u0438",n:"\u0442",m:"\u044c",",":"\u0431","/":"\u044e","\u0439":"q","\u0446":"w","\u0443":"e","\u043a":"r","\u0435":"t","\u043d":"y","\u0433":"u",
"\u0448":"i","\u0449":"o","\u0437":"p","\u0445":"[","\u044a":"]","\u0444":"a","\u044b":"s","\u0432":"d","\u0430":"f","\u043f":"g","\u0440":"h","\u043e":"j","\u043b":"k","\u0434":"l","\u0436":";","\u044d":"'","\u044f":"z","\u0447":"x","\u0441":"c","\u043c":"v","\u0438":"b","\u0442":"n","\u044c":"m","\u0431":",","\u044e":"/"," ":" "},y=function(a){if("string"===typeof a){a=a.split("");for(var c=a.length,b=Array(c);c--;)b[c]=w[a[c]]?w[a[c]]:a[c];return b.join("")}},D=function(){var a,b;c("#menu-items a.textlink").each(function(){a=
{};b=c(this);a.parent=b.parent();a.text=b.text().toLowerCase();a.mistakeText=y(a.text);a.parentGroup=b.parents(".group");v.push(a)})},E=function(b){b=(new Date).getTime();var f,g=c("#close-search");if(100>b-q)q=b;else{q=b;g.removeClass("not_active");b=this.value;f=b.length;if(0===f)F(),g.addClass("not_active");else if(1===f)F();else if(1<f){F();g=0;f=v.length;var e=y(b);for(c("#mainmenu").addClass("search");f--;)v[f].text.indexOf(b.toLowerCase())+1||v[f].mistakeText.indexOf(b.toLowerCase())+1||v[f].text.indexOf(e.toLowerCase())+
1||v[f].mistakeText.indexOf(e.toLowerCase())+1?(v[f].parent.removeClass("s-hidden"),v[f].parentGroup.addClass("cont"),g++):v[f].parent.addClass("s-hidden");0===g?c("#m-search").addClass("not_found"):c("#m-search").removeClass("not_found")}a.trigger("updateScroll",{id:"menu-items-wr"})}},F=function(b){c(".cont").removeClass("cont");c("#mainmenu").removeClass("search");c(".s-hidden").removeClass("s-hidden");c("#m-search").removeClass("not_found");b&&(c("#close-search").addClass("not_active"),c("#m-search").val(""),
a.trigger("updateScroll",{id:"menu-items-wr"}));b=c(".m-item.active");b.length&&a.trigger("scrollTo",{raw:!1,id:"menu-items-wr",offsetTop:b[0].offsetTop-67})},A=function(a,b){c("#left").trigger("mouseenter");c("#m-search").focus()},C=function(a,b){c(".m-item").removeClass("active");if(b.func){var g=f.Dom.byId("l-"+String(b.func).replace(/\./g,"_"));null!==g&&(g.className+=" active")}},B=function(){c(".m-item").removeClass("active")},K=function(c){c=this.value;var b=this.getAttribute("data-handler-val");
a.trigger("ajaxRequest",{url:pageInfo.url,param:{func:c,elid:b},invar:{},type:"get",outtype:"json",trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",queue:"noqueue"})},L=function(c,b){a.trigger("ajaxRequest",{param:{func:"desktop",out:"sjson"},outtype:"json",trfunc:"menuObjectGot"})},x=function(a,b){if(b.doc.mainmenu)for(var f=b.doc.mainmenu.node,g=f.length,e,d,q,h,k=!1,s;g--;){e=f[g].node;q=f[g];h=e.length;for(k=!1;h--;)s=e[h],d=c("#l-"+String(s.$name).replace(/\./g,"_")),s.$favorite?(k=!0,
d.hasClass("unfavorite")&&d.switchClass("favorite","unfavorite")):d.hasClass("favorite")&&d.switchClass("unfavorite","favorite");e=c("#"+String(q.$name).replace(/\./g,"_"));k?e.hasClass("unfavorite")&&e.switchClass("favorite","unfavorite"):e.hasClass("favorite")&&e.switchClass("unfavorite","favorite")}};return{init:function(){a.bind("loadPage",d);a.bind("loadPage",b);a.bind("loadPage",D);a.bind("readCookie",g);a.obind(".h-group","click",z);a.obind(".menev","click",s);a.obind("#mainmenu #cbutton, #mainmenu #mfb",
"click",h);a.obind("#menu-items-wr","click",t);a.obind(c("#m-search"),"keyup",E);a.obind("#close-search a","click",F);a.bind("changeTabStatus",C);a.bind("closeTab",B);a.bind("comboCtrlShiftMKeyUp",A);a.obind(c("#left"),"mouseenter",e);a.obind(c("#left"),"mouseleave",k);a.obind(c("#_select-tab0-val"),"change",K);a.bind("favoriteMenuUpdateDone",L);a.bind("menuObjectGot",x)}}}(window,$,EventMgr,App);"use strict";
App.UpSize=function(m,c,a,f){var n=0,b=0,l=0,p=function(){0===n&&0<t().length&&(n=t().offset().top);return n},t=function(){return f.u.selectorCache("#menu-items-wr")},h=c(m),e=function(){l=h.height();b=l-p()},k=function(){t().height(b)},g=function(a,c){var g=c.tabId,e=f.Dom.byId("cont-"+g);null!==e&&(e.style.height=b+"px","tab0"===g&&(e.style.marginTop="-"+b+"px"))},d=function(f,g){setTimeout(function(){var f=l-p(),e,d;if(g)e=g.tabId;else if(e=c(".tab-content_st_active"),"form"===e.attr("data-tab-type"))e=
e.attr("data-tabid");else return;d=c("#incont-"+e+" .topWrapper");if(0<d.length){c(".tab-content").height(f);f=c("#form-scroll-"+e);d=d[0].offsetHeight;d=b-d;var q=f[0].scrollHeight;"modal1"===e?(f.height("auto"),e=f.height(),f.height(e+"px"),q<d&&c("#cont-modal1").height("auto")):(f.height(d),a.trigger("updateScroll",{id:"form-scroll-"+e}),q>d?(c("#incont-"+e+" .i-buttons_form-type_form").addClass("l-buttons_pos_fixed"),c("#form-scroll-in-"+e).addClass("l-form__inner_fly_buttons")):(c("#incont-"+
e+" .i-buttons_form-type_form").removeClass("l-buttons_pos_fixed"),c("#form-scroll-in-"+e).removeClass("l-form__inner_fly_buttons")))}},0)},s=function(){c("#cont-tab0").css("marginTop","-"+b+"px").height(b);c(".tab-content").height(b)},r=function(){setTimeout(function(){u()},"100")},u=function(){var e,g,d,q;c(".tab-content_st_active .content").each(function(){g=this.getAttribute("data-tabid");e=c(this);d=this.offsetTop;q=b-d-27;e.height(q);var h=g,k=f.Dom.byId("lt-"+h),s=f.Dom.byId("sort_table-"+
h),h=f.Dom.byId("statusbar-"+h);null!==k&&(k=k.offsetWidth+"px",null!==s&&(s.style.width=k),null!==h&&(h.style.width=k));a.trigger("updateScroll",{id:"ltwr-"+g})});a.trigger("updatedTableHeight",{tabId:g})},z=function(a,b){var g=b.tabId,e=f.Dom.byId("sort_table-"+g),d=c("#cont-"+g),q;if(e){var h=e.offsetWidth,k=e.rows["0"].cells,s=f.Dom.byId("statusbar-"+g);null!==s&&(q=s.rows["0"].cells);if(0===h)return null;g=f.Dom.byId("lt-"+g);if(null!==g){var h=g.rows["0"].cells,l=s=k.length,r=!1,n=0,m,I=[],
z=[],p=0,v=0,u=0;for(d.addClass("table-manip");l--;)I[l]=h[l].clientWidth,m=parseInt(k[l].getAttribute("width"),10),isNaN(m)?n++:z[l]=m,v+=I[l],p+=z[l];if(n||90>p&&110<p)r=!0;n=v/2;for(l=s;l--;)if(I[l]>n){for(v=0;v<s;v++)v!==l&&(u+=I[v]);I[l]=u;v=2*u;break}for(;s--;){l=I[s];l=r?Math.round(100*(l/v))+"%":z[s]+"%";k[s].style.width=l;h[s].style.width=l;try{q[s].style.width=l}catch(t){}}g.style.tableLayout="fixed";e.style.tableLayout="fixed";setTimeout(function(){d.removeClass("table-manip");d.removeClass("init")},
100)}}},q=function(c,b){"tab0"===b.tabId&&a.trigger("updateScroll",{})},v=function(a,b){var g=0,e,d=c("."+b.tabId+"-list .b-form-blocks__block");0<d.length&&(d.each(function(){e=this.offsetHeight;e>g&&(g=e)}),d.each(function(){this.style.height=g+"px";f.Dom.addClass(this,"b-form-block__block_set_height")}))},w=function(a){var b;a.originalEvent&&a.originalEvent.detail&&(a=a.originalEvent.detail,a.id&&a.id.match("form-scroll")&&(b=c("#"+a.id+" .l-buttons_pos_fixed"),0<b.length&&(a.bottom?b.hasClass("l-buttons_pos_bottom")||
b.addClass("l-buttons_pos_bottom"):b.hasClass("l-buttons_pos_bottom")&&b.removeClass("l-buttons_pos_bottom"))))};return{init:function(){a.obind(h,"resize",e);a.obind(h,"resize",k);a.obind(h,"resize",s);a.obind(h,"resize",r);a.obind(h,"resize",d);a.bind("loadPage",e);a.bind("loadPage",k);a.bind("appended",g);a.bind("appendList",r);a.bind("appendList",z);a.bind("setRowsWidth",z);a.bind("changedTab",q);a.bind("menuPositionChanged",q);a.bind("menuPositionChanged",u);a.bind("updTableHeight",r);a.bind("updFormHeight",
d);a.bind("appendForm",d);a.bind("appendForm, setValuesDone",v);a.bind("verticalScroll",w)},updth:u}}(window,$,EventMgr,App);"use strict";
App.ScrollController=function(m,c,a,f,n){var b=function(a,c){c&&c.id?n.update(c.id):n.update()},l=function(a,c){n.detach(c.tabId)},p=function(){setTimeout(function(){n.attach("menu-items-wr","menu-items","tab0")},10)},t=function(a,c){var b=c.tabId;n.attach(b+"-scrollwrapper","lt-"+b,b,!0,!0)},h=function(a,b){setTimeout(function(){var a=b.tabId;n.attach("form-scroll-"+a,"form-scroll-in-"+a,a,!0);c("#frm-"+a+" .band-table").each(function(){var c=this.id;n.attach(c,"lt-"+c,a,!0,!0)});c("#frm-"+a+" .b-form-list_view_table").each(function(){var c=
this.id;n.attach(c,"inner-"+c,a,!0,!0)});c("#frm-"+a+" .b-myselect__select-ul").each(function(){var c=this.getAttribute("id");n.attach("cont-"+c,c,a,!0)});c("#frm-"+a+" .b-mselect__ul-choose").each(function(){var c=this.getAttribute("data-id");n.attach(c+"-ms-list",c+"-ms-list-ul",a,!0)});c("#frm-"+a+" .b-mselect__view-value").each(function(){var c=this.getAttribute("data-id");n.attach(this.id,c+"-ms-view",a,!0)});c("#frm-"+a+" .tree-inner").each(function(){var c=this.getAttribute("id");n.attach("cont-"+
c,c,a,!0,!0)});c("#frm-"+a+" .b-select-ac__list").each(function(){var c=this.getAttribute("id");n.attach("cont-"+c,c,a,!0)});b=a=null},50)},e=function(a,b){var f=b.tabId;c("#frm-"+f+" .b-myselect__select-ul").each(function(){var a=this.getAttribute("id");n.attach("cont-"+a,a,f,!0)})},k=function(a,c){n.attach("cont-tab0","incont-tab0","tab0",!0)},g=function(a,b){c(".b-myselect__select-ul").each(function(){var a=this.getAttribute("id");n.attach("cont-"+a,a,"tab1",!0)})},d=function(a,c){var b=c.tabId;
n.attach("ltwr-"+b,"lt-"+b,b,!0);n.attach("cont-"+b+"-pager-slist",b+"-pager-slist",b,!0)},s=function(a,c){if("rack"===c.map.type){var b=c.tabId;n.attach(b+"-map","b-rack-"+b,b,!0)}},r=function(a,c){n.scrollTo(c.id,c.offsetTop,c.raw,c.animate)};return{init:function(){a.bind("menuTypeChanged",b);a.obind(c(m),"resize",b);a.bind("updateScroll",b);a.bind("loadPage",p);a.bind("appendForm,appendedFilter",h);a.bind("appendToolbarAce",e);a.bind("appendReport",h);a.bind("appendList",d);a.bind("appendMapDone",
s);a.bind("loadLoginForm",g);a.bind("appendDashboard",k);a.bind("appendDashList",t);a.bind("closeTabEvent",l);a.bind("scrollTo",r)}}}(window,$,EventMgr,App,ScrollHandler);"use strict";
App.AceEditor=function(m,c,a,f,n){var b={ace:null,vim:"ace/keyboard/vim",emacs:"ace/keyboard/emacs"},l={},p=function(a){return"undefined"!==typeof localStorage?(a=JSON.stringify(a),localStorage.setItem(pageInfo.product+"_5_"+pageInfo.user+"_"+pageInfo.hostName+"_toolbar_ide",a),!0):!1},t=function(){if("undefined"!==typeof localStorage){var a=localStorage.getItem(pageInfo.product+"_5_"+pageInfo.user+"_"+pageInfo.hostName+"_toolbar_ide");return JSON.parse(a)||{}}return!1},h=function(a,c){var b=t();
b&&(b[a]=c,p(b))},e=function(){var a=this.value,c=this.getAttribute("data-tabid");l[c].setFontSize(a+"px");h("font",a)},k=function(){var a=this.value,c=this.getAttribute("data-tabid");l[c].setTheme(a);h("theme",a)},g=function(){var a=this.value,c=this.getAttribute("data-tabid");l[c].getSession().setMode("ace/mode/"+a)},d=function(){var a=this.value,c=this.getAttribute("data-tabid");l[c].setKeyboardHandler(b[a]);h("keybinding",a)},s=function(){var a="on"===this.value,c=this.getAttribute("data-tabid");
l[c].setShowInvisibles(a);h("invisibles",a)},r=function(){var a="on"===this.value,c=this.getAttribute("data-tabid");l[c].renderer.setShowGutter(a);l[c].renderer.updateFull()},u=function(){var a=this.value,c=this.getAttribute("data-tabid"),b=l[c].session,c=l[c].renderer;switch(a){case "off":b.setUseWrapMode(!1);c.setPrintMarginColumn(80);break;case "free":b.setUseWrapMode(!0);b.setWrapLimitRange(null,null);c.setPrintMarginColumn(80);break;default:b.setUseWrapMode(!0);var f=parseInt(a,10);b.setWrapLimitRange(f,
f);c.setPrintMarginColumn(f)}h("soft_wrap",a)},z=function(){var a=this.getAttribute("data-tabid");f.Dom.byId(a+"-editor").className+=" fullscreen";f.Dom.byId("exit-fullscreen-"+a).parentNode.className+=" fullscreen";l[a].resize();l[a].focus();l[a].renderer.updateFull()},q=function(){var a=this.getAttribute("data-tabid"),c=f.Dom.byId(a+"-editor"),b=f.Dom.byId("exit-fullscreen-"+a).parentNode;c.className=c.className.replace(/fullscreen/g,"");b.className=b.className.replace(/\sfullscreen/g,"");l[a].resize();
l[a].focus()},v=function(b,g){var e;e=c("#cont-"+g.tabId+" .editor");0<e.length&&("undefined"!==typeof m.ace?y(e):(f.Common.required("/manimg/common/ace/ace.js",w,e),a.trigger("ajaxRequest",{url:pageInfo.host+pageInfo.theme+"templates/toolbar-editor.html",trfunc:"gotToolbarEditorTemplate",outtype:"html",type:"get",queue:"templates"})))},w=function(a){"undefined"!==typeof require&&require("ace/commands/default_commands").commands.push({name:"Toggle Fullscreen",bindKey:"Esc",exec:function(a){a.container.className=
a.container.className.replace(/fullscreen/g,"");var c=a.container.getAttribute("data-id"),c=f.Dom.byId("exit-fullscreen-"+c).parentNode;c.className=c.className.replace(/\sfullscreen/g,"");a.resize();a.focus()}});y(a)},y=function(a){var c,b,g,e,d=t();d.theme=d.theme||"ace/theme/eclipse";d.font=d.font||11;d.keybinding=d.keybinding?null===d.keybinding?null:d.keybinding:null;d.invisibles=void 0===d.invisibles?!1:d.invisibles;p(d);a.each(function(){var a=this.getAttribute("data-codelang"),d=this.getAttribute("readonly"),
h=this.getAttribute("data-highlight"),q,a=a||"text";b=this.id;e=this.getAttribute("data-tabid");g=f.Dom.byId(b+"-editor");if(!g)return!0;g.style.width="100%";g.style.height=this.offsetHeight+"px";c=m.ace.edit(b+"-editor");l[b]=c;c.getSession().setMode("ace/mode/"+a);c.getSession().setNewLineMode("unix");c.getSession().setValue(this.value);c.focus();null!==d&&c.setReadOnly(!0);h&&setTimeout(function(){var a=f.Dom.byId(h+"-"+e);if(q=a?a.value:null)if(a=c.find({needle:q,wrap:!0}))c.session.addMarker(a,
"ace_orion_highlight_red","background"),c.scrollToLine(a.start.row,!0,!0)},1);this.style.display="none";B(b,e,this,a)})},D=function(a,b){for(var f=this.getAttribute("data-tabid")||b.getAttribute("data-tabid"),f=c("#frm-"+f+" .editor"),g=f.length,e;g--;)e=f[g].id,f[g].value=l[e].getValue()},E=function(){l[this.id].setValue(this.value)},F=function(a,c){C=n.template(c)},A=function(a,b){for(var f in a)"boolean"===typeof a[f]?a[f]&&c("#"+b+"-"+f).trigger("click"):c("#"+b+"-"+f+' li[data-val="'+a[f]+'"]').trigger("click")},
C="",B=function x(b,g,e,d){if(""===C)setTimeout(function(){x(b,g,e,d)},300);else{var h=t(),q=f.Common.msg,q=C({tabId:b,fontMsg:q.fontMsg||"Font",modeMsg:q.modeMsg||"Mode",themeMsg:q.themeMsg||"Theme",keyBindMsg:q.keyBindMsg||"Key Binding",showInvMsg:q.showInvMsg||"Show Invisibles",showGutMsg:q.showGutMsg||"Show Gutter",softWrapMsg:q.softWrapMsg||"Soft Wrap",fullscreenMsg:q.fullscreenMsg||"Fullscreen",exitFullscreenMsg:q.exitFullscreenMsg||"Exit Fullscreen",darkMsg:"Dark",brightMsg:"Bright",modeValue:d}),
k=e.id;c(e).after(q);f.Dom.removeClass(f.Dom.byId("resizer_editor-"+k),"b-resizer_for_editor");h.mode=d;A(h,b);setTimeout(function(){a.trigger("appendToolbarAce",{tabId:g});a.trigger("updateScroll",{id:"form-scroll-"+g})},100)}},K=function(a,c){var b=c.id?c.id.replace("-editor",""):void 0;l[b]&&l[b].resize()};return{init:function(){a.bind("appendForm",v);a.bind("gotToolbarEditorTemplate",F);a.on("#main-wrapper",".toolbar-editor .editor-set-font","change",e);a.on("#main-wrapper",".toolbar-editor .editor-set-theme",
"change",k);a.on("#main-wrapper",".toolbar-editor .editor-set-mode","change",g);a.on("#main-wrapper",".toolbar-editor .editor-set-keybinding","change",d);a.on("#main-wrapper",".toolbar-editor .editor-set-show_hidden","change",s);a.on("#main-wrapper",".toolbar-editor .editor-set-show_gutter","change",r);a.on("#main-wrapper",".toolbar-editor .editor-set-soft_wrap","change",u);a.on("#main-wrapper",".toolbar-editor .editor-set-fullscreen","click",z);a.on("#main-wrapper",".toolbar-editor .editor-exit-fullscreen",
"click",q);a.on("#main-wrapper",".i-button_type_ok, .i-button_type_setvalue","click",D);a.bind("preSetValues",D);a.bind("resizeEditor",K);a.on("#main-wrapper",".b-textarea.editor","change",E)}}}(window,$,EventMgr,App,doT);"use strict";_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"===typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};
App.ActionHandler=function(m,c,a,f){var n=function(){return c("#main-wrapper")},b=function(a){a.preventDefault()},l={},p=function(a,b){var f=b.tabId;clearTimeout(l[f]);l[f]=setTimeout(function(){c("#cont-"+f).addClass("loading")},350)},t=function(a,b){var f=b.tabId;setTimeout(function(){clearTimeout(l[f]);c("#cont-"+f).removeClass("loading")},0);setTimeout(function(){c("#cont-"+f).removeClass("loading")},100);setTimeout(function(){c("#cont-"+f).removeClass("loading")},200);setTimeout(function(){c("#cont-"+
f).removeClass("loading")},350)},h=function(b,f){c(".m-item.loading").removeClass("loading");"json"===f.erType?a.trigger("pullMsg",{msg:'JSON Parse Error. Func: "'+f.param.func+'"'}):f.erMsg?a.trigger("pullMsg",{msg:f.erMsg}):a.trigger("pullMsg",{msg:'Request failed. Try again. Func: "'+f.param.func+'"'})},e=function(c,b){a.trigger("tabLoadingHide",{tabId:b.invar?b.invar.tabId?b.invar.tabId:b.invar.parent?b.invar.parent:b.invar.targetTabId:void 0});"json"===b.erType?a.trigger("pullMsg",{msg:'JSON Parse Error. Func: "'+
b.param.func+'"'}):b.erMsg?a.trigger("pullMsg",{msg:b.erMsg}):a.trigger("pullMsg",{msg:'Request failed. Try again. Func: "'+b.param.func+'"'})},k=function(a){a.addClass("b-button_st_disabled");a.html(a.attr("data-disabled"))},g=function(a){a="string"===typeof a?c("#form-wrapper-"+a+" .b-button_st_disabled"):a;a.length&&(a.html(a[0].getAttribute("data-enabled")),a.removeClass("b-button_st_disabled"))},d=function(b,f){var e=f.invar.tabId;"json"===f.erType?a.trigger("pullMsg",{msg:'JSON Parse Error. Func: "'+
f.param.func+'"'}):f.erMsg?a.trigger("pullMsg",{msg:f.erMsg}):a.trigger("pullMsg",{msg:'Request failed. Try again. Func: "'+f.param.func+'"'});g(e);setTimeout(function(){var a=c("#"+e+"-progressbar .b-progressbar__loader");c("#"+e+"-progressbar").removeClass("b-progressbar_type_withbtn");a.addClass("b-progressbar__loader_type_animate");a.removeClass("b-progressbar__loader_type_static");a.css("width","");a.html("");c("#"+e+"-progressbar .b-progressbar__btn-wr").remove()},1);a.trigger("tabLoadingHide",
{tabId:e})},s=function(c,b){var e=f.Dom.byId("t"+b.invar.blockId);e&&(e.className=e.className.replace(/loading/g,""));"json"===b.erType?a.trigger("pullMsg",{msg:'JSON Parse Error. Func: "'+b.param.func+'"'}):b.erMsg?a.trigger("pullMsg",{msg:b.erMsg}):a.trigger("pullMsg",{msg:'Request failed. Try again. Func: "'+b.param.func+'"'})},r=function(c,b){var f="",e={};c?(f=this.getAttribute("data-tabid"),e={clickstat:"title"},c.preventDefault()):f=b.tabId;a.trigger("reloadTab",{addedParam:e,tabId:f,help:!0,
selid:!0,filter:!0})},u=function(b){var f=this.getAttribute("data-func");b=this.getAttribute("data-type");var e=this.getAttribute("data-name"),g=this.parentNode,d=g.getAttribute("data-id"),h=g.getAttribute("data-elid"),f={func:f,elid:d,plid:h};"setrate"===b?a.trigger("ajaxRequest",{param:f,invar:{$parent:g,rateType:e,self:this},outtype:"json",trfunc:"rateResponse",failfunc:"failCommonAjaxResponse"}):"rate"===b&&a.trigger("ajaxRequest",{param:f,invar:{parent:c(this).closest(".tab-content_st_active").attr("data-tabid")},
type:"get",outtype:"json",trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",queue:"noqueue"})},z=function(b,f){f.error?f.erMsg&&a.trigger("pullMsg",{msg:f.erMsg}):(c(f.$parent).addClass("b-ticket__rate_rated_"+f.rateType),c(f.self).removeClass("i-ticket__rate"))},q=function(b){var f=c(this),e=f.attr("data-func");b=f.attr("data-id");f=f.attr("data-tabid");e={func:e};b&&"undefined"!==b&&(b=b.split("=",2),b[1]&&(e[b[0]]=b[1]));a.trigger("ajaxRequest",{param:e,invar:{parent:f},type:"get",outtype:"json",
trfunc:"ajaxResponse",failfunc:"failMenuAjaxResponse",queue:"menu"});a.trigger("tabLoading",{tabId:f})},v=function(b,e){var g=c(this),d=this.getAttribute("data-url"),h=this.getAttribute("data-parent"),q=/\/?func=+/,k=this.getAttribute("data-cgi"),s=!1,l="menu",I=g.hasClass("i-menu-link"),n=g.parent().hasClass("b-fatal-error__refresh-link"),r=!1,m;if(b.ctrlKey||b.metaKey||g.hasClass("newtab"))r=!0,l="noqueue";if(g.hasClass("wohan"))return!0;n&&c("#modal_alert_ok").trigger("click");if(d)if(d.match(q)){m=
k?pageInfo.host+k:pageInfo.url;d=d.replace("?","");d=f.Common.parseParams(d);d.clickstat="yes";r||(q=c(".tab-content_st_active").attr("data-func"),d.func===q&&(s=!0));var q=d.func,k=e.__tabs,n=!1,p=null,v=0,z,u;if(q&&k&&"object"===("undefined"===typeof k?"undefined":_typeof(k)))for(var t in k)if(k[t]&&(z=k[t].func,!z&&k[t].paramObjAll&&(z=k[t].paramObjAll.func),u=q+".empty",(u===z||z===q)&&"parent"===k[t].hType&&(n=!0,p=t,v=k[t].status,1===v)))break;n&&!v&&I?(c("#switch-"+p).trigger("lclick"),a.trigger("reloadTab",
{tabId:p,resetFilterOn:!0})):(a.trigger("ajaxRequest",{url:m,param:d,invar:{parent:h,newtab:r,sameModule:s,__src:"menuAction",__src_func:d.func},type:"get",outtype:"json",trfunc:"ajaxResponse",failfunc:"failMenuAjaxResponse",queue:l}),g.parents(".m-item").addClass("loading"))}else console.log(m);b&&b.preventDefault()},w=function(b,e){b.preventDefault();var d=c(this),h=d.getFlags(),q=d.attr("data-tabid"),s=c("#frm-"+q),l=s.getVars(),n=s.attr("action"),r=s.serializeObject(),I=d.attr("data-parent"),
p=d.attr("data-type"),v=s.hasClass("withfiles"),z=d.attr("data-act"),t=d.attr("data-id");s.hasClass("b-form_showcase_yes");var s=d.attr("data-name"),u=f.Dom.byId(q+"-progresstype"),w,F,W;if(d.hasClass("b-button_st_disabled"))return!1;k(d);null!==u&&(w=u.value);if("back"!==z){u=f.u.checkFileSize(q);if(u.msg)return a.trigger("errMsgValid",{self:u.field,err:u.msg,number:0}),g(d),!1;u=E(q);if(""!==u.msg)return a.trigger("showAlert",u),g(d),!1;u=D(q);if(""!==u.msg)return a.trigger("errMsgValid",{self:u.himself,
err:u.msg,number:0}),c(u.himself).bind("keyup",function(){""!==this.value&&(c(this).unbind("keyup"),a.trigger("okMsgValid",{self:this,number:0,notOk:!0}))}),g(d),!1;u=c("#frm-"+q+" input[data-check-field]");if(0!==u.length){W=y(u);var Y=!1;u.each(function(){var b=this.getAttribute("name");if(0!==W&&""!==r[b]&&0!==c(this).width()&&W>f.Forms.checkPassStrength(r[b]))return a.trigger("showAlert",{msg:pageInfo.pwErrorMsg}),Y=!0,!1});if(Y)return g(d),!1}}"back"===z&&(r.sback="ok",w="false");t&&"undefined"!==
t&&(t=t.split("=",2),t[1]&&(r[t[0]]=t[1]));s&&(r.clicked_button=s);u=w;r.progressid=u;F={elid:u,func:"progress.get",sfrom:"ajax"};if("blank"===z){var T=u+(new Date).getTime(),l=c("#form-wrapper-"+q);l.wrap(function(){return'<form action="'+n+'" id="form-'+T+'" method="POST" enctype="multipart/form-data" target="'+T+'"/>'});v=c("#form-"+T);v.append('<input type="hidden" class="i-input-tmp-elem" value="ok" name="sok"/>');v.append('<input type="hidden" class="i-input-tmp-elem" value="'+s+'" name="clicked_button"/>');
t&&t[1]&&v.append('<input type="hidden" class="i-input-tmp-elem" value="'+t[1]+'" name="'+t[0]+'"/>');v.find('input[name="sfrom"]').remove();m.open("",T);v.submit();h.keepform?(l.unwrap(),c(".i-input-tmp-elem").remove()):(f.Tabs.closeTab(b,q),I&&a.trigger("reloadTab",{tabId:I}));g(d);return!1}d=c("#frm-"+q+" .i-control-mixed");0!==d.length&&(r=f.u.removeParam(d,r));w=String(w).split("_")[0];d={url:pageInfo.host+n,param:r,invar:{tabId:q,parent:I,type:p,progresstype:w,progressid:u,iType:"replace",dataSaved:!0,
targetTabId:q,__vars:l},type:"post",outtype:"json",trfunc:"ajaxFormResponse",queue:"noqueue",failfunc:"failFormAjaxResponse"};v?(r.sok="ok",a.trigger("setBrandSettings",{options:d,tabId:q,pid:u,name:s,param:r,addParams:{sok:"ok",sfrom:"ajax",clicked_button:s,pid:u},parent:I})):("report"===p?(r.sok="ok",d={url:pageInfo.host+n,param:r,invar:{parent:I,tabId:q,__src:"report"},outtype:"json",trfunc:"ajaxResponse",queue:"noqueue",failfunc:"failCommonAjaxResponse"}):r.sok="ok",a.trigger("ajaxRequest",d));
"false"!==w&&setTimeout(function(){a.trigger("ajaxRequest",{param:F,invar:{tabId:q,param:F,type:p,progresstype:w},outtype:"json",trfunc:"progressBarResponse",queue:"noqueue"})},1E3);a.trigger("tabLoading",{tabId:q})},y=function(a){a=a.attr("data-check-args");var c;if(!a)return pageInfo.pwstrength;c=a.substring(0,1);return"-"===c||"+"===c?parseFloat(a)+parseFloat(pageInfo.pwstrength):parseFloat(a)},D=function(a){var b=c("#form-wrapper-"+a+' input[required="required"], #form-wrapper-'+a+' .b-textarea[required="required"]'),
e="",g=null;0<b.length&&b.each(function(){var a=String(this.value).replace(/\s/g,"");if(this.className.match("i-control-mixed"))return!0;if(""===a&&0!==this.offsetWidth)return e=pageInfo.messages.empty,g=this,!1;if("multiple"===this.getAttribute("data-type")&&""===a&&(a=this.getAttribute("data-id"),(a=f.Dom.byId(a+"-ms-view"))&&0!==a.offsetWidth))return e=pageInfo.messages.empty,g=a.parentNode,!1});return{param:a,msg:e,himself:g}},E=function(a){var b=c("#form-wrapper-"+a+' input[data-confirm="yes"]'),
e="",g=null;0<b.length&&b.each(function(){var c=this.getAttribute("data-check-field"),b=this.value,d=f.Dom.byId(c+"-"+a),c=f.Dom.byId(c+"-"+a+"-fake"),q;null!==d&&(q=d.value);b===q||0===d.offsetWidth&&0===c.offsetWidth||(e=pageInfo.confirm,g=this)});return{msg:e,himself:g,callback:function(){this.focus()}}},F=function(b,e){b&&b.preventDefault();var g;c(this).parents(".i-message").hide();g=this.getAttribute("data-href");a.trigger("updTableHeight");g=f.Common.parseParams(g);a.trigger("ajaxRequest",
{url:pageInfo.url,param:g,trfunc:"DoNothing",queue:"noqueue"})};return{init:function(){a.onwithdata(n(),".m-item a, .b-menu-item","click","menuAction",v);a.on(n(),".i-button_type_func","click",q);a.on(n(),".notActive span","click",b);a.on(n(),".reload","click",r);a.on("#main-wrapper",".i-button_type_ok","click",w);a.on(n(),".i-ticket__rate","click",u);a.bind("rateResponse",z);a.bind("failedAjaxResponseForDashboard",s);a.bind("failMenuAjaxResponse",h);a.bind("failCommonAjaxResponse",e);a.bind("failFormAjaxResponse",
d);a.bind("tabLoading",p);a.bind("tabLoadingHide",t);a.on(n(),".i-message__dismiss-link","click",F)}}}(window,$,EventMgr,App);"use strict";_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"===typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};
App.ActionHandlerList=function(m,c,a,f){function n(a,c){x[c.tabId]=c.elems}function b(b,e){var g=e.tabId;f.Dom.byId("toolbar-"+g)&&(x[g]=[{elid:c("#frm-"+g).find('input[name="elid"]').val()}],a.trigger("listSelect",{tabId:"cont-"+g,len:1}))}function l(a,c){delete x[c.tabId]}function p(b){var e=this.getAttribute("data-href"),g=f.Dom.hasClass(this,"i-wizard__step-link"),d=f.Dom.hasClass(this,"i-message__outer-link"),q=g?"replace":!1,g=g?"wizardLink":"",e=f.Common.parseParams(e),h=c(this).parents(".tab-content").attr("data-tabid"),
k=f.Dom.hasClass(this,"i-wizard__step-link")?!1:h,s=f.Dom.hasClass(this,"i-wizard__step-link")?h:!1,l=c("#frm-"+h).serializeObject();if(d)return!0;b&&b.preventDefault();l&&(delete l.func,delete l.snext,delete l.sfrom,c.extend(e,l));a.trigger("ajaxRequest",{param:e,trfunc:"ajaxResponse",invar:{dataSaved:!0,parent:k,iType:q,__src:g,targetTabId:s},queue:"noqueue",outtype:"json",failfunc:"failCommonAjaxResponse"});a.trigger("tabLoading",{tabId:h})}function t(b){b.preventDefault();var e=c(this);b=e.closest(".b-list__table-row").attr("data-elid");
var g=e.closest("td").index(),d=e.closest("table").find("th")[g],g=d.getAttribute("data-colname"),q=d.getAttribute("data-nestedlist"),d=d.getAttribute("data-nestedlist-blank"),h=e.closest(".tab-content"),e=h.attr("data-tabid"),k=h.attr("data-func"),s=f.Dom.byId("toolbar-"+e),l=c("#frm-"+e).serialize(),h={};h.parentfilter=l;h.func="nestedlist";h.elid=b;h.col=g;h.nestedlist=q;h.col_value=this.innerHTML;h.pfunc=k;s&&(b=filterXSS.friendlyAttrValue(s.getAttribute("data-plid")||""))&&(h.plid=b);a.trigger("ajaxRequest",
{param:h,invar:{newtab:d,__src:"nestedList"},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"nested-"+e,failfunc:"failCommonAjaxResponse"});d||a.trigger("tabLoading",{tabId:e})}function h(a){a.preventDefault();a=this.getAttribute("data-tabid");c("#cont-"+a+" .toolbar-button__item-img.back.img-link").trigger("click")}function e(b){b.preventDefault();b=this.getAttribute("data-id");var f=c(this).parents(".tab-content").attr("data-tabid");a.trigger("ajaxRequest",{url:pageInfo.url,param:L.breadcrumb[f][b],
invar:{targetTabId:f,iType:"replace"},type:"get",outtype:"json",trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",queue:"noqueue"});a.trigger("tabLoading",{tabId:f})}function k(c){var b=c.param,e=c.tabId,g=c.cgi?pageInfo.host+c.cgi:pageInfo.url,d="object"===("undefined"===typeof b?"undefined":_typeof(b))?b:f.Common.parseParams(b),h,q;c.progressbar&&(h=d.progressid=c.progressbar);c.download?(b="object"===("undefined"===typeof b?"undefined":_typeof(b))?f.Common.serializeForAttr(b):b,m.open(g+
"?"+b)):(a.trigger("ajaxRequest",{url:g,param:d,invar:{tabId:e,tabs:c.to,__from:c.__from,__blockId:c.__blockId,__src:"groupAction"},type:"get",trfunc:"ajaxGroupComplete",outtype:"json",queue:"noqueue",failfunc:"failCommonAjaxResponse"}),c.progressbar?(q={elid:h,func:"progress.get",sfrom:"ajax"},setTimeout(function(){a.trigger("ajaxRequest",{url:pageInfo.url,param:q,invar:{tabId:e,param:q,type:"",progresstype:c.progressbar},type:"get",outtype:"json",trfunc:"progressBarResponse",queue:"noqueue"});e=
q=null},700)):c.download||a.trigger("tabLoading",{tabId:e}))}function g(c,b){var f=b.confirm,e=b.rows,g=b.tabId,d=b.params,h=b.progressbar,q=b.download,s=RegExp(", ","g"),l=RegExp("\n","g"),r={};"string"===typeof e&&b.confirmDelimiter&&("\n"===b.confirmDelimiter&&(b.confirmDelimiter="<br/>"),e=e.replace(s,b.confirmDelimiter));"string"===typeof f&&(f=f.replace(l,"<br>"));f=f+" "+e+"?";r.data=f;r.tabId=g;r.param=d;r.progressbar=h;r.download=q;r.cgi=b.cgi;r.to=b.to;r.__from=b.__from;r.__blockId=b.__blockId;
a.trigger("confirmBoxShow",{callbackOk:k,callbackCancel:null,self:b.self,text:f,warning:b.warning,args:[r]})}function d(b){b&&b.preventDefault();var e=c(this),g=e.parent();b=g.attr("data-confirm");var g=g.attr("data-confirm-d"),d=e.attr("data-itemid"),h=e.attr("data-progressid")||!1,q=e.attr("class"),k=e.attr("data-cgi"),s=e.attr("data-parent"),l=f.Common.parseParams(e.attr("data-url")),r=f.Dom.hasClass(e[0],"i-confirm-warning"),e=f.Dom.hasClass(e[0],"groupdownload");a.trigger("clickedGroupItem",
{invar:{confirm:b,params:l,tabId:s,progressbar:h?h+d:!1,download:e,confirmDelimiter:g,warning:r,cgi:k,self:this},tabId:s,classes:q})}function s(b,e){var g=e.tabId,d=e.location,h=e.newwin,q=e.formParam,k=e.listParam,s=e.parent||"",l=e.tabs,r=e.error;e.openAsChild&&(s=e.tabId);if(e.reload)m.location=pageInfo.url;else if(d&&h)m.open(d,"_blank");else if(d)m.location=d;else{if(q)return d=f.Common.parseParams(q),a.trigger("ajaxRequest",{noesc:!0,param:d,invar:{parent:s,srcTabId:g},type:"get",outtype:"json",
trfunc:"ajaxResponse",queue:"noqueue"}),!1;if(k)return d=f.Common.parseParams(k),a.trigger("ajaxRequest",{noesc:!0,param:d,invar:{parent:s,srcTabId:g},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"noqueue"}),!1;if(r){a.trigger("ajaxResponse",e);return}if("dashboard"===e.__from&&e.__blockId){c("#tblock-"+e.__blockId+" .dashblock-reload").trigger("click");return}}e.message&&e.message.length&&(f.Global.bannerHtml=e.message,f.Global.warning=e.warning,f.Global.targetId=g);void 0!==g?a.trigger("reloadTab",
{tabId:g,filter:!0}):(d=l[0][0],a.trigger("ajaxRequest",{param:d,type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"noqueue",failfunc:"failCommonAjaxResponse"}))}function r(b){b.preventDefault();b.stopPropagation();var e=this.getAttribute("data-type"),d=this.getAttribute("data-func"),h=this.getAttribute("data-cgi"),q=c(this),k=q.parents("tr");b=q.closest(".b-form-page_view_dblock").attr("data-tabid");var s=k.attr("data-elid"),k=k.attr("data-elkeyname"),l=[],r="",n=h?pageInfo.host+h:pageInfo.url,
q=q.parents(".content").attr("data-tabid"),p={},v=c("#cont-"+q+" .toolbar"),p=filterXSS.friendlyAttrValue(v.attr("data-plid")||""),v=v.attr("data-convert"),u=this.getAttribute("data-value"),r=r+("elid="+encodeURIComponent(s));p&&(l.plid=p,r+="&plid="+p);v&&(l.tconvert=v,r+="&tconvert="+encodeURIComponent(v));u&&(l.value=u,r+="&value="+u);l.func=d;l.elid=s;"list"===e||"form"===e||"edit"===e?a.trigger("ajaxRequest",{url:n,param:l,invar:{parent:q},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"noqueue"}):
"url"===e?f.u.openInNewWindow(d,"_blank"):"group"===e?(p=this.getAttribute("data-confirm"),e={0:[l]},l.sok="ok",h={confirm:p,rows:k,tabId:q,params:l,to:e,self:this,cgi:h},b&&(h.__from="dashboard",h.__blockId=b),g.apply(m,[{},h])):"window"===e&&m.open(n+"?"+(r+("&func="+d))+"&newwindow=yes","_blank")}function u(b,e){var g=0,d;d=c(this);var h=this.getAttribute("data-type"),q=this.getAttribute("data-cgi"),k=this.getAttribute("data-name"),s=f.Dom.hasClass(this,"updatetab"),l=f.Dom.hasClass(this,"newtab"),
r=d.attr("class"),n,p,v,u={},z=!1,t=!1,A,H;u.plid="";n=this.getAttribute("data-url");p=this.getAttribute("data-parent");if("new"!==h&&"list"!==h&&"url"!==h&&"windownosel"!==h){void 0!==d.parents(".toolbar").attr("data-plid")&&(u.plid=filterXSS.friendlyAttrValue(d.parents(".toolbar").attr("data-plid")||""));if(x[p])for(v=x[p],A=v.length,H=A-1;A--;)A!==H?(u.elid+=", ",v[A].name&&(u.name+=", ")):(u.elid="",v[A].name&&(u.name="")),u.elid+=v[A].elid,v[A].name&&(u.name+=v[A].name);else M().each(function(){0!==
g?(u.elid+=", ",z=!0):u.elid="";u.elid+=this.getAttribute("data-elid");0===g?u.elname=this.getAttribute("data-elkeyname"):u.elname&&delete u.elname;g++});"groupformnosel"===h&&!u.elid&&(v=c('.tab-content_st_active .b-list__table-row:not(".back-btn")').get(0))&&(u.elid=v.getAttribute("data-elid"));if(d=d.parents(".toolbar").attr("data-convert"))u.tconvert=d}else d=filterXSS.friendlyAttrValue(d.parents(".toolbar").attr("data-plid")||""),u.plid=d||"";if(n.match(/\/?func=+/)){v=q?pageInfo.host+q:pageInfo.url;
n=n.replace("?","");d=n+"&elid="+encodeURIComponent(u.elid)+"&plid="+encodeURIComponent(u.plid);u.func=n.replace("func=","");n=this.getAttribute("data-progressid")+this.getAttribute("data-itemid");this.getAttribute("data-progressbar")&&(t=!0);if("window"===h||"groupwindow"===h||"windownosel"===h)return m.open(v+"?"+d+"&newwindow=yes","_blank"),!1;if("edit"===h&&z)return u.faction=u.func,u.func="groupedit",a.trigger("clickedGroupItem",{invar:{url:v,tabId:p,params:u,newTab:l,parent:p,type:h,updateTab:s,
name:k,hasProgressBar:!0,progressid:n},tabId:p,classes:r,triggerAction:"requestListAction"}),!1;if("url"===h)return q?f.u.openInNewWindow(v,"_blank"):f.u.openInNewWindow(u.func,"_blank"),!1;a.trigger("requestListAction",{url:v,params:u,newTab:l,parent:p,tabId:p,type:h,updateTab:s,name:k,hasProgressBar:t,progressid:n})}else console.log(n);b&&b.preventDefault()}function z(c,b){var f=b.url,e=b.params,g=b.tabId,d=b.newTab,h=b.parent,q=b.type,k=b.name,s=b.updateTab,l=b.progressid,r,n,u;b.hasProgressBar&&
(e.progressid=l,setTimeout(function(){var c={elid:l,func:"progress.get",sfrom:"ajax"};a.trigger("ajaxRequest",{param:c,invar:{tabId:g,param:c,type:"",progresstype:void 0},type:"get",outtype:"json",trfunc:"progressBarResponse",queue:"noqueue"})},700));if("refresh"===q||"action"===q)return a.trigger("ajaxRequest",{url:f,param:e,invar:{tabId:g,__src:"toolbarAction-refresh"},type:"get",trfunc:"ajaxGroupComplete",outtype:"json",queue:"noqueue",failfunc:"failCommonAjaxResponse"}),a.trigger("tabLoading",
{tabId:g}),!1;s&&(u=h,r="replace",n=!0,h=null);d&&(h=null);a.trigger("ajaxRequest",{url:f,param:e,invar:{dataSaved:!0,newtab:d,parent:h,targetTabId:u,iType:r,__srcBtn:k,__src:"toolbarAction",rParent:n},type:"get",outtype:"json",trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",queue:"noqueue"});d||a.trigger("tabLoading",{tabId:g})}function q(a){a=c(this);var b="",f="",e=0,g=this.getAttribute("data-url"),d=c("#b-lightbox-fake-link");void 0!==a.parents(".toolbar").attr("data-plid")&&(b=filterXSS.friendlyAttrValue(a.parents(".toolbar").attr("data-plid")||
""));M().each(function(){f=0!==e?f+", ":"";f+=this.getAttribute("data-elid");e++});d.attr("href","?"+g+"&elid="+f+"&plid="+b);d.trigger("click")}function v(a,b){if(b&&b.key&&b.keys&&b.len&&(!m.document.activeElement||!m.document.activeElement.getAttribute("type"))){var f="hotkey-";b.ctrl&&(f+="Ctrl-");b.shift&&(f+="Shift-");f+=b.key;f=c(".tab-content_st_active ."+f);f.length&&f.find(".img-link").trigger("click")}}function w(b){b&&b.preventDefault();blockSelection();b=c(".tab-content_st_active .toolbar-button.active .img-link.default");
0<b.length&&(b.hasClass("group")?d.apply(b):b.hasClass("action-preview")?q.apply(b[0]):u.apply(b[0]),a.trigger("hideContextIcon"))}function y(b,f){var e=c(this).parents(".tab-content").attr("data-tabid"),g=c("#cont-"+e+" .page_cnt .cnt").val(),g={p_num:this.getAttribute("data-n"),p_cnt:g};a.trigger("reloadTab",{tabId:e,param:g})}function D(b,f){var e=c(this).val(),g=c(".tab-content_st_active").attr("data-tabid"),d=c("#cont-"+g+" .page_cnt .cnt").val();a.trigger("reloadTab",{tabId:g,param:{p_num:e,
p_cnt:d}})}function E(a,b){var f;13===(a.keyCode||a.which)&&(f=c('.tab-content_st_active .pager-wrapper input[name="pager-slist"]'),1!==f.val()&&f.val(1),D.apply(f),a.preventDefault())}function F(a){var b=c('.tab-content_st_active .pager-wrapper input[name="pager-slist"]');1!==b.val()&&b.val(1);D.apply(b);a.preventDefault()}function A(c){var b=this.getAttribute("data-url"),e=this.getAttribute("data-parent"),g=/\/?func=+/,d;b&&(b.match(g)?(d=pageInfo.url,b=b.replace("?",""),b=f.Common.parseParams(b),
a.trigger("ajaxRequest",{url:d,param:b,noesc:!0,invar:{parent:e,newtab:!1,__src:"tSetting",__srcBtn:"tsetting"},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"menu",failfunc:"failCommonAjaxResponse"}),a.trigger("tabLoading",{tabId:e})):console.log(d));c&&c.preventDefault()}function C(b){b.preventDefault();var e=this.getAttribute("data-type"),d=this.getAttribute("data-func"),h=this.getAttribute("data-form");b=this.getAttribute("data-name");var q,k,d=f.Common.parseParams(d),h=f.Common.parseParams(h);
"group"===e?(q=c(this),e=q.closest(".b-form-page_view_dblock").attr("data-tabid"),k=q.parents("tr").attr("data-elid"),b=q.parents("table.list_table").find("div[data-confirm-"+b+"]").attr("data-confirm-"+b),d=[[{status:1,title:"",params:d}]],b={confirm:b,rows:k,tabId:void 0,to:d,self:this,params:h},e&&(b.__from="dashboard",b.__blockId=e),g.apply(m,[{},b])):(d=d.func?[[{status:1,title:"",params:d},{status:1,title:"",params:h}]]:[[{status:1,title:"",params:h}]],a.trigger("multiLoadTab",{tabs:d,isNotInit:!0}))}
function B(b){b.preventDefault();var e=c(this);b=e.closest(".b-list__table-row").attr("data-elid");var g=e.closest("td").index(),d=e.closest("table").find("th")[g].getAttribute("data-editform"),e=e.closest(".tab-content").attr("data-tabid"),h=f.Dom.byId("toolbar-"+e),g={};b={func:d,elid:b};h&&(d=filterXSS.friendlyAttrValue(h.getAttribute("data-plid")||""))&&(b.plid=d);"tab0"!==e&&(g.parent=e);a.trigger("ajaxRequest",{param:b,invar:g,type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"dashboard",
failfunc:"failCommonAjaxResponse"})}function K(a){a&&a.preventDefault()}var L=f.u.storage,x={},M=function(){return c('.tab-content_st_active .list_table .selected:not(".filtred")')},G=function(){return c("#main-wrapper")};return{init:function(){a.on(G(),".i-message__more-link, .i-wizard__step-link","click",p);a.on(G(),".back-btn-row","click",h);a.on(G(),".breadcrumb","click",e);a.bind("listSelectedData",g);a.bind("requestListAction",z);a.on(G(),".controlprop","click",r);a.on(G(),".toolbar-button.active span.action.group, .toolbar-button.active span.action.groupdownload",
"click",d);a.on(G(),'.toolbar-button.active span.action:not(".group")',"click",u);a.on(G(),".toolbar-button.active span.action-preview","click",q);a.on(G(),".pager-list_type_list .pager-list__item_act","click",y);a.bind("updateSelectedElems",n);a.bind("appendForm",b);a.bind("closeTabEvent",l);a.on(G(),".tsetting","click",A);a.bind("ajaxGroupComplete",s);a.on(G(),".list_table tr","dblclick",w);a.on(G(),".pager-list__input","keydown",E);a.on(G(),".pager-list__input-submit","click",F);a.on(G(),'input[name="pager-slist"]',
"change",D);a.on(G(),".dashboard-button","click",C);a.on(G(),".i-nestedlist","click",t);a.on(G(),".i-editform","click",B);a.on(G(),".i-toolbtn-type-dummy","click",K);a.bind("otherKeyUp",v)}}}(window,$,EventMgr,App);"use strict";
App.ActionHandlerDashboard=function(m,c,a,f){function n(){a.trigger("ajaxRequest",{url:pageInfo.url,param:{func:"dashboard"},invar:{exType:"dashboard"},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"dashboard"})}function b(c,f){"tab0"===f.tabId&&(n(),a.unbind("activateTab",b))}function l(){"dashboard"!==pageInfo.startpage||pageInfo.startform?(a.trigger("ajaxResponse",{lateLoad:!0,exType:"dashboard"}),a.bind("activateTab",b)):n()}function p(b,f){var e=f.block;e&&c("#cont-tab0").hasClass("tab-content_st_active")&&
c("#tblock-"+e.name).find(".dashblock-reload").trigger("click");e.autoupdate&&setTimeout(function(c){return function(){a.trigger("refreshDashBlock",{block:c})}}(e),1E3*e.autoupdate)}function t(a,c){r.push(c)}function h(c,b){if(b&&"tab0"===b.tabId)for(var f=0,e=r.length;f<e;f++)a.trigger("refreshDashBlock",{block:r[f]})}function e(b){b=b||m.event;b.preventDefault();b.stopPropagation();b=c(this).closest(".l-form-page__title-wr").attr("data-name").replace(".","_");var e="block-"+b,g=f.Dom.byId(e),h,
k;if(g){if(h=f.Dom.byId("t"+e))k=(new Date).getTime(),h.className+=" loading ";g=g.getAttribute("data-block-name");g=d.dashboard[g];if(h=c("#"+e+" .page.active").attr("data-n"))g.p_num=h;a.trigger("ajaxRequest",{param:g,invar:{blockId:e,startTime:k},type:"get",outtype:"json",trfunc:"ajaxResponseForDashboard",failfunc:"failedAjaxResponseForDashboard",queue:"dash_pager"+b})}}function k(){var b=c(this),e=b.parents(".block-table"),g=e.attr("id"),b=b.attr("data-n"),h=e.attr("data-block-name"),e=f.Dom.byId("t"+
g),h=d.dashboard[h],k;h.p_num=b;e&&(k=(new Date).getTime(),e.className+=" loading ");a.trigger("ajaxRequest",{param:h,invar:{blockId:g,startTime:k},type:"get",outtype:"json",trfunc:"ajaxResponseForDashboard",failfunc:"failedAjaxResponseForDashboard",queue:"dash_pager"+g})}function g(c){c&&c.preventDefault();c=this.getAttribute("data-form");var b=this.getAttribute("data-list"),f=this.getAttribute("data-top"),e=this.getAttribute("data-type");"form-list"===e?(f=[],f.push([{title:"",status:1,params:{func:b}},
{title:"",status:1,params:{func:c}}]),a.trigger("multiLoadTab",{tabs:f})):"list"===e||"form"===e?(c={func:b||c},a.trigger("ajaxRequest",{param:c,type:"get",invar:{__src:"dashboardBtn"},outtype:"json",trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",queue:"multiload"})):"top"===e&&(c={func:f},a.trigger("ajaxRequest",{param:c,type:"get",outtype:"json",invar:{dataSaved:!0,reload:!0},trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",queue:"multiload"}))}var d=f.Common.storage,s=function(){return c("#main-wrapper")},
r=[];return{init:function(){a.bind("refreshDashBlock",p);a.bind("loadPage",l);a.bind("addBlockToUpdate",t);a.bind("changedTab",h);a.on(s(),".dashblock-reload","click",e);a.on(s(),".pager-list_type_dashboard .pager-list__item_act","click",k);a.on(s(),".multi-item a, .multi-item span","click",g)}}}(window,$,EventMgr,App);"use strict";
App.AjaxHelper=function(m,c,a){var f={},n=function(a,c){var b=c.id;f[b]&&f[b].xhr.abort&&(f[b].erMsg="Request canceled By User",f[b].xhr.abort())},b=[],l=[],p=function(a){for(var c=0,f=b.length;c<f;c++)b[c].apply(this,[a])},t=function(b,k){function g(b){if("jsonp"!==t&&(b=b.replace(/\\'/g,"'"),b=b.replace(/^<![\w\s\"-\/]*>/g,""),!b)){console.log("empty response");a.trigger("ajaxError",{});return}if("json"===y&&"jsonp"!==t){b=b.replace(/[\x00-\x08\x0B-\x0C\x0E-\x1F]/g,"");try{b=jQuery.parseJSON(b)}catch(f){console.log("jsonParseError",
k,v);k.erType="json";v&&a.trigger(v,k);return}}if("html"!==y&&(b.sourceParamString=K,c.extend(b,m),b.selfUrl=pageInfo.url+"?"+b.urlparam,C.length))for(var e=C,g=e.length;g--;)b[e[g]]=null;"DoNothing"!==q&&a.trigger(q,b);a.trigger("giveAjaxRequest",{})}function d(c,b,e){"Service Unavailable"!==e&&503!==c.status||k.ignore503?"ajaxResponse"===q&&"dashboard"===m.exType?(m.error=!0,m.shithappend=!0,a.trigger("ajaxResponse",m)):v&&((c=String(c.responseText).match(/<div class="fatal-error-desc">(.*?)<\/div>/ig))&&
c[0]&&(k.erMsg=c[0]),f[k.id]&&App.u.isString(f[k.id].erMsg)&&(k.erMsg=f[k.id].erMsg),a.trigger(v,k),delete f[k.id]):(k.url=pageInfo.host+"/"+c.responseText,k.reqType="jquery",a.trigger("ajaxRequest",k));console.log(b)}p(k);var s=k.url||pageInfo.url,l=k.param||{},n=k.formData||{},m=k.invar||{},q=k.trfunc||"ajaxResponse",v=k.failfunc||!1,t=k.type||"get",y=k.outtype||"html",D=k.queue||"queue",E=!!k.noesc,F=k.reqType||"jquery",A=k.progressCb||function(){},C=k.rp||[],B=k.id;m.__dataSource=k;"noqueue"===
D&&(D=(new Date).getTime());l.sfrom="ajax";l.operafake=(new Date).getTime();var K=h(l,E);"jquery"===F?(a.trigger("getAjaxRequest",{}),s={url:s,type:t,dataType:"html",data:K,headers:{"ISP-Client":"Web-interface"},async:!0,success:g,xhrFields:{withCredentials:!0},error:d},"jsonp"===t&&(s.jsonp="callback",s.dataType="jsonp",s.crossDomain=!0),c.ajaxq(D,s)):(D=new XMLHttpRequest,D.upload.addEventListener("progress",A,!1),D.open("POST",s),D.setRequestHeader("ISP-Client","Web-interface"),D.onreadystatechange=
function(){4===this.readyState&&(200===this.status?(delete f[B],g(this.responseText)):d(this,this.statusText,this.statusText))},n.append("sfrom","ajax"),f[B]={xhr:D},D.send(n))},h=function(a,c){var b=0,f="",h,l;for(l in a)""!==l&&(0!==b&&(f+="&"),h=a[l],f=c?f+(l+"="+h):f+(l+"="+encodeURIComponent(h)),b++);return f};return{init:function(){a.bind("ajaxRequest",t);a.bind("ajaxRequestAbort",n)},addRequestHook:function(a){"function"===typeof a&&b.push(a)},addResponseHook:function(a){"function"===typeof a&&
l.push(a)}}}(window,$,EventMgr);"use strict";
App.Alert=function(m,c,a){var f=null,n=null,b=null,l=function(a,h){var e=h.msg,k=h.closeTimeout,g=c("#modal_alert_message"),d;f=h.callback||null;n=h.himself||m;b=h.param;g.html(e);c("body").addClass("active-modal-alert");setTimeout(function(){d=g.find(".b-textarea");d.length?d.select():c("#modal_alert_ok").focus()},1);k&&setTimeout(function(){p()},k)},p=function(){c("body").removeClass("active-modal-alert");null!==f&&f.apply(n,[b])};return{init:function(){a.bind("showAlert",l);a.obind(c("#modal_alert_ok"),
"click",p)}}}(window,$,EventMgr);"use strict";App.FormUtils=function(m,c,a){return{changeReadOnly:function(a,c){a&&0!==a.length&&(c?a.find(".b-myselect, .b-radio, .b-checkbox__control, .l-slider__wr, .b-input_for_slider, .b-mselect").addClass("readonly").removeClass("mselect-av"):a.find(".b-myselect, .b-radio, .b-checkbox__control, .l-slider__wr, .b-input_for_slider, .b-mselect").removeClass("readonly").addClass("mselect-av"),a.find(".b-input, .b-textarea").attr("readonly",c))}}}(window,$,App);"use strict";
App.FormDependFields=function(m,c,a,f,n){function b(){var a=this.getAttribute("data-handler-val"),b=this.getAttribute("name"),k=this.getAttribute("type"),g=this.getAttribute("data-tabid"),d=!1,l=d=d=void 0,d=void 0;b&&(d=c(".hidden-shadow-"+b),l=c(".hidden-"+b),f.changeReadOnly(d,!1),d.removeClass("hidden-shadow-"+b),l.removeClass("hidden-"+b),c(".showed-"+b).addClass("depended-hidden-s").addClass("l-form__row_hidden_yes").removeClass("showed-"+b),d=c(".depended-shadow-s"),d.hasClass("row-shadow")||
(d.addClass("row-shadow"),f.changeReadOnly(d,!0)),d=c(".showed-shadow-"+b).removeClass("showed-shadow-"+b).addClass("depended-shadow-s").addClass("row-shadow"),f.changeReadOnly(d,!0),d=c(this).parents(".l-form__row, .filter-item").hasClass("l-form__row_hidden_yes"),d||("text"!==k&&"textarea"!==k&&a?(c("#frm-"+g+" [data-show-"+b+"-"+a+' = "yes"]').addClass("showed-"+b).removeClass("depended-hidden-s").removeClass("l-form__row_hidden_yes"),d=c("#frm-"+g+" [data-show-shadow-"+b+"-"+a+' = "yes"]').addClass("showed-shadow-"+
b).removeClass("depended-shadow-s").removeClass("row-shadow"),f.changeReadOnly(d,!1),c("#frm-"+g+" [data-hide-"+b+"-"+a+' = "yes"]').addClass("hidden-"+b).addClass("l-form__row_hidden_yes"),d=c("#frm-"+g+" [data-shadow-"+b+"-"+a+' = "yes"]').addClass("hidden-shadow-"+b).addClass("row-shadow")):""===this.value?(c("#frm-"+g+" [data-hide-"+b+"-"+hash("empty-yes")+' = "yes"]').addClass("hidden-"+b).addClass("l-form__row_hidden_yes"),d=c("#frm-"+g+" [data-shadow-"+b+"-"+hash("empty-yes")+' = "yes"]').addClass("hidden-shadow-"+
b).addClass("row-shadow")):(c("#frm-"+g+" [data-hide-"+b+"-"+hash("empty-no")+' = "yes"]').addClass("hidden-"+b).addClass("l-form__row_hidden_yes"),d=c("#frm-"+g+" [data-shadow-"+b+"-"+hash("empty-no")+' = "yes"]').addClass("hidden-shadow-"+b).addClass("row-shadow")),f.changeReadOnly(d,!0)))}function l(a){c("#cont-"+a+' tr:not(".row-error") .control-field input[type="hidden"], #cont-'+a+' tr:not(".row-error") .control-field input[type="text"], #cont-'+a+' tr:not(".row-error") .control-field input[type="password"], #cont-'+
a+' tr:not(".row-error") .control-field .b-input_type_file, #cont-'+a+' .control-field.filter-item input[type="hidden"], #cont-'+a+" .control-field .b-textarea, #cont-"+a+' .control-field.filter-item input[type="text"]').each(function(){b.apply(this)})}function p(a){c("#form-wrapper-"+a+" .b-form-page").each(function(){var a=this.getAttribute("id");0<c("#"+a+" .l-form__row:not(.l-form__row_hidden_yes):not(.depended-hidden-s)").length?this.style.display="":this.style.display="none"})}function t(b,
f){var k=f&&"boolean"!==typeof f?f.tabId:this.getAttribute("data-tabid");c("#cont-"+k+" .l-form__row_hidden_yes").removeClass("l-form__row_hidden_yes");c("#cont-"+k+" .row-shadow").removeClass("row-shadow");l(k);p(k);a.trigger("updFormHeight",{tabId:k});a.trigger("reloadSlider",{tabId:k});a.trigger("upPrefixField",{tabId:k})}return{init:function(){a.bind("appendForm,appendReport,appendedFilter,initFuncRun",t);a.on(n.selectorCache(".i-form-wr"),'.control-field input[type="hidden"], .control-field .b-input, .control-field .b-input_type_file, .control-field .b-textarea',
"change",t)}}}(window,$,EventMgr,App.FormUtils,App.Common);"use strict";_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"===typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};
App.Forms=function(m,c,a,f,n){var b,l,p,t,h,e;function k(a,c){var b=c.tabId;ga[b]&&delete ga[b]}function g(){return f.Common.selectorCache(".i-form-wr")}function d(){return c(".tab-content_st_active")}function s(a,b){c("#cont-"+b.tabId).find(".b-title_type-form").each(function(){this.offsetWidth<this.scrollWidth-1&&(this.className+=" overwidth",this.removeAttribute("data-hint"))})}function r(a){a.preventDefault();a="";"undefined"!==typeof m.getSelection?a=m.getSelection().toString():"undefined"!==
typeof document.selection&&"Text"===document.selection.type&&(a=document.selection.createRange(),a=a.text);if(""!==a){var c=a.split("\n"),b=c.length;a="";for(var e=0;e<b;e++)a+="> "+c[e],e!==b-1&&(a+="\n");c=this.getAttribute("data-target");(c=f.Dom.byId(c))&&f.u.insertStringAfterCaret(c,a)}}function u(){var a=this.getAttribute("data-source");c("#"+a).trigger("click")}function z(){var c=this.id,b=this.getAttribute("data-tabid"),c=f.Dom.byId("f-"+c),e=this.value,g=0<=e.indexOf("\\")?e.lastIndexOf("\\"):
e.lastIndexOf("/"),d="",h=f.Dom.byId("b-input-file__wr-"+b);if(this.files){for(var e=this.files,g=e.length,q=0;q<g;q++)0!==q&&(d+=", "),d+=e[q].name;f.Dom.addClass(h,"b-input-file__wr_state_selected");h=this.getAttribute("name");b=f.u.checkFileSize(b,h);b.msg?a.trigger("errMsgValid",{self:b.field,err:b.msg,number:0}):a.trigger("okMsgValid",{self:b.field,number:0,notOk:!0})}else{d=e.substring(g);if(0===d.indexOf("\\")||0===d.indexOf("/"))d=d.substring(1);f.Dom.removeClass(h,"b-input-file__wr_state_selected")}d=
m.filterXSS(d);c.innerHTML=d;c.setAttribute("data-hint",d)}function q(a){var g=this.getAttribute("data-id"),d=this.getAttribute("data-tabid"),q=f.Dom.byId(g),k=this.getAttribute("data-move-trigger")||!1;parseInt(this.offsetTop,10);var la=c(".b-tip_name_textarea_resize");la.length&&la.find(".b-tip__close").trigger("click");b=parseInt(q.style.height,10);b||(b=q.offsetHeight);l=q;p=g;t=d;h=k;a=a||m.event;a.touches?(e=a.touches[0].pageY,document.ontouchmove=v,document.ontouchend=w,document.ontouchcancel=
w):(e=a.clientY,document.onmousemove=v,document.onmouseup=w);document.body.style.cursor="n-resize"}function v(c){var f;f=c.touches?c.touches[0].pageY-e:c.clientY-e;l&&(l.style.height=b+f+"px");h&&(clearTimeout(ma),ma=setTimeout(function(){a.trigger(h,{id:p,tabId:t})},100));c.preventDefault()}function w(b){b.touches?(document.ontouchmove=null,document.ontouchend=null,document.ontouchcancel=null):(document.onmousemove=null,document.onmouseup=null);a.trigger("updFormHeight",{tabId:t});document.body.style.cursor=
"";c(l).removeClass("b-textarea_responsive_yes");b.preventDefault()}function y(a){a.preventDefault();c(this).prev().trigger("click")}function D(){var b=this.parentNode,e=b.className,g,d,h,q,k,l,s,r;q=c(this);g=q.parents(".tree-inner");k=g.attr("data-tabid");r=g.attr("id");e.match(/t-opened/)?(e=e.replace(/t-opened/g,""),e+=" collapsed"):e.match(/collapsed/)&&(e.match(/loaded/)?(e=e.replace(/collapsed/g,""),e+=" t-opened"):e.match(/loading/)||(g=f.Dom.byId(r+"-value").name,d=c("#frm-"+k).serializeObject(),
h=X.url,d.sv_field=g,d.sv_tree="yes",l=q.siblings(".tree-handler"),q=q.siblings(".tree-handler").children(".icon").children("img"),s=q.attr("src"),q.attr("src",X.theme+"img/loader.gif"),d[g]=l.attr("data-val"),e+=" loading",d.sv_text=c(l).find(".tree-label").text(),a.trigger("ajaxRequest",{url:h,param:d,trfunc:"formGetTreeBranch",invar:{tabId:k,name:g,elem:l,src:s,img:q,id:"cont-"+r},type:"get",outtype:"json",queue:"noqueue"})));b.className=e;a.trigger("updateScroll",{id:"cont-"+r})}function E(a){a=
c(this).parents(".tree-inner").attr("id");F(a).removeClass("selected");a=f.Dom.byId(a+"-value");a.value=this.getAttribute("data-val");c(a).trigger("change");this.className+=" selected"}function F(a){return c("#"+a+" .tree-handler.selected")}function A(a){var b=c(this),e=b.parents(".tree-inner").attr("id"),g="",d=f.Dom.byId(e+"-value");a.ctrlKey||a.metaKey?(b.hasClass("selected")?b.removeClass("selected"):b.addClass("selected"),F(e).each(function(a){0!==a&&(g+=",");g+=this.getAttribute("data-val")})):
(F(e).removeClass("selected"),g=this.getAttribute("data-val"),this.className+=" selected");d.value=g;c(d).trigger("change")}function C(){setTimeout(function(){c(".tree-wrapper .selected").each(function(){var b=c(this).parents(".tree-wrapper").attr("id");a.trigger("scrollTo",{id:b,offsetTop:this.offsetTop})})},100)}function B(){var a=this.getAttribute("data-tabid");f.Dom.byId("frm-"+a).reset()}function K(){this.getAttribute("data-novalue")&&(this.setAttribute("data-novalue","no"),this.placeholder&&
(this.placeholder=""))}function L(a){a=a||m.event;if((a.which||a.keyCode)===ha){a.preventDefault();var b=c(this);a=this.getAttribute("data-tabid");b.trigger("change");b.trigger("blur");M(a)}}function x(a){a=a||m.event;(a.which||a.keyCode)===ha&&(a.ctrlKey||a.metaKey)&&(a.preventDefault(),c(this).trigger("blur"),a=this.getAttribute("data-tabid"),M(a))}function M(a){var b=c("#cont-"+a+" .i-button_default_yes"),f=c("#cont-"+a+" .b-button_act_ok"),e=c("#cont-"+a+" .b-button_act_next"),g=c("#frm-"+a+" .b-button__filter-set");
setTimeout(function(){var a;b[0]?a=b:f[0]?a=f:e[0]?a=e:g&&(a=g);a.first().trigger("click")},1)}function G(){var c="undefined"!==typeof localStorage?localStorage.getItem("mgr5-passwdlist"):!1,b="undefined"!==typeof localStorage?localStorage.getItem("mgr5-passwd-ver"):!1,f=!1;X.version!==b&&(J("mgr5-passwd-ver",X.version),f=!0);c&&""!==c&&!f?ea=c:a.trigger("ajaxRequest",{url:"/manimg/common/passwd.list",param:{},trfunc:"gotPasswdList",outtype:"html",type:"get"})}function J(a,c){if("undefined"!==typeof localStorage)localStorage.setItem(a,
c);else return!1}function I(a,c){ea="\n"+c+"\n";J("mgr5-passwdlist",ea)}function R(c){var b;this.getAttribute("data-check-field")?(b=this.getAttribute("data-tabid"),c=f.Dom.byId(this.getAttribute("data-check-field")+"-"+b)):c=this;var e=c.getAttribute("data-confirm-field"),g=c.getAttribute("data-parent"),e=f.Dom.byId(e),g=f.Dom.byId("check-confirm-"+g),d=!1,h=!1;f.Dom.hasClass(g,"b-form-confirm-message_show_true")&&(h=!0);e&&c.value!==e.value?h||(f.Dom.addClass(g,"b-form-confirm-message_show_true"),
d=!0):h&&(f.Dom.removeClass(g,"b-form-confirm-message_show_true"),d=!0);d&&a.trigger("updateScroll",{id:"form-scroll-"+b})}function N(){var b,e=f.u.escapeRegExp(c.trim(this.value)),g=this.getAttribute("data-parent");b=RegExp("\n"+e+"\n","i");var e=this.getAttribute("data-tabid"),g=f.Dom.byId("checkpass-indicator-wrapper-"+g),d=!1;g&&(""!==this.value?(b=ea.match(b)?0:P(this.value),g.className!==na[b]+" showed"&&(g.className=na[b]+" showed",d=!0)):""!==g.className&&(g.className="",d=!0));d&&a.trigger("updateScroll",
{id:"form-scroll-"+e})}function P(a){var c=a.length;a=a.split("");var b=0,f=0,e=0,g=0,d={},h=[],q;for(q=0;q<c;q++)d[a[q]]||b++,d[a[q]]=!0,a[q].match(/[!@#$%^&*?_~{}"'()|\\+\[\]]\s/)?(f++,h.push("sn")):a[q].match(/[a-z]/)?h.push("ll"):a[q].match(/[A-Z]/)?h.push("lu"):a[q].match(/\d/)?h.push("dn"):(f++,f++,h.push("sn")),0!==q&&(h[q].substr(0,1)===h[q-1].substr(0,1)&&e++,h[q].substr(1,1)!==h[q-1].substr(1,1)&&g++);c=(c+Math.sqrt(0.5*f+g)-Math.sqrt(e))*(Math.log(b)/Math.log(c));return 3>c?0:3<=c&&6>c?
1:6<=c&&9>c?2:9<=c?3:0}function O(b){b.preventDefault();b=this.getAttribute("data-level");var e=ia(),g=c("#frm-"+e),d=g.serializeObject(),g=g.find(".i-control-mixed");d.userexperience=b;0!==g.length&&(d=f.u.removeParam(g,d));d.snext&&delete d.snext;d.sback&&delete d.sback;a.trigger("reloadTab",{tabId:e,param:d})}function S(b){b.preventDefault();b=this.getAttribute("data-elid");var e=c(this),g=e.parents("td").index(),d=e.parents("table").find("th")[g],g=d.getAttribute("data-colname"),d=d.getAttribute("data-nestedreport"),
h=ia(),q=f.Dom.byId(h+"-plid"),k=c("#frm-"+h).serializeObject();b=b||e.find(".b-list__table-col-content").first().html();k.func=d;k.elid=b;k.colname=g;null!==q&&(k.plid=q.value);a.trigger("ajaxRequest",{param:k,invar:{parent:h},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"nested-"+h,failfunc:"failCommonAjaxResponse"});a.trigger("tabLoading",{tabId:h})}function U(c,b,e){setTimeout(function(){var g=c.closest(".l-form__row"),g=g[0]?g[0].offsetTop:0,d=c.closest(".b-form-page"),h=f.Dom.byId("form-scroll-"+
b);h&&parseInt(h.style.height,10);d[0]&&(g+=d[0].offsetTop);a.trigger("scrollTo",{id:"form-scroll-"+b,offsetTop:g,animate:e})},100)}function V(a,b){var f=c(".row-error .b-input, .row-error .b-textarea, .row-error .b-checkbox__control"),e=b.tabId,g;0<f.length&&(g=f.closest(".b-form-page"),g.hasClass("b-form-page_st_collapsed")&&g.find(".i-form-page__title").trigger("click"),f.focus(),U(f,e,!0))}function W(a,b){if(!ya&&!m.pageInfo.mobile){var f=b.tabId,e=document.getElementById("frm-"+f);if(null!==
e){var g=e.length,d=null,h,d=c("#form-wrapper-"+f+" .b-form__focus-field");if(0<d.length)d.focus(),U(d,f,!1);else for(var q=0;q<g;q++){d=e[q];if("hidden"===d.type&&"select"===d.getAttribute("data-type")){if(h=c(d).parent(),!h.hasClass("readonly")&&0!==h.width()){e=d.getAttribute("name");c("#_"+e+"-"+f+" .b-myselect__select-value").focus();m.scrollToTopLeft();break}}else if("hidden"===d.type&&"radio"===d.getAttribute("data-type")){if(h=c(d).parent(),!h.hasClass("readonly")&&0!==h.width()){e=d.getAttribute("name");
c('.tab-content_st_active div[data-id="'+e+'"][tabindex="0"]').focus();m.scrollToTopLeft();break}}else if("hidden"===d.type&&"checkbox"===d.getAttribute("data-type")){e=d.getAttribute("name");c("#"+f+"-"+e).focus();m.scrollToTopLeft();break}h=d.getAttribute("readonly");h=null!==h;if("hidden"!==d.type&&!h&&0!==d.offsetWidth){d.focus();m.scrollToTopLeft();break}}}}}function Y(b,f){var e=f.tabId,g=X.url,d=f.name,h=c("#frm-"+e).serializeObject();h.sv_field=d;a.trigger("ajaxRequest",{url:g,param:h,trfunc:"formSetValues",
invar:{tabId:e},type:"get",outtype:"json",queue:"multiload"})}function T(b,e,g){var d=this;setTimeout(function(){a.trigger("preSetValues",[d,100]);var b=d.getAttribute("id"),h=c(d),q=h.getFlags();if(h.hasClass("b-textarea_for_zoom")||ja===g)return!0;ja=b;if(e)return!0;var b=d.getAttribute("data-tabid"),k=c("#frm-"+b),h=k.serializeObject(),l={},s=X.url,r=f.Dom.hasClass(d.parentNode,"sv_nochange"),q=f.Dom.hasClass(d.parentNode,"sv_blocking")||q.blocking,n=d.getAttribute("data-name")?d.getAttribute("data-name"):
d.name,m=d.getAttribute("data-id");k.hasClass("b-form_showcase_yes");var p=k.hasClass("withfiles"),k=k.find(".i-nosetvalues");0!==k.length&&(h=f.u.removeParam(k,h));m&&"undefined"!==m&&(m=m.split("=",2),m[1]&&(h[m[0]]=m[1],l[m[0]]=m[1]));h.sv_field=n;s={url:s,param:h,failfunc:"failFormAjaxResponse",trfunc:"formSetValues",invar:{tabId:b,once:r,blocking:q},type:"post",outtype:"json",queue:"multiload"};p?(s.invar.blocking=!0,l.sv_field=n,l.sfrom="ajax",a.trigger("setBrandSettings",{options:s,tabId:b,
param:h,addParams:l})):(a.trigger("ajaxRequest",s),q&&a.trigger("tabLoading",{tabId:b}))},0)}function ba(a,c){if(""===c)return!0;if("string"===typeof a){if("string"===typeof c)c=c.split(",");else if("function"!==typeof c.join)return!1;var b=a.split(","),f=b.length;b.sort();c.sort();if(b.length!==c.length)return!0;for(;f--;)if(b[f]!==c[f])return!0}return!1}function Q(b,e){e.ok&&e.reload&&m.location.reload();var d=e.tabId,g=f.Dom.byId("frm-"+d),h=e.once,q=[];e.blocking&&a.trigger("tabLoadingHide",{tabId:d});
if(null!==g&&!e.error){var k=e.setvalues,l="",s,r,n,p,u,v;if("object"===("undefined"===typeof k?"undefined":_typeof(k)))for(s in k)if(l=g.elements[s],"item"!==s&&"length"!==s)if(l){if(r=l.tagName,n=k[s],p=!0,null!==n){if("INPUT"===r){if(r=l.getAttribute("type"),l.value!==n){if("text"===r||"password"===r){p=l.value!==n.value;l.value=n.value;n.prefix&&(r=c(l).parent().find(".i-input__prefix"),r.length&&(r.html(n.prefix),a.trigger("upPrefixField",{tabId:d})));if(void 0!==n.min||void 0!==n.max||void 0!==
n.step)r=l.id,r=c("#"+r+"-slider"),void 0!==n.min&&r.attr("data-min",n.min),void 0!==n.max&&r.attr("data-max",n.max),void 0!==n.step&&r.attr("data-step",n.step),a.trigger("reloadSlider",{tabId:d});void 0!==n.mask&&a.trigger("inputMaskChangeBySetvalues",{elem:l,mask:n.mask,value:n.value})}else if("file"===r)""===n.value&&(r=c(l),r.replaceWith(r.val("").clone(!0)),c(g.elements[s]).trigger("change"));else if("hidden"===r&&(p=l.value!==n.value||k[s].slist))if(r=l.getAttribute("id"),u=l.getAttribute("data-type"),
"select"===u){if(n.slist?(c("ul#"+d+"-"+l.name).html(templates.formItemSelectList({slist:k[s].slist,value:""})),a.trigger("cleanSlistCache",{tabId:d,id:d+"-"+l.name}),k[s].slist&&10<k[s].slist.length&&(u=c("#_"+l.name+"-"+d),u.hasClass("sb-select")||u.addClass("sb-select")),a.trigger("forceDepend",{tabId:d}),k[s].slist&&0!==k[s].slist.length?""!==k[s].value?v=c("#"+d+"-"+s+' li[data-val="'+k[s].value+'"]'):(v=c("#"+d+"-"+s+' li[data-val="'+l.value+'"]'),0===v.length&&(v=c("ul#"+d+"-"+l.name+" li:first"))):
c("#_"+s+"-"+d+" .b-myselect__select-value").html(k.nullmsg)):v=c("#"+d+"-"+s+' li[data-val="'+n.value+'"]'),0<v.length){u=c("#_"+s+"-"+d);var t=u.hasClass("readonly");t&&u.removeClass("readonly");v.trigger("click",[h,r]);t&&u.addClass("readonly")}}else if("radio"===u)n.slist&&f.Tabs.tabs[d]&&f.Tabs.tabs[d].formSource&&f.Tabs.tabs[d].formSource[s]&&(u=f.Tabs.tabs[d].formSource[s],t="",u.slist=n.slist,n.value?u.value=n.value:u.slist[0]&&(u.value=u.slist[0].key),t=templates.formItemRadio(u),c("#"+d+
"-"+s+"-radio").replaceWith(t)),n.slist||c("#frm-"+d+" ."+s+"-"+d+"-"+m.hash(n.value)).trigger("click",[h,r]);else if("checkbox"===u)c("#"+d+"-"+s).trigger("click",[[h,!0]]);else if("multiple"===u){if((p=ba(l.value,void 0!==n.value?n.value:n))||n.slist)r=l.getAttribute("data-id"),a.trigger("selectValues",{id:r,sElems:k[s]})}else"tree"===u?c("#"+s+"-"+d+' li[data-val="'+k[s].value+'"]').trigger("click",[h,!0]):l.value=n.value;p&&(r=l.getAttribute("id"),c(l).trigger("change",[h,r]))}}else p=l.value!==
n.value,l.value=n.value,p&&(r=l.getAttribute("id"),c(l).trigger("change",[h,r]),l.classList&&l.classList.contains("b-text-editor")&&a.trigger("TinyMCE_setContent",{content:l.value,id:r}));n.readonly&&q.push({elem:l,readonly:"yes"===n.readonly})}}else if(l=f.Dom.byId(d+"-"+s)){r=l.getAttribute("data-type");if("img"===r)l.src=k[s].value;else if("ticket"===r)(n=templates.formItemTicketMsg(k[s]))&&c(n).appendTo(l);else if("list"===r)k[s].id=d,k[s].type="form",l.innerHTML="blocklist"===k[s].view?templates.formListBlocksContent(k[s]):
templates.formListContent(k[s]);else if("listfilter"===r)k[s].id=d,l.innerHTML=templates.formListFilter(k[s]);else if("buttons"===r){n=k[s];p=k[s].length;for(r=0;r<p;r++)if(e.__formModel&&e.__formModel.__buttons[r]&&n[r].name!==e.__formModel.__buttons[r].name){r=c("#"+d+"-buttons .b-button").first().attr("data-parent");l.innerHTML=templates.buttons({buttons:n,id:d,parent:r,type:"form",cancelBtnClass:""});a.trigger("updateModel",{tabId:d,name:"__buttons",value:n});break}0===p&&(l.innerHTML="",a.trigger("updateModel",
{tabId:d,name:"__buttons",value:n}))}else"link"===r?(n=String(k[s].value).replace(/&amp;/g,"&"),l.href=n,l.setAttribute("data-url",f.u.escapeQuote(n))):"datetime"===r?(n=f.u.parseDate(k[s].value),n=(new Date).getTime()-n.getTime(),l.setAttribute("data-difftime",n)):("textdata"===r&&(l=f.Dom.byId(d+"-"+s+"-inner")),l.innerHTML=m.htmlDecode(k[s].value));a.trigger("updateScroll",{id:"form-scroll-"+d})}else(l=f.Dom.byId(s+"-"+d))&&"frame"===l.getAttribute("data-type")&&l.setAttribute("src",k[s].value);
r=0;for(p=q.length;r<p;r++)f.FormUtils.changeReadOnly(c(q[r].elem).closest(".l-form__row"),q[r].readonly);a.trigger("setValuesDone",{tabId:d})}}function fa(a){if((a.which||a.keyCode)===oa){a.preventDefault();var c=this.value,b=Z(this);a=c.substr(0,b);c=c.substr(b);this.value=a.replace(/((\s*\S+)*)\s*/,"$1")+"\n"+c.replace(/((\s*\S+)*)\s*/,"$1");a=a.length;null!==this&&(this.createTextRange?(c=this.createTextRange(),c.move("character",a),c.select()):this.selectionStart?(this.focus(),this.setSelectionRange(a,
a)):this.focus())}}function Z(a){if(a.selectionStart)return a.selectionStart;if(document.selection){a.focus();var c=document.selection.createRange();if(null===c)return 0;a=a.createTextRange();var b=a.duplicate();a.moveToBookmark(c.getBookmark());b.setEndPoint("EndToStart",a);return b.text.length}return 0}function da(a){a=c(this);var b=a.attr("data-control-field"),e=d().attr("data-tabid"),b=c("#cont-"+e+' input[name="'+b+'"], #editinlist-wrapper-'+e+' input[name="'+b+'"]');a=a.val().replace(/\n+/g,
" ").replace(/(^\s*|\s*$)/g,"").replace(/\s+/g," ");b.val(a).trigger("change")}function H(a,b){var e=b.tabId,d=b.self,g;d&&f.Dom.hasClass(d,"testzoom")&&(g=d.name,e=c("#cont-"+e+' .b-textarea[name="zoom-'+g+'"], #editinlist-wrapper-'+e+' .b-textarea[name="zoom-'+g+'"]'),d=d.value.replace(/(^\s*|\s*$)/g,"").replace(/\s+/g,"\n"),0<e.length&&(e[0].value=d))}function ca(a){var b=c(this),e=b.attr("data-control-field"),b=b.attr("data-type"),g=d().attr("data-tabid"),e=f.Dom.byId(e+"-"+g),h,q;e&&(h=e.getAttribute("data-syncfield"))&&
(q=f.Dom.byId(h+"-"+g));null!==e&&("month"===b?f.Calendar.showMonth(e,q,a):f.Calendar.show(e,q,a))}function za(){var b=c(this),e=b.attr("data-control-field"),f=b.parents(".l-form__row"),b=d().attr("data-tabid"),g=c("#cont-"+b+' input[name="'+e+'"], #editinlist-wrapper-'+b+' input[name="'+e+'"]'),e=c("#cont-"+b+' .b-textarea[name="zoom-'+e+'"], #editinlist-wrapper-'+b+' .b-textarea[name="zoom-'+e+'"]');f.hasClass("zoom")?(f.removeClass("zoom"),f=e[0].value.replace(/\n+/g," ").replace(/(^\s*|\s*$)/g,
"").replace(/\s+/g," "),g.val(f)):(f.addClass("zoom"),f=g.val().replace(/(^\s*|\s*$)/g,"").replace(/\s+/g,"\n"),e[0].value=f);a.trigger("updFormHeight",{tabId:b});a.trigger("updateFixedField",{tabId:b})}function Aa(){var a=this.getAttribute("data-control-field"),b=this.getAttribute("data-tabid");if(a=f.Dom.byId(a+"-"+b))b=a.getAttribute("type"),"text"===b?(a.setAttribute("type","password"),c(this).removeClass("b-input-btn_pwd_liketext")):"password"===b&&(a.setAttribute("type","text"),c(this).addClass("b-input-btn_pwd_liketext"))}
function Ba(){var a=this.getAttribute("data-parent"),a=f.Dom.byId(a);null!==a&&(a.value=this.value,c(a).trigger("change"))}function ka(){var a=this.getAttribute("data-control-field"),b=c('.tab-content_st_active input[name="'+a+'"]'),e=b.val(),g=b.attr("data-check-field"),h=X.pwgenlen||8,q=X.pwgencharacters||"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",l=c('.tab-content_st_active input[name="'+g+'"][type="password"]'),k,s=0,r=d().attr("data-tabid");if(!b.attr("readonly")){a&&c('.b-input-btn_type_showpwd[data-control-field="'+
a+'"]').remove();a=f.Dom.byId(a+"-"+r+"-fake");g=f.Dom.byId(g+"-"+r+"-fake");a&&0===a.offsetWidth&&(a.style.display="block",g&&(g.style.display="block"),b.hide(),l&&l.hide());k=q.match(/[a-z]/g);var n=q.match(/[A-Z]/g),p=q.match(/\d/g),m=q.match(/[!,@,#,$,%,^,&,*,?,_,~]/g),q={},u=[],v=0,r=0;if(k||n)v++,u.push("l");k&&(k=k.join(""),n?q.lc=k:q.l=k,r++);n&&(n=n.join(""),k?q.uc=n:q.l=n,r++);p&&(p=p.join(""),q.d=p,u.push("d"),v++);m&&(m=m.join(""),q.s=m,u.push("s"),v++);for(k=0;k<h-v;k++)s===v&&(s=0),
u.push(u[s]),s++;k=Math.floor(Math.random()*h+1)%v;s=u;u=k;for(n=s.length-1;u--;)k=s[0],s.splice(0,1),s[n]=k;pa(e,0,{passwdField:b,confirmField:l,passwdFake:a,confirmFake:g,pwdLen:h,typesPull:s,pwgenchar:q,letters:r},"lc")}}function pa(a,b,e,f){a=a.substr(0,b);for(var d="",g=f,h,q=e.typesPull,k=e.pwgenchar,l=e.letters,s=b;s<e.pwdLen;s++)h=q[s],"l"===h&&2===l&&(h=g="lc"===g?"uc":"lc",s===b&&(f=g)),d+=k[h].substr(Math.floor(Math.random()*k[h].length),1);b++;a+=d;e.passwdField.val(a);e.confirmField.val(a);
e.passwdFake.value=a;e.confirmFake&&setTimeout(function(){e.confirmFake.value=a},1);b<e.pwdLen?setTimeout(function(){pa(a,b,e,f)},35):(c(e.passwdField).trigger("change"),c(e.passwdFake).trigger("change"),c(e.confirmField).trigger("change"))}function ia(){return c(".tab-content_st_active").attr("data-tabid")||!1}function Ca(a){a=a||m.event;var b=a.which||a.keyCode;if(b===ha||b===oa)a.preventDefault(),c(this).trigger("click")}function Da(a){a=a||m.event;var b=a.which||a.keyCode,e;if(b===Ea&&!a.ctrlKey){a.preventDefault();
a=this.getAttribute("data-id");e=this.getAttribute("data-handler-val");a=c(this).closest(".b-radio").find('div[data-id="'+a+'"]');var f=null;a.each(function(){if(this.getAttribute("data-handler-val")===e&&null!==f)return this.setAttribute("tabindex",""),f.setAttribute("tabindex","0"),aa.apply(f),f.focus(),m.scrollToTopLeft(),!1;f=this})}else if(b===Fa&&!a.ctrlKey){a.preventDefault();a=this.getAttribute("data-id");e=this.getAttribute("data-handler-val");a=c(this).closest(".b-radio").find('div[data-id="'+
a+'"]');var d=!1;a.each(function(){if(d)return this.setAttribute("tabindex","0"),aa.apply(this),this.focus(),!1;this.getAttribute("data-handler-val")===e&&(this.setAttribute("tabindex",""),d=!0)})}}function Ga(){var a=this.getAttribute("data-r-class");c("."+a).trigger("click")}function qa(a,b){var e=this.getAttribute("data-tabid"),f=this.getAttribute("data-id");c('.b-checkbox__control[data-tabid="'+e+'"][data-id="'+f+'"]').trigger("click",[b])}function aa(a,b){var e=c(this),f=this.getAttribute("data-id"),
d=this.getAttribute("data-val"),g=this.getAttribute("data-handler-val");if(e.hasClass("checked"))return!1;c("."+f).removeClass("checked").attr("tabindex","");e.addClass("checked");this.setAttribute("tabindex","0");this.focus();c("#"+f).val(d).attr("data-handler-val",g).trigger("change",[b])}function Ha(a,b){var e=c(this),f=this.getAttribute("data-id");b=b||[];if(e.hasClass("readonly")&&!b[1])return!1;e.hasClass("checked")?(e.removeClass("checked"),e=c("input[name="+f+"]").val("off").attr("data-handler-val",
hash("off"))):(e.addClass("checked"),e=c("input[name="+f+"]").val("on").attr("data-handler-val",hash("on")));e.trigger("change",[b[0]])}function ra(b){b=b||m.event;if(!(b&&b.target&&c(b.target).hasClass("dashblock-reload"))){if(f.Global.HeaderMoving)f.Global.HeaderMoving=!1;else{var e=c(this),d=e.parent(),g=d.next(),h=d.parent(),q=h.attr("data-tabid"),k=d.attr("data-name"),l=d.attr("data-type"),s=d.find(".b-triangle");(d=h.hasClass("b-form-page_st_collapsed"))?(g.slideDown(300),h.removeClass("b-form-page_st_collapsed"),
s.attr("data-state","expanded")):(g.slideUp(300),s.attr("data-state","collapsed"),setTimeout(function(){h.addClass("b-form-page_st_collapsed");h=null},280));if("dashboard-block"!==l)a.trigger("saveFormPageState",{tabId:q,name:k,collapsed:d}),setTimeout(function(){a.trigger("updFormHeight",{tabId:q});a.trigger("updateScroll",{});q=null},300);else{setTimeout(function(){a.trigger("updateScroll",{})},300);var g=e.parents(".b-dashboard_cell").attr("data-pos"),k=d?"max":"min",r=e.parent().attr("data-name");
a.trigger("ajaxRequest",{url:X.url,param:{func:"dashboard.save",out:"xml",block:r,display:k,position:g},trfunc:"DoNothing",queue:"noqueue"});d?setTimeout(function(){a.trigger("updateScroll",{});a.trigger("upDashTableList",{tabId:"block-"+r});r=null},10):setTimeout(function(){a.trigger("updateScroll",{})},300)}}b.preventDefault()}}function sa(){var a=this.getAttribute("data-control-field"),b=ia(),a=f.Dom.byId(a+"-"+b),b=a.getAttribute("data-unlimit");null!==a&&(a.value=b,c(a).trigger("change"))}function Ia(a){a=
this.getAttribute("show").split(",");var b=a.length;for(this.getAttribute("checked");b--;)c("formItem"+a[b]).toggleClass("hideEl")}function ta(b){var e=this.value,f=this.getAttribute("name");this.getAttribute("data-type");var d=this.getAttribute("data-tabid");c("#frm-"+d+' div[data-depend="'+f+'"] .dependelem.b-myselect__select-li_show_yes').removeClass("b-myselect__select-li_show_yes");c("#frm-"+d+' div[data-depend="'+f+'"] .dependelem[data-dependkey="'+e+'"]').addClass("b-myselect__select-li_show_yes");
0===c("#frm-"+d+' div[data-depend="'+f+'"] .b-myselect__select-li_show_yes .b-radio__control.checked').length&&(c("#frm-"+d+' div[data-depend="'+f+'"] .b-radio__control').removeClass("checked"),(b=c("#frm-"+d+' div[data-depend="'+f+'"] .b-myselect__select-li_show_yes .b-radio__control')[0])&&aa.apply(b));var g=c("#frm-"+d+' div[data-depend="'+f+'"]');1<g.length?g.each(function(){var a=c(this).find('.dependelem[data-dependkey="'+e+'"].b-myselect__select-li_show_yes');ua(a,f,d,c(this))}):(b=c("#frm-"+
d+' div[data-depend="'+f+'"] li.dependelem[data-dependkey="'+e+'"].b-myselect__select-li_show_yes'),ua(b,f,d));g.length&&g.each(function(){Ja.hasClass(this,"b-mselect")&&a.trigger("mselectUnselectByDepend",{self:this})});a.trigger("updateScroll",{id:"form-scroll-"+d})}function ua(a,b,e,d){b=d||c("#frm-"+e+' div[data-depend="'+b+'"]');0===a.length?b.closest(".l-form__row").css("display","none"):b.closest(".l-form__row").css("display","")}function va(b,e){var d=e.tabId;c("#cont-"+d+' tr:not(".row-error") .depend.b-myselect input[type="hidden"], #cont-'+
d+' .depend.b-radio input[type="hidden"], #cont-'+d+' .depend.b-select-ac input[type="hidden"]').each(function(){ta.apply(this)});a.trigger("updFormHeight",{tabId:d});a.trigger("reloadSlider",{tabId:d})}function Ka(b){b=this.getAttribute("data-id");var e=c(this);e.hasClass("data-table-hidden")?(e.removeClass("data-table-hidden"),c("#"+b).slideDown(300)):(e.addClass("data-table-hidden"),c("#"+b).slideUp(300));setTimeout(function(){a.trigger("updateScroll",{})},350)}function wa(a,b){var e=b.tabId;setTimeout(function(){c("#cont-"+
e+" .i-input__prefix").each(function(){var a=this.offsetWidth,c=f.Common.getPreviousNode(this),b;c&&(b=c.offsetWidth,c.style.width=b-a-9+"px",c.style.paddingLeft=a+"px")})},1)}function La(a){if(a.target&&(a=c(a.target),a.hasClass("i-button")||"A"===a.prop("tagName")||a.hasClass("b-checkbox__control")))return;var b=c(this);a=b.find(".i-button_default_yes");b=b.find(".i-checkbox_type_default");1===a.length?a.trigger("click"):1===b.length&&b.trigger("click")}function Ma(b){var e=parseInt(this.style.height,
10),d=12*(this.getAttribute("data-max-rows")-0);this.getAttribute("id");var g=this.getAttribute("data-tabid");this.style.height="auto";b=this.scrollHeight-0;d<b&&c(this).removeClass("b-textarea_responsive_yes");this.style.height=b+"px";if(e!==b&&(a.trigger("updFormHeight",{tabId:g}),c(this).offset().top+b+62>m.innerHeight)){var d=c(this),e=d.closest(".l-form__row")[0]?d.closest(".l-form__row")[0].offsetTop:0,d=d.closest(".b-form-page"),h=f.Dom.byId("form-scroll-"+g),h=h?parseInt(h.style.height,10):
0;d[0]&&(e+=d[0].offsetTop);e-=h-(b+62+this.offsetTop);a.trigger("scrollTo",{id:"form-scroll-"+g,offsetTop:e,raw:!1})}}function Na(b){b=this.getAttribute("data-tabid");var e=c(this).closest(".l-form__row"),d=0;e[0]&&(d=e[0].offsetTop,a.trigger("scrollTo",{id:"form-scroll-"+b,offsetTop:d,animate:!0}))}function Oa(b){b=this.getAttribute("data-tabid");var e=c(this),d=e.closest(".l-form__row"),e=e.closest(".l-form__wrapper"),f=0,g=0,h=0;d[0]&&e[0]&&(f=d[0].offsetTop,g=d[0].offsetHeight,120>g||(h=e[0].offsetHeight,
a.trigger("scrollTo",{id:"form-scroll-"+b,offsetTop:f+g-h+160,animate:!0})))}function xa(b){b.preventDefault();b=c(this);var e=b.closest(".tab-content").attr("data-tabid");b.hasClass("mbar-showall")?(b.removeClass("mbar-showall").addClass("mbar-hideall"),b.closest(".b-ticket__table-row_is_collapsible").removeClass("b-ticket__table-row_is_collapsed")):(b.removeClass("mbar-hideall").addClass("mbar-showall"),b.closest(".b-ticket__table-row_is_collapsible").addClass("b-ticket__table-row_is_collapsed"));
a.trigger("updFormHeight",{tabId:e})}var Ja=f.Dom,ga={},X=m.pageInfo;e=h=t=p=l=b=void 0;var ma=1,ea="",na={0:"short",1:"weak",2:"good",3:"strong"},ya="\v"==="v",ja="default_value",Ea=38,Fa=40,ha=13,oa=32;return{init:function(){a.on(g(),".b-form-page__title","click",ra);a.on(g(),".b-input-btn_type_unlimit","click",sa);a.on(g(),".b-input-btn_type_zoom","click",za);a.on(g(),".b-textarea_for_zoom","change",da);a.on(g(),".b-textarea_for_zoom","keyup",fa);a.on(g(),".edit-field-form .b-textarea_for_zoom",
"keyup",da);a.on(g(),".b-input-btn_type_passwd","click",ka);a.on(g(),".b-input-btn_type_showpwd","click",Aa);a.on(g(),".b-input-btn_type_calendar","click",ca);a.on(g(),'input[type="checkbox"].onchange',"change",Ia);a.on(g(),".b-checkbox__control","click",Ha);a.on(g(),'.b-radio:not(".readonly") .b-radio__control',"click",aa);a.on(g(),".b-label__visible_for_radio, .b-radio-img__row","click",Ga);a.on(g(),'.b-radio:not(".readonly") .b-radio__control',"keydown",Da);a.on(g(),".band-content .band_show_button",
"click",Ka);a.on(g(),'.depend.b-myselect input[type="hidden"], .depend.b-select-ac input[type="hidden"], .depend.b-radio input[type="hidden"]',"change",ta);a.on(g(),'.setvalue input[type="hidden"], .b-select-ac_setvalues_yes input[type="hidden"], .setvalue input[type="text"], .setvalue input[type="password"], .setvalue .b-textarea',"change",T);a.on(g(),".i-button_type_setvalues","click",T);a.on(g(),".i-button_type_reset","click",B);a.on(g(),"div.userexperience","click",O);a.on(g(),".data-wrapper.nestedreport",
"click",S);a.on(g(),"input.fakePasswd","change",Ba);a.bind("forceSetValues",Y);a.bind("appendForm,appendReport,appendedFilter,forceDepend",va);a.bind("loadPage",G);a.bind("appendForm,appendReport,switchTabForm,setFocus",W);a.bind("appendForm",C);a.bind("formSetValues",Q);a.bind("syncInputToZoom",H);a.on(g(),".b-form-passwd-field, .b-form-passwd-field + input","change",N);a.on(g(),".l-form__wrapper .i-input-control, .filter-wrapper .i-input-control","keydown",L);a.on(g(),".l-form__wrapper .b-radio__control, .l-form__wrapper .b-textarea, .l-form__wrapper .b-myselect__select-value, .filter-wrapper .b-myselect__select-value, .l-form__wrapper .b-checkbox__control, .l-form__wrapper .b-mselect__view-value",
"keydown",x);a.on(g(),".b-form-passwd-field, .b-form-passwd-field + input","keyup",N);a.on(g(),"input[data-novalue], textarea[data-novalue]","change",K);a.on(g(),".i-button, .b-checkbox__control","keydown",Ca);a.on(g()," .l-form__row_type_checkbox .b-label__visible","click",qa);a.bind("gotPasswdList",I);a.on(g(),".tree-wrapper .tree-hitarea","click",D);a.on(g(),".b-tree_type_default .tree-handler","click",E);a.on(g(),".b-tree_type_multiple .tree-handler","click",A);a.on(g(),".tree-wrapper .tree-handler",
"dblclick",y);a.on(g(),".b-input-file-fake","click",u);a.on(g(),".b-input_type_file","change",z);a.on(g(),".b-resizer","mousedown",q);a.on(g(),".b-form-confirm-field, .b-form-passwd-field","keyup, change",R);a.on(g(),".b-quote","click",r);a.bind("closeTabEvent,appendForm,appendFilter,appendReport",k);a.bind("appendForm",wa);a.bind("upPrefixField",wa);a.on(g(),".b-form-list__row, .b-form-blocks__block","click",La);a.bind("focusOnErrorField",V);a.on(g(),".b-textarea_responsive_yes","keyup",Ma);a.bind("appendForm",
s);a.on(g(),".i-ticket__btn-move_up","click",Na);a.on(g(),".i-ticket__btn-move_down","click",Oa);a.on(g(),".i-ticket__btn-collapse","click",xa)},checkPassStrength:P,CACHE:ga}}(window,$,EventMgr,App,ScrollHandler);"use strict";
App.MultiSelect=function(m,c,a,f){var n=f.Dom,b=function(b){var e=this.getAttribute("data-id"),d=n.byId(e+"-ms-list-wrapper"),f,g,h;b.target&&b.target.className.match("scrlbr")||!d||(0===d.offsetWidth?(c("body").trigger("click"),f=m.document.body.offsetHeight,n.removeClass(d,"closed"),g=d.offsetHeight,d.style.top="",h=c(d).offset().top,f-h<g&&(f=d.getAttribute("data-tabid"),f=c("#form-scroll-"+f),f=f.offset().top,f>h-g-n.byId(e+"-ms-view").offsetHeight?d.style.top="-"+g/2+"px":d.style.top="-"+g+"px"),
c("body").on("click",l),b.stopPropagation(),a.trigger("updateScroll",{id:e+"-ms-list"})):(n.addClass(d,"closed"),a.off("body","click"),c("body").off("click",l)))},l=function E(a){if(a.target){if(n.hasClass(a.target,"b-mselect__item")||n.hasClass(a.target,"scrlbr"))return;p()}c("body").off("click",E);a.stopPropagation()},p=function(a){("string"===typeof a?c("#"+a+"-ms-list-wrapper"):c(".b-mselect__options")).addClass("closed");("string"===typeof a?c("#"+a+"-ms-list-ul").find(".b-mselect__item_st_selected"):
c(".b-mselect__item_st_selected")).removeClass("b-mselect__item_st_selected")},t=function(a,b){var e,h=this.cloneNode(!0),q=this.parentNode.getAttribute("data-id"),k=f.Dom.byId(q+"-ms-view"),l=k.getAttribute("data-maxselect");e=c("#"+q+"-ms-list-ul");var s=e.find(".chosen").length;e=e.find(".b-mselect__item").length-1===s;var r=b?b.preventChange?!0:!1:!1,l=""===l?9999:parseInt(l,10);if(s!==l)if(n.hasClass(this,"b-mselect__item_select-all"))if(e)g(q);else{h=c("#"+q+"-ms-list-ul .b-mselect__item");
k=h.length;s=f.Dom.byId(q+"-ms-view");e=s.getAttribute("data-maxselect");r=c("#"+q+"-ms-list-ul li.chosen").length;e=""===e?9999:parseInt(e,10);for(var p=0;p<k&&r!==e;p++)n.hasClass(h[p],"dependelem")&&!n.hasClass(h[p],"b-myselect__select-li_show_yes")||n.hasClass(h[p],"b-mselect__item_select-all")||n.hasClass(h[p],"chosen")||(l=h[p].cloneNode(!0),l.setAttribute("data-s-id",l.id),l.id="",n.addClass(h[p],"chosen"),n.addClass(l,"chosen"),s.appendChild(l),r++);d(q)}else n.hasClass(this,"chosen")?(n.removeClass(this,
"chosen"),c('.b-mselect__item[data-s-id="'+h.id+'"] .b-mselect__unselect').trigger("click")):(h.setAttribute("data-s-id",h.id),h.id="",k&&(n.addClass(this,"chosen"),n.addClass(h,"chosen"),k.appendChild(h),d(q,r)))},h=function(a){var c=this.parentNode,b=c.getAttribute("data-s-id"),b=n.byId(b),e=b.parentNode.getAttribute("data-id");c.parentNode.removeChild(c);n.removeClass(b,"chosen");d(e);a.stopPropagation()},e=function(a){var c=this.getAttribute("data-id");g(c);a.preventDefault()},k=function(a,c){g(c.id)},
g=function(a){c("#"+a+"-ms-view .b-mselect__item.chosen").remove();c("#"+a+"-ms-list-ul .chosen").removeClass("chosen");d(a)},d=function(b,e){var d=n.byId(b+"-ms-view"),f=d.children,g=f.length,h="",q=n.byId(b+"-ms-value"),k=n.byId(b+"-ms"),l=c(k).find(".b-mselect__view-value").attr("id"),s=d.getAttribute("data-tabId");if(1!==g)for(;g--;)if(d=f[g].getAttribute("data-val"),h+=d,1!==g)h+=",";else break;else h="";q.value=h;""===h?n.removeClass(k,"selected"):n.addClass(k,"selected");e||c(q).trigger("change");
a.trigger("updateScroll",{id:"form-scroll-"+s});a.trigger("updateScroll",{id:l})},s=function(a,b){var e=b.id,d=b.sElems.slist,f=void 0!==b.sElems.value?b.sElems.value:b.sElems,g=f.length,h=c("#"+e+"-ms-view").attr("data-maxselect"),h=""===h?9999:parseInt(h,10);d&&c("#"+e+"-ms-list-ul").html(u(d,e));c("#"+e+"-ms").removeClass("selected");c("#"+e+"-ms-list-ul li.chosen").removeClass("chosen");c("#"+e+"-ms-view li.chosen").remove();if("string"===typeof f&&""!==f)c("#"+e+'-ms-list-ul li[data-val="'+f+
'"]').trigger("click");else for(h<g&&(g=h),d=0;d<g;d++)d===g-1?c("#"+e+'-ms-list-ul li[data-val="'+f[d]+'"]').trigger("click",{preventChange:!1}):c("#"+e+'-ms-list-ul li[data-val="'+f[d]+'"]').trigger("click",{preventChange:!0})},r=function(a,b){c(b.self).find('.b-mselect__ul-view .dependelem:not(".b-myselect__select-li_show_yes") .b-mselect__unselect').each(function(){c(this).trigger("click")})},u=function(a,c){var b,e=a.length;b=""+('<li class="b-mselect__item b-mselect__item_select-all">'+pageInfo.messages.msg_select_all+
"</li>");for(var d=0;d<e;d++)b+='<li class="b-mselect__item" data-val="'+a[d].key+'" unselectable="on" data-handler-val="'+hash(a[d].key)+'"  data-dependkey="'+a[d].depend+'" id="'+c+"-"+d+'">'+a[d].value+'<span class="b-mselect__unselect"></span></li>';return b},z=function(a){var c=a.which||a.keyCode,e=a.metaKey||a.ctrlKey,d=n.hasClass(n.byId(this.getAttribute("data-id")+"-ms-list-wrapper"),"closed");38!==c||d?40!==c||d?9!==c||d?13!==c&&32!==c||e?27!==c||d||(a.stopPropagation(),p()):d?b.apply(this,
[a]):w.apply(this,[a]):p():v.apply(this,[]):q.apply(this,[])},q=function(){var a=this.getAttribute("data-id"),a=c("#"+a+"-ms-list-ul"),b=a.find(".b-mselect__item_st_selected"),e=!0,d=b;if(0<b.length){for(;e;)d=d.prev(),0<d.length?e=d.hasClass("chosen"):(d=null,e=!1);d&&(b.removeClass("b-mselect__item_st_selected"),d.addClass("b-mselect__item_st_selected"))}else b=a.find('.b-mselect__item:first:not(".chosen")'),b.addClass("b-mselect__item_st_selected")},v=function(){var a=this.getAttribute("data-id"),
a=c("#"+a+"-ms-list-ul"),b=a.find(".b-mselect__item_st_selected"),e=b,d=!0;if(0<b.length){for(;d;)e=e.next(),0<e.length?d=e.hasClass("chosen"):(e=null,d=!1);e&&(b.removeClass("b-mselect__item_st_selected"),e.addClass("b-mselect__item_st_selected"))}else{a:{b=!0;for(a=a.find(".b-mselect__item:first");b;)if(0<a.length)if(a.hasClass("chosen"))a=a.next(),b=!0;else{b=a;break a}else{b=!1;break a}b=void 0}b&&b.addClass("b-mselect__item_st_selected")}},w=function(a){a=this.getAttribute("data-id");var b=c("#"+
a+"-ms-list-ul").find(".b-mselect__item_st_selected");0<b.length?b.trigger("click"):p(a)},y=function(){f.Dom.hasClass(this,"overwidth")||f.Dom.hasClass(this,"notoverwidth")||(this.scrollWidth>this.offsetWidth?(f.Dom.addClass(this,"overwidth"),c(this).trigger("mouseover")):f.Dom.addClass(this,"notoverwidth"))};return{init:function(){a.on("#main-wrapper",".mselect-av .b-mselect__view-value","click",b);a.on("#main-wrapper",".mselect-av .b-mselect__ul-choose li","click",t);a.on("#main-wrapper",".mselect-av .b-mselect__ul-view .b-mselect__unselect",
"click",h);a.on("#main-wrapper",".mselect-av .b-mselect__item_select-all","dblclick",e);a.on("#main-wrapper",".mselect-av .b-mselect__ul-view .b-mselect__item","mouseover",y);a.on("#main-wrapper",".mselect-av .b-mselect__view-value","keydown",z);a.bind("selectValues",s);a.bind("multiSelectUnselect",k);a.bind("mselectUnselectByDepend",r)}}}(window,$,EventMgr,App);"use strict";
App.Select=function(m,c,a,f){function n(){return c(".tab-content_st_active").attr("data-tabid")||!1}function b(){return f.Common.selectorCache(".i-form-wr")}function l(a){if(a)c("body").on("click",t);else c("body").off("click",t)}function p(a,c){a||(a=n());G[a]&&G[a].removeClass&&(G[a].addClass("b-myselect_st_close").removeClass("b-myselect_st_open"),l())}function t(a){if(a){var c=a.srcElement?a.srcElement.className:a.target?a.target.className:"";a=c.indexOf("scrlbr");c=c.indexOf("highlight");-1===
a&&-1===c&&p()}else a.stopPropagation()}function h(b){b.preventDefault();b.stopPropagation();var e=this.getAttribute("data-id"),d;d=e?c("#"+e+".b-myselect"):c(".b-myselect");var g,h=n(),q;d.hasClass("b-myselect_st_open")?(d.removeClass("b-myselect_st_open").addClass("b-myselect_st_close"),delete G[h],l(!1),this.childNodes[1].focus(),m.scrollToTopLeft()):(c("body").trigger("click"),p(h),d.removeClass("b-myselect_st_close").addClass("b-myselect_st_open"),f.Common.setOptionListPosition("#opt",e),e=d.find(".b-myselect__select-list").attr("id"),
a.trigger("updateScroll",{id:e}),l(!0),this.parentNode.className.match("sb-select")&&(g=f.Dom.byId("sb-"+e))&&(b&&b.originalEvent&&b.originalEvent.key&&(q=b.originalEvent.key,1<q.length&&(q=null)),g.value=q||"",setTimeout(function(){s.apply(g,[{codeKey:"ololo"}])},1),g.focus(),q&&(g.setSelectionRange?g.setSelectionRange(1,1):(b=g.createTextRange(),b.collapse(!0),b.select(1,1))),m.scrollToTopLeft()),G[h]=d)}function e(b,e,d){var f=c(this),g=this.getAttribute("data-val"),h=this.getAttribute("data-handler-val"),
q=f.html(),k=f.parent().attr("data-id"),l=c("#"+k+" .b-myselect__select-value");if(!f.hasClass("group")){var s=c("input#"+k+"-val");s.val()!==g&&s.val(g).attr("data-handler-val",h).trigger("change",[e,d]);f.hasClass("b-myselect__select-li_clone_true")?b||(f.addClass("selected").siblings().removeClass("selected"),f.trigger("customclick"),q=f.siblings(".selected").find(".b-myselect__option-value").html()):f.addClass("selected").siblings().removeClass("selected");l.html(q);!1!==d&&(c("body").trigger("click"),
b&&!b.isTrigger&&(l.focus(),m.scrollToTopLeft()));a.trigger("selectChange",{id:k})}}function k(a){n();a=this.getAttribute("data-id");var b,d=c("#"+a+" li.selected"),f=d.next(),g=!0,h=d.parent()[0].offsetWidth?!1:!0;if(!d[0].offsetWidth&&!h&&(d=c("#"+a+' li[style$="display: block;"]'),b=d.length,0<b)){e.apply(d[0],[!1,!1,!1]);return}for(;g;){if(0===f.length)return;f[0].offsetWidth&&!h?g=!1:h&&f[0].className.match("b-myselect__select-li_show_yes")?g=!1:f=f.next()}e.apply(f[0],[!1,!1,!1]);ScrollHandler.forceMoveSelectItem("cont-"+
a,f[0].offsetTop)}function g(){n();var a=this.getAttribute("data-id"),b,d=c("#"+a+" li.selected"),f=d.prev(),g=!0,h=d.parent()[0].offsetWidth?!1:!0;if(!d[0].offsetWidth&&!h&&(d=c("#"+a+' li[style$="display: block;"]'),b=d.length,0<b)){e.apply(d[b-1],[!1,!1,!1]);return}for(;g;){if(0===f.length)return;f[0].offsetWidth&&!h?g=!1:h&&f[0].className.match("b-myselect__select-li_show_yes")?g=!1:f=f.prev()}e.apply(f[0],[!1,!1,!1]);ScrollHandler.forceMoveSelectItem("cont-"+a,f[0].offsetTop)}function d(a){var b=
a.which||a.keyCode,e=this.getAttribute("data-tabid"),e=!!G[e];b!==B&&b!==x||a.ctrlKey||"text"===this.type?b!==B||a.ctrlKey||"text"!==this.type?b!==K&&b!==L||!e?b!==E&&b!==A||e||a.ctrlKey||"text"===this.type?b!==F&&b!==C||e||a.ctrlKey||"text"===this.type?b===F&&e&&!a.ctrlKey?(a.preventDefault(),k.apply(this,[a])):b===E&&e&&!a.ctrlKey?(a.preventDefault(),g.apply(this,[a])):"text"!==this.type&&32<b&&h.apply(this,[a]):(a.preventDefault(),k.apply(this,[a])):(a.preventDefault(),g.apply(this,[a])):(a.stopPropagation(),
p(!1,!0)):(b=this.getAttribute("data-id"),b=c("#"+b),0!==b.length&&(e=b.find("li.selected:visible"),0!==e.length?e.trigger("click"):(e=b.find("li:visible:first"),0!==e.length?e.trigger("click"):c("body").trigger("click")),b=c("#"+b.attr("data-id")+" .b-myselect__select-value"),b.focus(),m.scrollToTopLeft()),a.preventDefault()):(a.preventDefault(),h.apply(this,[a]))}function s(b){b=b||m.event;b=b.which||b.keyCode;if(b!==E&&b!==F&&K!==b){var e,d,g,h,k,l,s,n,p,v,t;e=this.value.toLowerCase();e=f.u.escapeRegExp(e);
b=this.getAttribute("data-id");if(d=f.Dom.byId(b)){k=c(d);n=String(d.getAttribute("data-id"));g=d.children;h=g.length;p=this.getAttribute("data-tabId");M[p]||(M[p]={});if(M[p][b])v=M[p][b],h=v.length;else for(g=d.children,v=[],l=g.length;l--;)t=g[l].cloneNode(!0),t.className+=" b-myselect__select-li_clone_true",s=c(t).find(".b-myselect__option-value"),s=v.push({node:g[l],clone:t,innerNode:s,inner:s.html(),bindClick:function(){var a=c(this.clone);a.bind("click",c.proxy(function(a){this.returnDefValue();
var b=c(this.node);b.addClass("selected").siblings().removeClass("selected");a&&0===(a.srcElement?a.srcElement.className:a.target?a.target.className:"").indexOf("highlight")&&b.trigger("click")},this));a.bind("customclick",c.proxy(function(){c(this.node).addClass("selected")},this))},returnDefValue:function(){this.isMatched&&this.innerNode.html(this.inner);this.isMatched=!1}}),v[s-1].bindClick(),M[p][b]=v;if(""===e)k.removeClass("b-myselect__select-ul_searching_true"),q(J[b]),u(d,b),a.trigger("updateScroll",
{id:"cont-"+b});else{k.addClass("b-myselect__select-ul_searching_true");g=RegExp(e);var y="";for(J[b]=[];h--;){p=v[h];p.returnDefValue();k=p.inner;k=k.split(" ");l=k.length;for(s=!1;l--;)if(y=k[l].toLocaleLowerCase(),t=y.match(g))v[h].isMatched=!0,v[h].searchIndex=y.indexOf(t[0])+Math.pow(10,l),s=!0,k[l]=k[l].replace(e?RegExp("("+e+")","i"):!1,'<span class="highlight">$1</span>'),J[b].push(v[h]);s?(z(p),p.innerNode.html(k.join(" "))):q(p)}if(0<J[b].length)for(e=J[b],e.sort(r),d=c(d),h=e.length;h--;)d.prepend(e[h].clone);
a.trigger("updateScroll",{id:"cont-"+b});ScrollHandler.scrollTo("cont-"+b,0);f.Common.setOptionListPosition("#opt",n)}}}}function r(a,b){return b.searchIndex===a.searchIndex?0:b.searchIndex<a.searchIndex?1:-1}function u(a,b){var e,d;d=c(a).find('.selected:not(".b-myselect__select-li_clone_true")');d.length&&(e=d[0].offsetTop,setTimeout(function(){ScrollHandler.scrollTo("cont-"+b,e)},1))}function z(a){if(a){var b=a.length;if(b)for(;b--;)a[b].clone.className.match("b-myselect__select-li_show_yes")?
a[b].clone.style.display="block":a[b].clone.style.display="none";else a.clone&&(a.clone.className.match("b-myselect__select-li_show_yes")?a.clone.style.display="block":a.clone.style.display="none")}}function q(a){if(a){var b=a.length;if(b)for(;b--;)a[b].clone.style.display="none";else a.clone&&(a.clone.style.display="none")}}function v(b,e){var d=e.tabId;c("#cont-"+d+' tr:not(".row-error") .depend.b-myselect input[type="hidden"], #cont-'+d+' .depend.b-radio input[type="hidden"], #cont-'+d+' .depend.b-select-ac input[type="hidden"]').each(function(){w.apply(this)});
a.trigger("updFormHeight",{tabId:d})}function w(){var b=this.value,e=this.getAttribute("name");this.getAttribute("data-type");var d=this.getAttribute("data-tabid"),f,e=c("#frm-"+d+' div[data-depend="'+e+'"]');1<e.length?e.each(function(){var a=c(this);f=a.find('li.dependelem[data-dependkey="'+b+'"].selected.b-myselect__select-li_show_yes');y(f,a)}):(f=e.find('li.dependelem[data-dependkey="'+b+'"].selected.b-myselect__select-li_show_yes'),y(f,e));a.trigger("updateScroll",{id:"form-scroll-"+d})}function y(a,
b){if(0===a.length){var d=b.attr("id"),d=c("#"+d+"-val").val();b.find("li").removeClass("selected");(d=b.find('li.b-myselect__select-li_show_yes[data-val="'+d+'"]')[0]||b.find("li.b-myselect__select-li_show_yes")[0])&&e.apply(d)}}function D(a,b){var c=b.id,e=b.tabId;M&&M[e]&&M[e][c]&&delete M[e][c]}var E=38,F=40,A=37,C=39,B=13,K=9,L=27,x=32,M={},G={},J={};return{init:function(){a.on(b(),'.b-myselect:not(".readonly") .b-myselect__select-selected',"click",h);a.on(b(),'.b-myselect:not(".readonly") .b-myselect__select-selected, .b-myselect:not(".readonly") .sb-input',
"keydown",d);a.on(b(),'.b-myselect:not(".readonly") .b-myselect__select-li',"click",e);a.on(b(),".sb-input","keyup",s);a.on(b(),'.depend.b-myselect input[type="hidden"], .depend.b-select-ac input[type="hidden"], .depend.b-radio input[type="hidden"]',"change",w);a.bind("appendForm,appendReport,appendedFilter,forceDepend",v);a.bind("cleanSlistCache",D)}}}(window,$,EventMgr,App);"use strict";
App.Bands=function(m,c,a,f){function n(a){a=this.getAttribute("data-child-id");var l=c("#"+a).offset().top;a=c(".tab-content_st_active").attr("data-tabid");var n=c("#form-scroll-"+a).offset().top,m=f.Dom.byId("form-scroll-"+a);null!==m&&(l=m.scrollTop+(l-n),ScrollHandler.scrollTo("form-scroll-"+a,l,!1,!0))}return{init:function(){a.on(c("#content"),"span[data-child-id]","click",n)}}}(window,$,EventMgr,App);"use strict";
App.ChangeBrandColors=function(m,c,a,f){var n=function(a,b){var n=b.tabId,h=c("#"+n+"-h").val(),e=c("#"+n+"-s").val(),k=c("#"+n+"-l").val(),g={};g[n+"-color1"]="587B9D";g[n+"-color2"]="78A5DF";g[n+"-color3"]="E1E7ED";g[n+"-color4"]="879CB5";g[n+"-color5"]="537393";g[n+"-color6"]="6086ab";g[n+"-color7"]="dae2ec";for(var d in g)if(n=f.Dom.byId(d)){var n=n.style,s=g[d],r=h,m=e,z=k,q=parseInt(s.substr(0,2),16),v=parseInt(s.substr(2,2),16),s=parseInt(s.substr(4,2),16),m=m/100,z=z/100,w=0>m?1+m:1+2*m,r=
r%360/360,y=6*r,D=255*z,E=1+z,F=1-z;if(0!==r||0!==m){var m=q,A=r=r=void 0;v>m&&(m=v);s>m&&(m=s);A=q;v<A&&(A=v);s<A&&(A=s);var C=m-A,B=(A+m)/510;0<B&&0<C&&(0.5>=B?(r=C/(m+A)*w,1<r&&(r=1),r=B*(1+r)):(r=C/(510-m-A)*w,1<r&&(r=1),r=B+r-B*r),A=q===m?v===A?5+(m-s)/C+y:1-(m-v)/C+y:v===m?s===A?1+(m-q)/C+y:3-(m-s)/C+y:q===A?3+(m-v)/C+y:5-(m-q)/C+y,0>A&&(A+=6),6<=A&&(A-=6),w=B+B-r,y=A>>0,0===y?(q=255*r,v=255*(w+(r-w)*(A-y)),s=255*w):1===y?(q=255*(r-(r-w)*(A-y)),v=255*r,s=255*w):2===y?(q=255*w,v=255*r,s=255*
(w+(r-w)*(A-y))):3===y?(q=255*w,v=255*(r-(r-w)*(A-y)),s=255*r):4===y?(q=255*(w+(r-w)*(A-y)),v=255*w,s=255*r):5===y&&(q=255*r,v=255*w,s=255*(r-(r-w)*(A-y))))}0>z?(q*=E,v*=E,s*=E):0<z&&(q=q*F+D,v=v*F+D,s=s*F+D);q=0>q?0:255<q?255:Math.round(q);v=0>v?0:255<v?255:Math.round(v);s=0>s?0:255<s?255:Math.round(s);z=q.toString(16);1===z.length&&(z="0"+z);v=v.toString(16);1===v.length&&(v="0"+v);s=s.toString(16);1===s.length&&(s="0"+s);n.backgroundColor="#"+(z+v+s)}},b=function(b,c){a.trigger("changeSliderValue",
{tabId:c.tabId})};return{init:function(){a.bind("changeSliderValue",n);a.bind("appendForm",b)}}}(window,$,EventMgr,App);"use strict";
App.Cookie=function(){var m=function(){var a=getCookie("menupane"),b=getCookie("mbar"),c=getCookie("menupos");EventMgr.trigger("readCookie",{menupane:a,mbar:b,menupos:c})},c=function(a,b){var c=RegExp(pageInfo.product+"-"+pageInfo.level+"-(all|popular|favorite)"),f=pageInfo.product+"-"+pageInfo.level+"-"+b,m=getCookie("mbar"),f=m.match(c)?m.replace(c,f):m+":"+f;setCookie("mbar",f,600)},a=function(a,b){var c=b.groups,f,m=getCookie("menupane"),h,e,m=m.replace(/:+/g,":");for(e in c)h=RegExp(c[e].level+
"_"+c[e].id+"-[01]"),f=c[e].level+"_"+c[e].id+"-"+c[e].status,m=m.match(h)?m.replace(h,f):""!==m?m+(":"+f):m+f;setCookie("menupane",m,600)},f=function(a,b){var c=RegExp(pageInfo.product+"-"+pageInfo.level+"-(open|closed)"),f=pageInfo.product+"-"+pageInfo.level+"-"+b.menupos,m=getCookie("menupos"),f=m.match(c)?m.replace(c,f):m+":"+f;setCookie("menupos",f,600)};return{init:function(){EventMgr.bind("menuTypeChanged",c);EventMgr.bind("groupChanged",a);EventMgr.bind("loadPage",m);EventMgr.bind("menuPositionChanged",
f)}}}();"use strict";
App.DashboardDragAndDrop=function(m,c,a,f){function n(){return c("#dash-right")}function b(a){a=a||m.event;h();void 0!==e.shadow&&e.shadow.remove();var b=c(this).parent();e.obj=b.parent();document.onmouseup=p;document.captureEvents&&document.captureEvents(Event.MOUSEUP);document.onmousemove=l;document.captureEvents&&document.captureEvents(Event.MOUSEMOVE);document.ontouchend=p;document.ontouchmove=l;a.touches?(e.y=a.touches[0].pageY,e.x=a.touches[0].pageX):(e.y=a.clientY,e.x=a.clientX);var d=e.obj[0].offsetWidth,
f=e.obj[0].offsetHeight,b=b.find(".i-form-page__title").width(),g=this.offsetHeight,b=c('<div class="dash-block-bg" style="width: '+d+"px; height: "+f+'px;"><div class="dash-block-bg-header" style="width: '+b+"px; height: "+g+'px;"></div><div class="dash-block-bg-body" style=" height: '+(f-g)+'px;"></div></div>');e.obj.hasClass("b-form-page_st_collapsed")&&b.addClass("b-form-page_st_collapsed");e.obj.after(b);e.shadow=b;e.name=e.obj[0].getAttribute("data-tabid");a:{b=k.length;for(g=0;g<b;g++)if(k[g].name===
e.name){s=g;break a}s=void 0}b=this.parentNode.parentNode.offsetTop;e.obj[0].style.left=this.parentNode.parentNode.offsetLeft+"px";e.obj[0].style.top=b+"px";e.obj[0].style.width=d+"px";e.obj[0].style.height=f+"px";e.obj[0].style.position="absolute";e.obj.addClass("movingBlock");a.preventDefault&&a.preventDefault();blockEvent(a)}function l(a){if(0===u-0)u=(new Date).getTime();else{var b=(new Date).getTime();if(50>b-u)return;u=b}a=a||m.event;var h=b=null;void 0!==a.touches?(h=a.touches[0].pageY,b=a.touches[0].pageX):
(h=a.clientY,b=a.clientX);var s=b-e.x,l=h-e.y;if(!(10>Math.abs(s)&&10>Math.abs(l))){d=null;e.x=b;e.y=h;var p=parseInt(e.obj[0].style.top,10),t=parseInt(e.obj[0].style.left,10);e.obj[0].style.left=t+s+"px";e.obj[0].style.top=p+l+"px";s=k.length;for(l=0;l<s;l++)if(k[l].x1<=b&&k[l].x2>=b&&k[l].y1<=h&&k[l].y2>=h){d=l;r=!1;break}else if(k[l].x1<=b&&k[l].x2>=b&&k[l].y1<=h&&k[l].y2+37>=h){d=l;r=!0;break}else c("#content").offset().top>=h&&0===g.top?d="TOP":n().offset().left<=b&&n().offset().top<=h?d="RIGHT":
n().offset().left>=b&&n().offset().top<=h&&(d="LEFT");if(null!==d){b=f.Dom.byId("content");if(null===b)return;"TOP"===d?(c("#dash-top").append(e.shadow),e.shadow[0].style.width=b.offsetWidth-36+"px"):"LEFT"===d?(c("#dash-left").append(e.shadow),e.shadow[0].style.width=(b.offsetWidth-36)/2+"px"):"RIGHT"===d?(n().append(e.shadow),e.shadow[0].style.width=(b.offsetWidth-36)/2+"px"):(e.shadow[0].style.width=k[d].width+"px",r?k[d].self.after(e.shadow):k[d].self.before(e.shadow))}a.preventDefault&&a.preventDefault();
f.Global.HeaderMoving=!0;blockEvent(a)}}function p(b){var f=!1;b=b||m.event;document.onmousemove=null;document.onmouseup=null;document.ontouchmove=null;document.ontouchend=null;e.obj.css("left","").css("top","").css("position","").width("").height("").removeClass("movingBlock");null!==d&&("TOP"===d?(c("#dash-top").append(e.obj),e.order=9):"LEFT"===d?(c("#dash-left").append(e.obj),e.order=9):"RIGHT"===d?(n().append(e.obj),e.order=9):e.name!==k[d].name&&(f=!0,r?k[d].self.after(e.obj):k[d].self.before(e.obj),
e.order=k[d].order),f?d!==s&&(!r||void 0!==k[s+1]&&k[s].pos===k[d].pos&&k[d].order===k[s].order+1||(e.order+=1),t(e)):t(e),setTimeout(function(){a.trigger("updateScroll",{})},100));b.preventDefault&&b.preventDefault();e.shadow.remove();d=null;"report"===e.obj.children("h3").attr("data-block-type")&&e.obj.find(".dashblock-reload").trigger("click")}function t(b){var c=b.obj.parents(".b-dashboard_cell").attr("data-pos"),e=b.order,d="max",f=b.name;b.shadow.hasClass("collapsed")&&(d="min");a.trigger("ajaxRequest",
{url:pageInfo.url,param:{func:"dashboard.save",order:e,block:f,display:d,position:c},trfunc:"DoNothing",queue:"noqueue"})}function h(){k=[];var a=0,b=0,e=0,d,f,h;c("#dash-top .b-form-page").each(function(){d=c(this);f=d.offset();h={x1:f.left,x2:f.left+d.width(),y1:f.top,y2:f.top+d.height(),width:d.width(),self:d,name:d.attr("data-tabid"),order:e++,pos:"TOP"};k.push(h)});c("#dash-left .b-form-page").each(function(){d=c(this);f=d.offset();h={x1:f.left,x2:f.left+d.width(),y1:f.top,y2:f.top+d.height(),
width:d.width(),self:d,name:d.attr("data-tabid"),order:a++,pos:"LEFT"};k.push(h)});c("#dash-right .b-form-page").each(function(){d=c(this);f=d.offset();h={x1:f.left,x2:f.left+d.width(),y1:f.top,y2:f.top+d.height(),width:d.width(),self:d,name:d.attr("data-tabid"),order:b++,pos:"RIGHT"};k.push(h)});h=f=d=null;g={top:e,left:a,right:b}}var e={},k=[],g={},d=null,s=null,r=!1,u=0;return{init:function(){a.on(c("#content"),".b-form-page_view_dblock .i-form-page__title","mousedown",b);a.on(c("#content"),".b-form-page_view_dblock .i-form-page__title",
"ontouchstart",b)},bPositions:k}}(window,$,EventMgr,App);"use strict";
App.Deview=function(){var m=0,c=function(){return $(".i-warning-banner__msg")},a=function(){return $(".i-warning-banner__inner")},f=function(b,f){clearTimeout(n);c().animate({opacity:"0.25",marginTop:"-50"});a().removeClass("i-warning-banner_has_action b-warning-banner_has_action b-menu-item newtab").attr("data-url","")},n=null,b=function(b,f){m++;var e=f.msg,k=f.timeout||9E3,g=f.func||!1,d=f.theme||!1;a().html(e);g&&a().addClass("i-warning-banner_has_action b-warning-banner_has_action b-menu-item newtab").attr("data-url","?func="+
g);d&&a().addClass("b-warning-banner_has_action b-warning-banner_was_link").attr("href","?theme="+d);c().animate({opacity:"1",marginTop:"0"});clearTimeout(n);n=setTimeout(function(){c().animate({opacity:"0.25",marginTop:"-50"})},k)},l=function(a){f()},p=function(){var a='<div id="deviewer"><div class="msg i-warning-banner__msg" style="margin-top: -50px;"><a class="msginner i-warning-banner__inner"></a><img src="'+pageInfo.theme+'img/tab_close.png" class="msgclose i-warning-banner__close"/></div></div>';
$("#wrapper").append(a);pageInfo&&pageInfo.warning_notify&&EventMgr.trigger("pullMsg",pageInfo.warning_notify)};return{init:function(){EventMgr.bind("pullMsg",b);EventMgr.bind("loadPage",p);EventMgr.on("body",".i-warning-banner__close","click",f);EventMgr.on("body",".i-warning-banner_has_action","click",l)}}}();"use strict";
App.EditInList=function(m,c,a,f,n){var b=function(){return f.Dom.byId("edit-filed-in-list")},l=null,p=null,t=0,h=function(a){a=c(this);var e=a.offset(),d=e.left,e=e.top,f=this.offsetWidth,g=b();"active"!==g.className&&(p=a,t=d+f-22,g.style.left=t+"px",g.style.top=e+"px",g.style.display="block")},e=function(){b().style.display="block"},k=function(){var a=b();"active"!==a.className&&(a.style.display="none")},g={},d={},s={},r=function(a){var b=c("#lt-"+a+" thead th");s[a]={};b.each(function(b){this.getAttribute("data-edit-func")?
s[a][b]=!0:s[a][b]=!1})},u=function(){l=p;var e=p.parents(".tab-content"),f=e.attr("data-func"),h=p.parents("td").index(),k=p.parents("table").find("th")[h],s=k.getAttribute("data-colname"),q=k.className.match("keyfield"),r=e.attr("data-tabid"),n=p.parents("tr"),m=n.attr("data-elid"),u=n.attr("data-index"),t=filterXSS.friendlyAttrValue(c("#cont-"+e.attr("data-tabid")+" .toolbar").attr("data-plid")||""),k=k.getAttribute("data-edit-func"),f={tabId:r,funcName:f,colName:s,elid:m,plid:t,funcEdit:k,parentTr:n,
index:h,rowIndex:u};q&&(e=e.find(".toolbar").attr("data-convert"),f.tconvert=e);b().className="active";d[r]||(g[r]?v(f):(r=pageInfo.url,e={func:f.funcEdit,scolname:f.colName,stablename:f.funcName,stylesheet:"editinlist",elid:f.elid},f.tconvert&&(e.tconvert=f.tconvert),f.plid&&(e.plid=f.plid),a.trigger("ajaxRequest",{url:r,param:e,invar:{id:f.tabId,curObj:f},type:"get",outtype:"json",trfunc:"ajaxResponseEditInList",failfunc:"failLoadForm",queue:"noqueue"}),d[f.tabId]=!0))},z=function(c,e){a.trigger("pullMsg",
{msg:"Request failed. Try again."});b().className=""},q=function(a,b){var e=b.id,f=b.curObj,h=c('<div id="editinlist-wrapper-'+e+'" class="edit-field-form"><div class="edit-field-form-loader"><img src="'+pageInfo.theme+'img/loader.gif"/></div></div>');d[f.tabId]=!1;g[e]=b;g[e].eFwrapper=h;g[e].eFwrapper.removeClass("active");g[e].eFoverlay=c("#"+e+"-progressbar-overlay");v(f);c(".i-report-wr").append(h)},v=function(e){if(g[e.tabId][e.colName]){var d=e.tabId,f=g[d][e.colName].type,h=g[d][e.colName],
k=l.hasClass("b-list__table-col-content")?l.text():l.find(".b-list__table-col-content").text(),s=l.offset(),q=s.top,r=s.left,m=g[d].eFwrapper,s=g[d].eFoverlay,p="",u,k=k.replace(/"/g,"&quot;");b().className="";g[d].eFsend=!1;g[d].curObj=e;g[d].eFvalue=k;g[d].editingField=l;if("text"===f)h.attr=h.sourceAttr,h.value=k,h.setvalue="",h.attr+=' value="'+k+'"';else if("select"===f||"radio"===f)if(""===k)h.value="",h.msg=h.slist[0].value;else{for(u=h.slist.length;u--;)h.slist[u].value===k&&(h.value=h.slist[u].key,
g[d].eFvalue=h.value,u=0);h.msg=k}else"checkbox"===f&&(h.cbclass="on"===k?"checked":""),h.value=k;h.id=d;if("text"===f)h.unlimit?p+='<div class="b-input-btn b-input-btn_type_unlimit"  data-control-field="'+h.name+'"></div>':h.date&&(p+='<div class="b-input-btn b-input-btn_type_calendar"  data-control-field="'+h.name+'"></div>'),h.zoom?(p+='<div class="b-input-btn b-input-btn_type_zoom"  data-control-field="'+h.name+'"></div>',h.textareaClasses=" b-textarea_for_zoom",p+=n.formItemInputWithZoom1(h)):
p+=n.formItemInput(h);else if("textarea"===f)h.third="",h.hint="",p=n.formItemTextarea(h);else if("slider"===f)h.tabId=d,p=n.formItemSliderEditInList(h),setTimeout(function(){a.trigger("appendEditInList",{tabId:d})},100);else if("select"===f)p=n.formItemSelect(h);else if("radio"===f)p=n.formItemRadio(h);else{a.trigger("pullMsg",{msg:"Not found field. Sorry..."});b().className="";return}for(var v in g[d])"hidden"===g[d][v].type&&(p+="<"+g[d][v].attr+"/>");m.css("top",q+"px");m.css("left",r+"px");e=
n.editinListForm({field:p,elid:String(e.elid).replace(/"/g,"&quot;"),id:d,func:e.funcEdit});m.html(e);m.show();s.addClass("i-tab-overlay_trig_editlist b-tab-overlay_show_edlist");w(m,r);setTimeout(function(){w(m,r)},30);setTimeout(function(){"text"===h.type||"slider"===h.type||"textarea"===h.type?c("#editinlist-wrapper-"+h.id+' [name="'+h.name+'"]').focus():"select"===h.type?c("#editinlist-wrapper-"+h.id+' div[data-id="'+h.name+'"]  .b-myselect__select-value').focus():"radio"===h.type?c("#editinlist-wrapper-"+
h.id+' div[data-id="'+h.name+'"][tabindex="0"]').focus():"checkbox"===h.type&&c("#editinlist-wrapper-"+h.id+' input[data-id="'+h.name+'"]').focus()},100)}else a.trigger("pullMsg",{msg:"Not found field. Sorry..."}),b().className=""},w=function(a,b){var c=a.width(),c=m.innerWidth-(b+c+12);0>c&&a.css("left",b+c-16+"px")},y=function(){var a=this.getAttribute("data-id");a?a.match(/tab/)||(a=this.getAttribute("data-tabid")):a=this.getAttribute("data-tabid");D(a)},D=function(a){g[a]&&(g[a].eFwrapper.hide(),
g[a].eFoverlay.removeClass("b-tab-overlay_show_edlist i-tab-overlay_trig_editlist"))},E=function(b,e){var d=this.getAttribute("data-tabid");if(void 0===d||null===d)d=this.getAttribute("data-id");if(!g[d].eFsend){var f=c("#editinlist-form-"+d).serializeObject();g[d].eFvalue!==f[g[d].curObj.colName]?(a.trigger("ajaxRequest",{param:f,invar:{id:d,tabId:d,nextStep:e,value:f[g[d].curObj.colName]},type:"post",outtype:"json",trfunc:"ajaxResponseEditInListSave",failfunc:"ajaxResponseEditInListSaveFailed",
queue:"noqueue"}),g[d].eFsend=!0,g[d].eFwrapper.addClass("active")):A.apply({},[{},{ok:!0,id:d,nextStep:e}])}},F=function(b,c){"json"===c.erType?a.trigger("pullMsg",{msg:'JSON Parse Error. Func: "'+c.param.func+'"'}):a.trigger("pullMsg",{msg:'Request failed. Try again. Func: "'+c.param.func+'"'});var e=c.invar.id;g[e].eFsend=!1;g[e].eFwrapper.removeClass("active")},A=function(b,e){var d=e.id,f=e.ok,h=e.value,k=e.error,q=e.ermsg,n=e.nextStep,v=e.elid,t=e.elname,z=g[d].curObj,y=z.colName,A=g[d][y],
w,E,C,x;g[d].eFvalue=h;if(f){if("select"===A.type||"radio"===A.type)for(f=A.slist.length;f--;)A.slist[f].key===h&&(h=A.slist[f].value);g[d].editingField.hasClass("b-list__table-col-content")?g[d].editingField.html(m.filterXSS(h)):l.find(".b-list__table-col-content").html(m.filterXSS(h));g[d].eFwrapper.removeClass("active");D(d);v&&(z.parentTr.attr("data-elid",v),t&&z.parentTr.attr("data-elkeyname",t));void 0!==n&&(w=z.index,E=n,C=z.parentTr,x=d);if(void 0!==n)if("up"===E)C=C.prev(),0!==C.length&&
(C=C.find(".data")[w],p=C.className.match(/editable/)?c(C):c(C).parent(),u.apply());else if("down"===E)C=C.next(),0!==C.length&&(v=C.find(".data")[w],p=v.className.match(/editable/)?c(v):c(v).parent(),u.apply());else if("right"===E)for(s[x]||r(x),n=!0,x=s[x];n;)w++,x[w]?(n=!1,v=C.find(".data")[w],p=v.className.match(/editable/)?c(v):c(v).parent(),u.apply()):void 0===x[w]&&(n=!1);else if("left"===E)for(s[x]||r(x),n=!0,x=s[x];n;)w--,x[w]?(n=!1,v=C.find(".data")[w],p=v.className.match(/editable/)?c(v):
c(v).parent(),u.apply()):void 0===x[w]&&(n=!1);e.__content&&e.__content[z.rowIndex]&&e.__content[z.rowIndex][y]&&(e.__content[z.rowIndex][y].v=h,a.trigger("updateTotalList",{tabId:d,index:z.index,colName:y}))}else k&&(c("#err-cont-"+d).html('<div class="b-error-box"><div class="b-error-box__top-triangle"></div><div class="b-error-box__inner">'+q+"</div></div>"),g[d].eFsend=!1,g[d].eFwrapper.removeClass("active"))},C=[],B=function(a){a=a||m.event;var b;C[a.which||a.keyCode]=!0;if(C[13]){if(b=this.className.match(/b-textarea/g),
!b||b&&a.ctrlKey)a.preventDefault(),E.apply(this,[{},"down"])}else C[27]?(a.preventDefault(),a.stopPropagation(),y.apply(this)):C[38]&&C[17]?(a.preventDefault(),E.apply(this,[{},"up"])):C[40]&&C[17]?(a.preventDefault(),E.apply(this,[{},"down"])):C[38]?this.className.match(/b-myselect__select-value|b-radio__control|b-input_for_slider|b-textarea/g)||(a.preventDefault(),E.apply(this,[{},"up"])):C[40]?this.className.match(/b-myselect__select-value|b-radio__control|b-input_for_slider|b-textarea/g)||(a.preventDefault(),
E.apply(this,[{},"down"])):(C[16]||C[0])&&C[9]?(a.preventDefault(),E.apply(this,[{},"left"])):C[9]&&(a.preventDefault(),E.apply(this,[{},"right"]))},K=function(a){a=a.which||a.keyCode;C[0]&&delete C[0];C[a]&&delete C[a]},L=function(a,b){D(b.prevTabId||b.tabId)},x=function(a,b){var c=b.tabId;c||(c=b.tabId);g[c]&&(g[c].eFwrapper.remove(),delete d[c],delete g[c],delete s[c])};return{init:function(){a.on("#main-wrapper",".editable","mouseover",h);a.on("#main-wrapper",".editable","mouseout",k);a.obind("#edit-filed-in-list",
"mouseout",k);a.obind("#edit-filed-in-list","mouseover",e);a.obind("#edit-filed-in-list","click",u);a.bind("ajaxResponseEditInList",q);a.bind("ajaxResponseEditInListSave",A);a.bind("ajaxResponseEditInListSaveFailed",F);a.on("#main-wrapper",".i-btn-editlis-ok","click",E);a.on("#main-wrapper",".i-btn-editlis-cancel","click",y);a.on("#main-wrapper",".i-tab-overlay_trig_editlist","click",y);a.on("#main-wrapper",'.edit-field-form input[type="text"], .edit-field-form .b-textarea, .edit-field-form .b-textarea_for_zoom, .edit-field-form .b-myselect__select-selected .b-myselect__select-value, .edit-field-form .b-radio__control, .edit-field-form .b-checkbox__control',
"keydown",B);a.obind(c(document),"keyup",K);a.bind("closeTabEvent",L);a.bind("closeTabEvent",x);a.bind("changedTab",L);a.bind("changedTab, appendList, appendForm, appendReport, appendMap",k);a.bind("appendList",x);a.bind("failLoadForm",z)}}}(window,$,EventMgr,App,templates);"use strict";
App.FilterList=function(m,c,a,f,n){var b=m.pageInfo,l={},p=function(){return f.u.selectorCache(".i-list-wr")},t=function(b,e){var d=this.getAttribute("data-tabid"),f=c("#frm-"+d).serializeObject();f.sok="ok";this.value=this.getAttribute("data-disabled");this.className+=" b-button_st_disabled";b.preventDefault();a.trigger("ajaxRequest",{param:f,invar:{tabId:d,__src:"filterset"},trfunc:"reloadTab",outtype:"json",queue:"filter"+d})},h=function P(b){if(!c("#b-fast-filter-icon").hasClass("b-filter__toggle_is_disabled")){var e=
c(".tab-content_st_active");e.toggleClass("filter-hide").toggleClass("filter-opened");var d=e.attr("data-tabid");e.hasClass("filter-hide")?c("#"+d+"-progressbar-overlay").off("click",P).removeClass("b-tab-overlay_st_filter"):(a.trigger("setFocus",{tabId:d}),setTimeout(function(){a.trigger("updateHorizScrollControl",{id:"filter-"+d});c("#frm-"+d+" .b-mselect__view-value").each(function(){var a=this.getAttribute("data-id");ScrollHandler.attach(this.id,a+"-ms-view",d,!0)})},50),c("#"+d+"-progressbar-overlay").on("click",
P).addClass("b-tab-overlay_st_filter"));a.trigger("updTableHeight");a.trigger("updateTipPosition");b.preventDefault();b.stopPropagation()}},e=function(b,e){var d=e.tabId,f=e.func,g={};"on"===e.listParam.filter&&(g=c.extend(g,e.listParam));g.func=f;a.trigger("ajaxRequest",{param:g,invar:{tabId:d},trfunc:"ajaxFilterResponse",outtype:"json",queue:"noqueue"})},k=function(b){b.preventDefault();b.stopPropagation();b=c(".tab-content_st_active").attr("data-tabid");var e={func:c("#frm-"+b+' input[name="func"]').val(),
sok:"ok",drop:"on"};a.trigger("ajaxRequest",{param:e,invar:{tabId:b,__src:"filterset"},trfunc:"reloadTab",outtype:"json",queue:"noqueue"});this.className+=" b-button_st_disabled"},g=function(b){var e=this.getAttribute("data-tabid"),d,f,g;c("#frm-"+e).find("input").each(function(){d=this.type;g=this.getAttribute("data-type");"text"===d?this.value="":"hidden"===d&&"checkbox"===g?(this.value="off",c("#frm-"+e+' [data-id = "'+this.name+'"]').removeClass("checked")):"hidden"===d&&"select"===g?(f=this.id.replace("-val",
""),c("#frm-"+e+' ul[data-id = "'+f+'"] li:first').trigger("click")):"hidden"===d&&"multiple"===g&&(f=this.getAttribute("data-id"),a.trigger("multiSelectUnselect",{id:f}))});a.trigger("setFocus",{tabId:e});b.preventDefault()},d=function(b,e){var d;e.msg&&c.extend(f.u.msg,e.msg);var g=e.tabId,h=s(c(".b-content").width()-36),k=e.form[0].formItems,r=e.func,m=d="",p=5,v=0,u=k.length,t,z,H,w,y,A={},C=Math.ceil((u-1)/h);A.__formItemsLen=u-1;for(t=1;t<u;t++)for(z=k[t].length,w=k[t],H=0;H<z;H++)A[w[H].name]=
k[t][H],y={first:"",second:""},y.hide=w[H].hide||{},y.show=w[H].show||{},y.classes=w[H].dependFields,void 0!==w[H].show&&(y.classes=w[H].shadow?y.classes+" depended-shadow-s":y.classes+" depended-hidden-s"),w[H].id=g,w[H].label&&(y.first+=n.filterItemLabel({label:w[H].label,name:w[H].name,func:r,classes:""})),w[H].value&&(w[H].value=w[H].value.replace(/"/g,"&quot;")),"text"===w[H].type||"hidden"===w[H].type||"password"===w[H].type?(w[H].classes="",w[H].date&&(y.second+='<div class="b-input-btn b-input-btn_type_calendar hint" data-hint="'+
w[H].hintBtn+'"  data-control-field="'+w[H].name+'"></div>'),w[H].zoom?(y.second+='<div class="b-input-btn b-input-btn_type_zoom hint" data-hint="'+w[H].hintBtn+'" data-control-field="'+w[H].name+'"></div>',w[H].inputAttr=w[H].attr,w[H].inputClasses="",w[H].inputName=w[H].name,w[H].textareaClasses=" b-textarea_for_zoom",y.second+=n.formItemInputWithZoom(w[H])):y.second+=n.formItemInput(w[H])):"select"===w[H].type?y.second+=n.formItemSelect(w[H]):"aselect"===w[H].type?y.second+=n.formItemSelectAutocomplete(w[H]):
"checkbox"===w[H].type?y.second+=n.formItemCheckbox(w[H]):"mselect"===w[H].type&&(y.second+=n.formItemMSelect(w[H])),m+=n.filterItem(y),0===t%C&&1!==C&&(v++,d+=n.filterRow({content:m,index:v}),m="");""!==m&&(v++,d+=n.filterRow({content:m,index:v}));p-=h;for(r=0;r<p;r++)v++,d+=n.filterRow({content:"",index:v});var p="",v=c("#permalink-"+g),r=v.attr("href"),x;for(x in A)if(A[x].value)if("select"===A[x].type)A[x].slist&&A[x].slist[0]&&A[x].slist[0].key!==A[x].value&&(p+="&"+x+"="+A[x].value);else if("checkbox"!==
A[x].type||"off"!==A[x].value)p+="&"+x+"="+A[x].value;p&&v.attr("data-clipboard-text",r+(p+"&filter=on"));l[g]={model:A,renderObject:k,cols:h};if(A&&0<A.__formItemsLen){A={};h=e.tabId;A.title=e.title;A.form=d;A.tabId=e.tabId;A.func=e.func;A.disabled=e.formflags.disabledText;A.filterMsg=e.filterMsg;A.sfname=e.savedFilterAct;A=n.filterWrapper(A);c("#filter-"+e.tabId).html(A);a.trigger("appendedFilter",{tabId:h});q(e);h=k.length;A=0;v="=";for(A=m=0;A<h;A++)if(void 0!==k[A][0]){x=k[A][0].name;d=k[A][0].value;
m=k[A][0].type;p=r=!1;""!==d&&(r=!0);if("select"===m||"mselect"===m)p=!0;if("select"===m&&"*"===d)r=!1;else if("select"===m&&"*"!==d){if(k[A][0].slist)for(m=k[A][0].slist.length;m--;)if(k[A][0].slist[m].key===d){d=k[A][0].slist[m].value;0===m&&(r=!1);break}}else if("checkbox"===m&&"off"===d)r=!1;else if("mselect"===m&&k[A][0].slist){d="";u=m=0;for(t=k[A][0].slist.length;t>u;u++)k[A][0].values&&k[A][0].values[u]&&(0!==m&&(d+=" | "),d+=k[A][0].slist[u].value,m++);""===d&&(r=!1)}r&&(k[A][0].delimiter&&
(v=k[A][0].delimiter),r=c("#sort_table-"+g+' [data-colname="'+x+'"] .filter-icon'),r.attr("data-hint",v+' "'+d+'"'),r.addClass("active"));p&&(k[A][0].period||c("#lt-"+g).find(".b-list__table-col_name_"+x).addClass("i-filter-field"))}c(".b-button__filter-reset").removeClass("b-button_st_disabled");c(".b-button__filter-change, .i-filter-applied").removeClass("b-button_st_disabled");c(".b-filter__toggle").removeClass("b-filter__toggle_is_disabled")}else c("#cont-"+g).removeClass("filter").find(".filter-active").remove(),
a.trigger("updTableHeight")},s=function(a){a=a-(960<a?150:10)-12;var b=parseInt(a/348,10);1<b&&(b=parseInt((a-60*(b-1))/348,10));return b},r,u=function(){clearTimeout(r);r=setTimeout(function(){if(l){var a=s(c(".b-content").width()-36),b,e;for(e in l)b=l[e],b.cols!==a&&(b.cols=a,z(e))}},200)},z=function(a){if(l[a]&&l[a].renderObject){var b=Math.ceil(l[a].model.__formItemsLen/l[a].cols),e=0,d=1;c("#filter-"+a+" .filter-item").each(function(){e++;c("#filter-"+a+" .filter-table_n_"+d).append(this);e===
b&&(e=0,d++)})}},q=function(b){var e=b.savedFilters,d=b.tabId;if(e&&0<e.length){for(var f=e.length,g="",h=0;h<f;h++)g+=n.filterSavedItem({name:e[h],id:"tid"+(new Date).getTime()+h,func:b.func,tabId:d,active:b.savedFilterAct===e[h]});c("#cont-"+d+" .b-filter__save-bar").addClass("b-filter__save-bar_has_items");c("#cont-"+d+" .b-filter__save-bar-inner").append(c(g));setTimeout(function(){a.trigger("bindHorizScrollControl",{leftBtn:"#cont-"+d+" .b-filter__btn-move_dir_left",rightBtn:"#cont-"+d+" .b-filter__btn-move_dir_right",
actElem:"#cont-"+d+" .b-filter__saved-item_st_active",innerBox:"#cont-"+d+" .b-filter__save-bar-inner",id:"filter-"+d})},50)}},v=function O(a,b){var c=f.u.msg.filterName+" "+a,e=!1;b.each(function(){this.value===c&&(e=!0,a++)});return e?O(a,b):c},w=function(b){b.preventDefault();b=this.getAttribute("data-id");var e=c("#frm-"+b).serializeObject(),d="tid"+(new Date).getTime(),f;f=c("#cont-"+b+" .b-filter__saved-name-edit");var g=c("#cont-"+b+" .b-filter__saved-item_st_active .b-filter__saved-name-edit"),
h=f.length+1;f=0<g.length?g.val():v(h,f);e.faction="save";e.fname=f;e.sok="ok";a.trigger("ajaxRequest",{param:e,invar:{tabId:b,tid:d},trfunc:"reloadTab",outtype:"json",queue:"filter"+b});a.trigger("updTableHeight")},y=function(c){c.preventDefault();c=this.getAttribute("data-id");c=f.Dom.byId("b-filter__saved-name-edit_tid_"+c);var e={};c&&(e.fname=c.value,e.func=c.getAttribute("data-func"),this.parentNode&&this.parentNode.parentNode.removeChild(this.parentNode),e.faction="drop",a.trigger("ajaxRequest",
{url:b.url,param:e,invar:{},trfunc:"DoNothing",outtype:"json"}),a.trigger("updTableHeight"))},D=function(a){var b=m.htmlEscape(this.value),e=this.getAttribute("data-tabid"),d=this.nextSibling;d&&(d.innerHTML=b,c(this).parents(".b-filter__saved-item").hasClass("b-filter__saved-item_st_active")&&c("#filter-"+e+" .b-button__filter-save-name").html(b));13===(a.which||a.keyCode)&&this.blur()},E=function(a){a.preventDefault();this.parentNode&&f.Dom.addClass(this.parentNode,"b-filter-flag_editing");c(this.parentNode).find(".b-filter__saved-name-edit").focus().select()},
F=function(c){c=this.value;var e=this.getAttribute("data-func"),d=this.getAttribute("data-name");a.trigger("ajaxRequest",{url:b.url,param:{fnew_name:c,fname:d,faction:"rename",func:e},invar:{},trfunc:"DoNothing",outtype:"json"});this.setAttribute("data-name",c)},A=function(a){this.parentNode&&f.Dom.removeClass(this.parentNode.parentNode,"b-filter-flag_editing")},C=function(c){c.preventDefault();c=f.Common.getPreviousNode(this);c.getAttribute("data-id");var e=c.getAttribute("data-tabid"),d={};c&&(d.func=
c.getAttribute("data-func"),d.fname=c.getAttribute("data-name"),d.faction="set",a.trigger("ajaxRequest",{url:b.url,param:d,invar:{tabId:e},trfunc:"reloadTab",outtype:"json"}))},B=function(a,b){var c=b.tabId;l&&l[c]&&delete l[c]},K=function(){p().append('<div class="b-fast-filter-icon" id="b-fast-filter-icon"></div>');a.obind("#b-fast-filter-icon","mouseout",J);a.obind("#b-fast-filter-icon","mouseover",I);a.obind("#b-fast-filter-icon","click",R)},L=0,x,M=function(){return f.Dom.byId("b-fast-filter-icon")},
G=function(){var a=c(this),b=a.offset(),e=b.left,b=b.top,d=this.offsetWidth,f=M(),g=a.hasClass("editable"),h=22;x=a;g&&(h+=22);f.className.match("active")||(L=e+d-h,f.style.left=L+"px",f.style.top=b+"px",f.style.display="block")},J=function(a){a=M();a.className.match("active")||(a.style.display="none")},I=function(){M().style.display="block"},R=function(a){if(x){var b,e,d,g,h,k,s;a=!1;b=x.find(".b-list__table-col-content");if(x.length&&(h=b.attr("data-v-id"),b=b.html(),e=x.closest("td").index(),e=
x.closest("table").find("th")[e],d=e.getAttribute("data-colname"),e=x.closest(".tab-content").attr("data-tabid"),l[e]&&l[e].model&&l[e].model[d])){s=l[e].model[d];k=s.type;if("select"===k||"mselect"===k){if(h)b=h,a=!0;else for(g=0,h=s.slist.length;g<h;g++)if(s.slist[g].value===b){b=s.slist[g].key;a=!0;break}g="mselect"===k?e+"-"+d+"-ms-value":"_"+d+"-"+e+"-val"}else"text"===k&&(g=d+"-"+e,a=!0);(g=f.Dom.byId(g))&&a&&(g.value=b,c("#frm-"+e+" .b-button__filter-set").trigger("click"))}}};return{init:function(){a.bind("appendFilter",
e);a.bind("ajaxFilterResponse",d);a.bind("closeTabEvent",B);a.on(p(),".b-button__filter-set","click",t);a.on(p(),".tab-content_st_active .filter-btn","click",h);a.on(p(),".b-button__filter-reset","click",k);a.on(p(),".b-button__filter-change, .i-filter-applied","click",h);a.on(p(),".b-button__filter-clear","click",g);a.on(p(),".b-button__filter-save","click",w);a.on(p(),".b-filter__saved-name-edit","keyup",D);a.on(p(),".b-filter__saved-name-edit","change",F);a.on(p(),".b-filter__saved-remove","click",
y);a.on(p(),".b-filter__saved-edit","click",E);a.on(p(),".b-filter__saved-name-edit","blur",A);a.on(p(),".b-filter__saved-name","click",C);a.obind(c(m),"resize",u);a.bind("loadPage",K);a.on(p(),".i-filter-field","mouseover",G);a.on(p(),".i-filter-field","mouseout",J);a.bind("appendForm,appendList,appendReport,closeTabEvent",J)}}}(window,$,EventMgr,App,templates);"use strict";
App.GoogleCharts=function(m,c,a,f,n){var b=!1,l=function(c,e){var d=e.bands.bands,f=e.tabId,g=d.length,h,k,s,l;for(k=0;k<g;k++)if(h=f+"-"+k,h+=d[k].id,void 0!==d[k].diagram)for(l=d[k].diagram.length,s=0;s<l;s++)b?a.trigger("loadGChart",{diagram:d[k].diagram[s],gid:h+s,empty:d[k].empty,tabId:f,content:d[k].content}):a.trigger("loadGChartPrepare",{diagram:d[k].diagram[s],gid:h+s,empty:d[k].empty,tabId:f,content:d[k].content});e.bands.emptyBand&&(d=e.bands.emptyBandData,b?a.trigger("loadGChart",{diagram:d.diagram,
gid:f+"-band-empty",tabId:f,content:d.content}):a.trigger("loadGChartPrepare",{diagram:d.diagram,gid:f+"-band-empty",tabId:f,content:d.content}))},p=function(c,e){var d=e.diagram,f=e.gid,g=e.tabId,h=e.content;b?a.trigger("loadGChart",{diagram:d,gid:f,tabId:g,content:h}):a.trigger("loadGChartPrepare",{diagram:d,gid:f,tabId:g,content:h})},t=function(b,c){var d=c.diagram,g=c.content,k=c.gid,s=f.Dom.byId(k),l=c.tabId,r,n,p,t=c.empty,B=!1,K="#5c85d6 #e36141 #ffbc58 #53b858 #ba70ba #3fafd1 #e37fa0 #8dc43b #cc6665 #aaa".split(" ");
d.colors&&1<d.colors.length&&(K=d.colors,K.shift());d.chartsData&&!d.chartsData.fakeArr?(g=d.chartsData.data,B=!0):d.chartsData&&d.chartsData.fakeArr?(g=d.chartsData,B=!0):g=e(d,g);if(null!==s){var L=g.data?g.data.length:g.length,x=0,M=[],G=0,J="automatic",J=s.offsetWidth;32>L&&(G=3);J=700<J?Math.round(L/10):Math.round(L/5);if(1===L){if(g.data)x=g.data[0];else{console.log("empty chart data");return}for(;x--;)M.push(0)}B&&(g=h(g,L));if(d&&"pie"===d.type){if(B)n=m.google.visualization.arrayToDataTable(g);
else{n=new m.google.visualization.DataTable;p=0;for(B=g.fakeArr.length;p<B;p++)null===g.fakeArr[p]?n.addColumn({type:"string",role:"tooltip"}):n.addColumn(0===p?"string":"number",g.fakeArr[p]);n.addRows(g.data)}p={"backgroundColor.stroke":"#fff",vAxis:{minValue:0,textStyle:{fontSize:"11"}},colors:K,is3D:!0,legend:{alignment:"center",textStyle:{fontSize:"11"}},sliceVisibilityThreshold:d.others};d.title?(p.title=d.title,p.chartArea={height:"80%"}):p.chartArea={height:"94%"};r=new m.google.visualization.PieChart(f.Dom.byId(k))}else if(d&&
"histogram"===d.type){if(g.fakeArr){n=new m.google.visualization.DataTable;p=0;for(B=g.fakeArr.length;p<B;p++)null===g.fakeArr[p]?n.addColumn({type:"string",role:"tooltip"}):n.addColumn(0===p?"string":"number",g.fakeArr[p]);n.addRows(g.data)}else n=m.google.visualization.arrayToDataTable(g);p={"backgroundColor.stroke":"#fff",colors:K,vAxis:{textStyle:{fontSize:"11"},viewWindow:{}},hAxis:{textStyle:{fontSize:"11"}},legend:{alignment:"start",position:"right",textStyle:{fontSize:"11"}}};d.title&&(p.title=
d.title);d.min&&(p.vAxis.viewWindow.min=d.min);d.max&&(p.vAxis.viewWindow.max=d.max);r=new m.google.visualization.ColumnChart(f.Dom.byId(k))}else if(d&&("line"===d.type||"area"===d.type||"steppedarea"===d.type)){if(g.fakeArr){n=new m.google.visualization.DataTable;p=0;for(B=g.fakeArr.length;p<B;p++)null===g.fakeArr[p]?n.addColumn({type:"string",role:"tooltip"}):n.addColumn(0===p?"string":"number",g.fakeArr[p]);n.addRows(g.data)}else n=m.google.visualization.arrayToDataTable(g);p={"backgroundColor.stroke":"#fff",
colors:K,vAxis:{textStyle:{fontSize:"11"},viewWindow:{}},hAxis:{showTextEvery:J,textStyle:{fontSize:"11"}},pointSize:G,focusTarget:"category",legend:{alignment:"start",textStyle:{fontSize:"11"}}};d.title&&(title=d.title);d.min&&(p.vAxis.viewWindow.min=d.min);d.max&&(p.vAxis.viewWindow.max=d.max);"line"===d.type?r=new m.google.visualization.LineChart(f.Dom.byId(k)):"area"===d.type?r=new m.google.visualization.AreaChart(f.Dom.byId(k)):"steppedarea"===d.type?(p.areaOpacity=1,p.isStacked=!0,r=new m.google.visualization.SteppedAreaChart(f.Dom.byId(k))):
"column"===d.type&&(p.isStacked=!0,r=new m.google.visualization.ColumnChart(f.Dom.byId(k)))}else if(d&&"scatter"===d.type){if(g.fakeArr){n=new m.google.visualization.DataTable;p=0;for(B=g.fakeArr.length;p<B;p++)null===g.fakeArr[p]?n.addColumn({type:"string",role:"tooltip"}):n.addColumn("number",g.fakeArr[p]);if(void 0!==d.markerline){p=0;for(B=g.data.length;p<B;p++)g.data[p].push(d.markerline-0);n.addColumn("number",d.markerlineLabel)}n.addRows(g.data)}else n=m.google.visualization.arrayToDataTable(g);
p={"backgroundColor.stroke":"#fff",colors:K,vAxis:{textStyle:{fontSize:"11"},viewWindow:{}},hAxis:{showTextEvery:J,textStyle:{fontSize:"11"}},legend:!1,seriesType:"scatter"};void 0!==d.markerline&&(p.series={},p.series[1]={type:"line"});d.min&&(p.vAxis.viewWindow.min=d.min);d.max&&(p.vAxis.viewWindow.max=d.max);r=new m.google.visualization.ComboChart(f.Dom.byId(k))}else if(d){a.trigger("pullMsg",{msg:'Diagram type "'+d.type+'" do not support'});return}t&&(p.colors=K);r.draw(n,p);a.trigger("addedChart",
{chart:r,tabId:l});f.Common.noMoreThan("form-scroll-"+l,100,function(){a.trigger("updateScroll",{id:"form-scroll-"+l});a.trigger("updTableHeight")})}},h=function(a,b){for(var c,d=a.data?a.data:a;b--;)if(0!==b||a.fakeArr)for(c=d[b].length;c--;)0===c||a.fakeArr&&!a.fakeArr[c]||(d[b][c]=""===d[b][c]?null:parseFloat(String(d[b][c]).replace(/\s/g,"")));a.data?a.data=d:a=d;return a},e=function(a,b){var c,d,e,f=a.label,g=a.data;c=a.labelText;var h=a.tooltip,k="scatter"===a.type,s,l,r;if(a.lines){e=["fake"];
k=h=g.length;for(l=0;h--;)e.push(c[l]),g[l].convert&&e.push(null),l++;c=[];s=b.length;for(r=0;s--;){d=[b[r][f].v];h=k;for(l=0;h--;)g[l].convert?(d.push(parseFloat(b[r][g[l].name].orig||b[r][g[l].name].v.replace(/\s/g,""))),d.push(""===b[r][g[l].name].v?null:b[r][g[l].name].v)):d.push(""===b[r][g[l].name].v?null:parseFloat(b[r][g[l].name].v.replace(/\s/g,""))),l++;c.push(d);r++}}else for(g=g[0]?g[0]:g,e=["fake",c[0]],(g.convert||h)&&e.push(null),c=[],s=b.length,l=0;s--;)h?(d=[b[l][f].v,parseFloat(b[l][g.name].v.replace(/\s/g,
""))],d.push(b[l][h].v+": "+d[0]+", "+d[1])):d=g.convert?[b[l][f].v,parseFloat(b[l][g.name].orig||b[l][g.name].v),b[l][g.name].v]:[b[l][f].v,parseFloat(b[l][g.name].v.replace(/\s/g,""))],k&&(d[0]-=0),c.push(d),l++;return{data:c,fakeArr:e}},k=[],g=function(b,c){k.push(c);a.trigger("loadGChartScripts",{})},d=function(){for(var b=k.length;b--;)a.trigger("loadGChart",k[b]);k=[]},s=function z(){void 0===m.google.visualization?setTimeout(function(){z()},100):void 0===m.google.visualization.arrayToDataTable?
setTimeout(function(){z()},100):(b=!0,d())},r=function(){setTimeout(function(){m.google.load("visualization","1",{callback:'console.log("2 sec wait")',packages:["corechart"],language:n.lang})},100);setTimeout(function(){s()},100)};return{init:function(){a.bind("appendReport",l);a.bind("appendListWithDiagram",p);a.bind("loadGCharts",l);a.bind("loadGChart",t);a.bind("loadGChartPrepare",g);a.one("loadGChartScripts",r)}}}(window,$,EventMgr,App,pageInfo);"use strict";
App.Captcha=function(m,c,a,f,n){function b(a,c){var h=f.Dom.byId(c.id);m.grecaptcha&&"function"===typeof m.grecaptcha.render&&h?""===h.innerHTML?l(h):setTimeout(function(){b(a,c)},100):f.Common.required("https://www.google.com/recaptcha/api.js",l,h)}function l(a){a&&m.grecaptcha.render(a,{sitekey:a.getAttribute("data-sitekey")})}return{init:function(){a.bind("appendCaptcha",b)}}}(window,$,EventMgr,App,pageInfo);"use strict";App=App||{};
App.Help=function(m,c,a){var f=function(a){var b=this.getAttribute("data-help-type"),f=this.getAttribute("data-help"),p=c(".tab-content_st_active").attr("data-func");a=a||m.event;a.preventDefault();2===b-0||"default"===b?m.open(pageInfo.url+"?func=help&topic="+p+"&path="+f+"&newwindow=yes"):"external"===b&&(a=this.getAttribute("data-help-func"),App.u.openInNewWindow(a))};return{init:function(){a.on(c("#main-wrapper"),".help","click",f)}}}(window,$,EventMgr);"use strict";
App.Hint=function(m,c,a,f){var n=function(){return f.u.selectorCache("#main-wrapper")},b=m.pageInfo,l=function(){return c("#hint-inner")},p,t,h,e,k=function(a){clearTimeout(void 0);a=c(this);var b=a.parents(".i-form__item").find(".field-help");0<b.length&&q(b,!1)&&setTimeout(function(){y(b,!0);A(void 0,!0)},1);e=a},g=function(){t=t||c("#hint");t.css("visibility","").removeClass("active")},d=function(){if(t.hasClass("active")&&e&&e.hasClass("force-hint")){var a=e.parents(".l-form__row").find(".field-help");
142>a.offset().top?g():y(a,!0)}},s=function(){clearTimeout(h)},r=function(a){var b=a.originalEvent.detail.props,d=c(a.originalEvent.detail.elem);a="<ul>";var f=b.msg,g,k=k||l();for(g in b)f[g]&&(a+='<li><label class="b-hint-line__label">'+f[g]+":</label> "+b[g]+"</li>");k.html(a+"</ul>");h=setTimeout(function(){A(d)},500);e=null},u=function(a){a=c(this);var b=this.getAttribute("data-val");p=p||l();b&&(b='<img class="preview-icon" style="min-height: 16px; min-width: 16px;" '+('src="/manimg/common/img/'+
b+'.png"')+" ></img>",p.html(b),y(a,!1),h=setTimeout(function(){A()},500))},z=function(a,b){var d=b.hint,f=c(b.elem);p=p||l();p.html(d);y(f,!1);A();e=null},q=function(a,c){var d,f,g;p=p||l();(d=a[0].getAttribute("data-state"))?(d=a[0].getAttribute("data-hint-"+d))||(d=a[0].getAttribute("data-hint")):d=a[0].getAttribute("data-hint");g=a[0].getAttribute("data-hint-mn");c&&(d=b.loading);if(!d)if(a.hasClass("overwidth"))d=a[0].innerText||a[0].firstChild.nodeValue||a.html();else return!1;d=m.filterXSS(d);
a.hasClass("shadow")&&(f=a.parents("tr.row-shadow"),f.length||(d=d.replace(/<span class=['"]hint-.*/g,"")));p.html(d);g?(String(g).match("hint")||(g="hint_"+g),p.attr("data-mn",g)):p.attr("data-mn",null);e=null;return!0},v=function(a,b){var d=c(this);q(d,b)&&(y(d,!1),h=setTimeout(function(){A()},500));e=null;a.stopPropagation&&a.stopPropagation()},w=function(a){this.className.match(/overwidth/)?v.apply(this,[a]):this.offsetWidth<this.scrollWidth-1&&(this.className+=" overwidth",v.apply(this,[a]))},
y=function(a,b,d,e,f,g){d&&e||(t&&p||(p=l(),t=c("#hint")),e=p,d=t);var h=e[0].offsetHeight,k=a.width(),s=a.offset(),r=s.top,n=s.left,m=c("body").width(),q,s=!1,u;0===k&&a&&a[0]&&(k=a[0].getBoundingClientRect().width);e.removeClass("b-hint__inner_right_fixed b-hint__inner_right b-hint__inner_top b-hint__inner_top_right b-hint__inner_left");b?(q=r-15,k=n+k+3+10,u=250):(q=r-h-10-3-15,k=n+k/2-7,u=300);m-k<u||f?(e.addClass("b-hint__inner_right"),s=!0,d.css("right",m-n-30+"px"),d.css("left",""),b&&(q=r-
h-10-3-15)):(b&&e.addClass("b-hint__inner_right_fixed"),e.addClass("b-hint__inner_left"),d.css("left",k+"px"),d.css("right",""));if(h>q||g)b=a.outerHeight(),0===b&&a&&a[0]&&(b=a[0].getBoundingClientRect().height),q=a.offset().top+b+10-15,s?e.addClass("b-hint__inner_top_right"):e.addClass("b-hint__inner_top");d.css("top",q+"px")},D,E=function(d){var e=this;d.originalEvent.detail.elem&&(e=d.originalEvent.detail.elem);var f=c(e),g=c(".tab-content_st_active").attr("data-tabid"),h=f.parents("tr").attr("data-elid")||
e.getAttribute("data-elid"),k=e.getAttribute("data-name"),s=e.getAttribute("data-value"),l=e.getAttribute("data-hintfunc");k||(k=f.closest("td").index(),k=f.closest("table").find("th")[k].getAttribute("data-colname"));l?(D=g+s+h+k,a.trigger("ajaxRequest",{url:b.url,param:{func:l,elid:h,type:k},invar:{hintTabId:g,hintElid:h,hintPName:k,hintValue:s,self:f},type:"get",outtype:"json",trfunc:"ajaxResponseHint",queue:"actHint"+g,failfunc:"failCommonAjaxResponse"})):(D=g+s+h+k,a.trigger("getActiveHint",
{tabId:g,elid:h,pName:k,value:s,self:f}));v.apply(e,[{},!0]);d.preventDefault();d.stopPropagation()},F=function(a,b){var c=b.self,d;D===b.hintTabId+b.hintValue+b.hintElid+b.hintPName&&(d=b.hint&&""!==b.hint?m.htmlDecode(b.hint):"Oops..",d=m.filterXSS(d),p.html(d),y(c,!1))},A=function(a,b){p=p||l();t=t||c("#hint");void 0!==a&&"function"===typeof a.width&&y(a,!1);t.addClass("active");b?t.css("visibility","visible"):t.css("visibility","");clearTimeout(h)},C=function(a){B();clearTimeout(h)},B=function(){t=
t||c("#hint");t.removeClass("active");t.find(".hint-cont").html();D="";clearTimeout(h)},K,L=function(a,b){K=b;var d=b.tips,e=b.inTab,g=b.tabId,h=d.length,k=b.sameModule,s,l,r=!1;if(!c(".b-tip").length)for(;h--;)if(!c(".b-tip_name_"+d[h].name).length&&("title_reload"!==d[h].name||k)){"mbar_pin"===d[h].name&&(e=!1);if("tabs_close"===d[h].name){if(9>c(".tab-group").length)continue;e=!1}s=e?c("#cont-"+g+" .i-tip-target_st_"+d[h].name):c(".i-tip-target_st_"+d[h].name);if("textarea_resize"!==d[h].name||
b.textareaTip){if(b.textareaTip&&(l=c(".b-textarea"),s.length)){var n=s.prev();if(n.length)if(n[0].offsetHeight<n[0].scrollHeight-1)l.off("focus",M),r=!0;else continue}"btn_new"===d[h].name&&(r=!0);if(s.length&&0!==s[0].offsetWidth&&0!==s[0].offsetHeight){l=d[h];var n=e,p=templates.tip(l);n?c(".tab-content_st_active").append(p):f.u.selectorCache("#main-wrapper").append(p);l=c(".b-tip_name_"+l.name);y(s,!1,l,l.find(".b-tip__inner"),!1,r);if(e){l.css("top",parseFloat(l.css("top"))-69);var m;l.length&&
(m=l[0].style.left);m&&l.css("left",parseFloat(m)-205)}s.on("click",c.proxy(G,{elem:l.find(".b-tip__close")}))}}else c(".b-textarea").bind("focus",M),x=[d[h]]}},x=[],M=function(b){b=this.getAttribute("data-tabid");a.trigger("showTips",{tips:x,inTab:!0,textareaTip:!0,tabId:b})},G=function(b){b=c(this);if(this.elem&&this.elem[0])this.elem.trigger("click");else{var d=this.getAttribute("data-name");d?b=b.closest(".b-tip"):d=b.find(".b-tip__close").attr("data-name");a.trigger("ajaxRequest",{param:{func:"tip",
elid:d},type:"get",outtype:"json",trfunc:"DoNothing",queue:"noqueue"});K=null;b.remove()}},J=function(a,c){b&&b.tips&&setTimeout(function(){L.apply(m,[{},{tips:b.tips}])},1500)},I=function(a,b){K&&(c(".b-tip").remove(),L.apply(m,[{},K]))};return{init:function(){a.on(n(),".hint","mouseover",v);a.on(n(),".i-text-content","mouseover",w);a.on(n(),".acthint","mouseover",E);a.bind("hintActiveShowHandler",E);a.on(n(),".overwidth","mouseover",v);a.on(n(),".hint","mouseout",C);a.on(n(),".i-text-content","mouseout",
C);a.on(n(),"#modal1-img li","mouseover",u);a.on(n(),"#modal1-img li","mouseout",C);a.on(n(),".acthint","mouseout",C);a.on(n(),".overwidth","mouseout",C);a.on(n(),"#hint","mouseover",A);a.on(n(),"#hint","mouseout",B);a.on(f.u.selectorCache("#main-wrapper"),".b-tip","click",G);a.bind("showHintMap",r);a.bind("forceShowHint",z);a.bind("hideHint",B);a.bind("stopShowHint",s);a.bind("tabLoading",B);a.bind("closeTabEvent",B);a.bind("ajaxResponseHint",F);a.on(".force-hint-flag",".force-hint","focus",k);a.on(".force-hint-flag",
".force-hint","blur",g);a.bind("verticalScroll",d);a.bind("showTips",L);a.bind("loadPage",J);a.bind("updateTipPosition",I)}}}(window,$,EventMgr,App);"use strict";
App.HorizontScroll=function(m,c,a,f){var n="",b=0,l=!1,p=null,t=null,h=function(){return c("#tab-cont")},e=function(){h().css("margin-left","0px")},k=function(){n=document.body.offsetWidth-205-108-50},g=function(a){a=a||m.event;clearInterval(t);document.onmouseup=w;p=setInterval(function(){v(10)},10);a.preventDefault&&a.preventDefault()},d=function(a){a=a||m.event;clearInterval(t);document.onmouseup=w;p=setInterval(function(){v(-10)},10);a.preventDefault&&a.preventDefault()},s=function(a){a=a||m.event;
v(10);a.preventDefault&&a.preventDefault()},r=function(a){a=a||m.event;v(10);a.preventDefault&&a.preventDefault()},u=function(a,b){var c=b.tabId;setTimeout(function(){z(c);c=null},50)},z=function(a){k();var d=h().width(),e=c("body");b=d-n;d>n?(e.addClass("tabscrollactive"),q(a)):(e.removeClass("tabscrollactive"),h().css("margin-left","0"))},q=function(a){clearInterval(t);if(void 0!==a){var b=f.Dom.byId(a);if(null!==b){a=b.offsetLeft;var b=b.offsetWidth+a,c;n<b?(c=b-n-parseInt(h().css("margin-left"),
10),t=setInterval(function(){var a=c,b=-parseInt(h().css("margin-left"),10);b>a?clearInterval(t):h().css("margin-left",-b-10+"px")},10)):25>a&&(c=-(parseInt(h().css("margin-left"),10)-a+25),t=setInterval(function(){var a=c,b=-parseInt(h().css("margin-left"),10);b<a||0<-b?clearInterval(t):h().css("margin-left",-b+10+"px")},10));b=null}}},v=function(a){b&&(a=parseInt(h().css("margin-left"),10)+a,0>a?0<b+a?h().css("margin-left",a+"px"):h().css("margin-left",-b+"px"):h().css("margin-left","0px"),l&&clearInterval(p))},
w=function(){l=!1;clearInterval(p)};return{init:function(){a.obind(c("#tab-mover-left"),"mousedown",g);a.obind(c("#tab-mover-right"),"mousedown",d);a.obind(c("#tab-mover-left"),"click",s);a.obind(c("#tab-mover-right"),"click",r);a.obind(c(m),"resize",k);a.bind("loadPage",k);a.bind("loadPage",e);a.bind("appended",u);a.bind("switchTab",u);a.bind("closeTab",u)},checkSizeFunc:z,move:v}}(window,$,EventMgr,App);"use strict";
App.HotKeys=function(m,c,a){var f=0,n={77:"M",65:"A",70:"F",88:"X",89:"Y",90:"Z",66:"B",67:"C",86:"V",78:"N",83:"S",68:"D",71:"G",72:"H",74:"J",75:"K",76:"L",81:"Q",87:"W",69:"E",82:"R",84:"T",85:"U",73:"I",79:"O",80:"P"},b={},l=function(h){h=h||m.event;var e=h.which||h.keyCode;b[e]=!0;f++;h.ctrlKey&&(b[17]=!0);h.shiftKey&&(b[16]=!0);if(27===e)a.trigger("escKeyUp",{e:h}),h.preventDefault();else if(13===e)a.trigger("enterKeyUp",{e:h});else if(b[17]&&b[16]&&b[77])a.trigger("comboCtrlShiftMKeyUp",{codeKey:e}),
h.preventDefault();else if(b[17]&&b[16]&&b[65])a.trigger("comboCtrlShiftAKeyUp",{codeKey:e}),h.preventDefault();else if(b[17]&&b[16]&&b[70])a.trigger("comboCtrlShiftFKeyUp",{codeKey:e}),h.preventDefault();else if(b[17]&&b[16]&&b[90])a.trigger("comboCtrlShiftZKeyUp",{codeKey:e}),h.preventDefault();else if(b[17]&&b[16]&&b[88])a.trigger("comboCtrlShiftXKeyUp",{codeKey:e}),h.preventDefault();else if(b[32])a.trigger("spaceKeyUp"),m.scrollTo(0,0);else if(b[38])a.trigger("upKeyUp",{codeKey:e,shiftKey:b[16],
ctrl:b[17]});else if(b[40])a.trigger("downKeyUp",{codeKey:e,shiftKey:b[16],ctrl:b[17]});else if(b[37])a.trigger("leftKeyUp",{codeKey:e,shift:b[16],ctrl:b[17]});else if(b[39])a.trigger("rightKeyUp",{codeKey:e,shift:b[16],ctrl:b[17]});else{h=null;if(n[e])h=n[e];else for(var k in b)if(n[k]){h=n[k];break}a.trigger("otherKeyUp",{keys:c.extend({},b),key:h,len:f,shift:b[16],ctrl:b[17]})}},p=function(a){var c=a.which||a.keyCode;b[0]&&(delete b[0],f--);b[c]&&(delete b[c],f--);a.ctrlKey&&(delete b[17],f--)},
t=function(a){b={};f=0};return{init:function(){a.obind(c(document),"keydown",l);a.obind(c(document),"keyup",p);a.obind(c(m),"focus",t)}}}(window,$,EventMgr);"use strict";App.KeepAlive=function(m,c,a){var f=function(){setInterval(function(){a.trigger("ajaxRequest",{url:pageInfo.url,param:{func:"keepalive"},trfunc:"DoNothing",queue:"noqueue"})},900001)};return{init:function(){a.bind("loadPage",f)}}}(window,$,EventMgr);"use strict";
App.List=function(m,c,a,f){var n=m.pageInfo,b="",l=function(){return c("#"+b+" .toolbar-button__item-img.tb-group").parent()},p=function(){return c("#"+b+" .toolbar-button__item-img.tb-not-group").parent()},t=function(){return c("#"+b+" .toolbar-button__item-img.tb-nosel").parent()},h=function(a){(a.ctrlKey||a.metaKey||a.shiftKey)&&a.preventDefault()},e=function(){c(".tab-content_st_active .itsearch").focus()},k=function(a,c){b="cont-"+c.tabId},g=function(b,c){var d=c.tabId;setTimeout(function(){a.trigger("bindHorizScrollControl",
{leftBtn:"#cont-"+d+" .toolbar__btn-move_dir_left",rightBtn:"#cont-"+d+" .toolbar__btn-move_dir_right",innerBox:"#cont-"+d+" .toolbar__inner",id:d,step:50})},50)},d=function(a){var b=c(".tab-content_st_active .list_table tbody tr"),d=c('.tab-content_st_active .list_table tbody tr.selected:not(".filtred")'),e=b.length,d=d.length,f;a=a||{};0<e&&(f=b[0],b[0].className.match("back-btn")&&(f=b[1],d+=1),d===e?(q.apply(f,[a]),q.apply(f,[a,!0])):(b.removeClass("last-selected"),b.removeClass("first-selected"),
c(b[e-1]).addClass("last-selected"),a.shiftKey=!0,q.apply(f,[a])));a.preventDefault&&a.preventDefault()},s=function(a,b,d){a=a?a.offsetTop:0;var e="ltwr-"+d;a&&(a=b?a+22:a-22,b=parseInt(c("#ltwr-"+d).css("height"),10),ScrollHandler.forceMoveSelectItem(e,a,b,22))},r=function(){var a=c(".tab-content_st_active .list_table tbody tr"),b=a[0];b&&b.className&&(b.className.match("back-btn")&&(b=a[1]),q.apply(b,[{}]))},u=function(a,b){if(!m.document.activeElement||!m.document.activeElement.getAttribute("type")){var d=
c(".tab-content_st_active");if("list"===d.attr("data-tab-type")){var e=c('.tab-content_st_active .list_table tbody tr.selected:not(".filtred")'),f;f=e.first().hasClass("first-selected")?e.last().prev():e.prev();f.length?(q.apply(f[0],[b]),s(f[0],!1,d.attr("data-tabid"))):e.length||r()}}},z=function(a,b){if(!m.document.activeElement||!m.document.activeElement.getAttribute("type")){var d=c(".tab-content_st_active");if("list"===d.attr("data-tab-type")){var e=c('.tab-content_st_active .list_table tbody tr.selected:not(".filtred")'),
f;f=e.first().hasClass("first-selected")?e.last().next():e.next();f.length?(q.apply(f[0],[b]),s(f[0],!0,d.attr("data-tabid"))):e.length||r()}}},q=function(a,d){var e=c(this),f=e.parents(".tab-content").attr("data-tabid"),g,h,k,l;a=a||m.event;b="cont-"+f;if(e.attr("data-elid")){if(a.target&&"A"===a.target.nodeName)return!0;"tab0"===f&&(b=e.parents(".block-table").attr("id"));g="";b&&(g="#"+b+" ");g=c(g+".content .list_table tbody tr");if(a.ctrlKey||a.metaKey||a.shiftKey||d)if(a.shiftKey){g.removeClass("selected");
l=c("#lt-"+f+" tr.last-selected");k=l.attr("id");h=c("#lt-"+f+" tr.first-selected").attr("id");h||(h=k,l.addClass("first-selected"));k=e.attr("id");if(void 0===h)return;h=parseInt(h.replace("i-",""),10);k=parseInt(k.replace("i-",""),10);h>k?f=k:(f=h,h=k);k=c("tr#i-"+f);for(f;f<=h;f++)k.addClass("selected"),k=k.next();g.removeClass("last-selected");e.addClass("last-selected");if(document.selection)"none"!==document.selection.type.toLowerCase()&&document.selection.empty();else if(m.getSelection){e=
m.getSelection();try{e.collapseToStart()}catch(s){}}}else if(g.removeClass("last-selected").removeClass("first-selected"),e.toggleClass("selected").addClass("last-selected"),document.selection)"none"!==document.selection.type.toLowerCase()&&document.selection.empty();else{if(m.getSelection){e=m.getSelection();try{e.collapseToStart()}catch(r){}}}else g.removeClass("selected").removeClass("last-selected").removeClass("first-selected"),e.addClass("selected").addClass("last-selected");w(b);a.preventDefault&&
a.preventDefault()}},v=function(a,b){b.tabId&&w("cont-"+b.tabId)},w=function(b){var d,e;e=c("#"+b+' tr.selected:not(".filtred")');d=e.length;0===d?a.trigger("listUnSelect",{tabId:b,len:d,selectedRows:e}):1<d?a.trigger("listMultiSelect",{tabId:b,len:d,selectedRows:e}):a.trigger("listSelect",{tabId:b,len:d,selectedRows:e});e=c(".toolbtnShow").parent();e.hasClass("active")?e.switchClass("notActive","active").attr("data-state","disabled"):e.attr("data-state",null);e=c("#"+b+' tr.selected.toolbtn-show:not(".filtred")');
0<e.length&&a.trigger("showToolBtn",{toolBtnShow:e,len:d});d=c("#"+b+' tr.selected.toolbtn-hide:not(".filtred")');0<d.length&&a.trigger("hideToolBtn",{toolBtnHide:d});b=c("#"+b+' tr.selected.toolbtn-remove:not(".filtred")');if(0<b.length)for(d=b.length;d--;)e=b[d].getAttribute("data-remove"),e=String(e).replace(/,\s+$/,""),c(e).parent().addClass("removed").removeClass("active")},y=function(a,b){var d=b.tabId,e,g;if(f.Global.warning){for(e in f.Global.warning)g=c("#cont-"+d+' [data-elid="'+f.Common.CSSEscape(e)+
'"]'),q.apply(g,[{},!0]);f.Global.warning=null}if(f.Global.selid){for(e=f.Global.selid.length;e--;)g=c("#cont-"+d+' [data-elid="'+f.Common.CSSEscape(f.Global.selid[e])+'"]'),q.apply(g,[{},!0]);f.Global.selid=void 0}},D=function(a,b){var c=b.tabId;f.Global.scrollTop&&setTimeout(function(){ScrollHandler.scrollTo("ltwr-"+c,f.Global.scrollTop,!0,!0);f.Global.scrollTop=void 0},10)},E=function(a,b){for(var d=b.toolBtnHide,e=d.length,f=e,g,h={},k,l;e--;){g=d[e].getAttribute("data-hide");g=String(g).replace(/,\s+$/,
"");k=g.split(", ");l={};for(var s=0,r=k.length;s<r;s++)g=k[s],l[g]||(h[g]||(h[g]=0),h[g]+=1,l[g]=!0)}for(var n in h)h[n]===f&&(d=c(n).parent(),d.hasClass("active")&&d.switchClass("notActive","active").attr("data-state","disabled"))},F=function(a,b){var d,e,f={},g=b.len,h;b.toolBtnShow.each(function(){h=this.getAttribute("data-show");if(1<g)for(d=h.split(","),e=d.length,h="";e--;)" "!==d[e]&&""!==d[e]&&(f[d[e]]?f[d[e]]++:f[d[e]]=1);else h=String(h).replace(/,\s+$/,""),c(h).parent().switchClass("active",
"notActive").attr("data-state",null)});if(1<g)for(var k in f)h=k+".tb-group, "+k+".tb-inert",c(h).parent().switchClass("active","notActive").attr("data-state",null)},A=function(a,c){b=c?c.tabId?c.tabId:b:b;p().switchClass("notActive","active").removeClass("removed").attr("data-state","noselect");l().switchClass("active","notActive").removeClass("removed").attr("data-state",null);t().switchClass("notActive","active").attr("data-state","noselect")},C=function(a,d){b=d?d.tabId?d.tabId:b:b;c("#"+b+" .toolbar-button").switchClass("active",
"notActive").removeClass("removed").attr("data-state",null)},B=function(b,d){var e=[],f=[],g=d.invar,h=c("#cont-"+d.invar.tabId),k=h.find(".toolbar"),l=filterXSS.friendlyAttrValue(k.attr("data-plid")||""),k=k.attr("data-convert"),s=d.triggerAction||"listSelectedData",r=0,p=d.classes,q=d.__content;h.find('tr.selected:not(".filtred")').each(function(){var a=this.getAttribute("data-index");if(q[a]){if(q[a]._ovhide){var b;a:{b=String(q[a]._ovhide).split(",");for(var c=b.length,d;c--;)if(b[c]&&" "!==b[c]&&
(d=b[c].replace("#",""),String(p).match(d))){b=!0;break a}b=!1}if(b)return!0}if(q[a]._ovshow){a:if(a=String(q[a]._ovshow).split(","),b=a.length,p.match("toolbtnShow")){for(;b--;)if(a[b]&&" "!==a[b]&&(c=a[b].replace(".",""),String(p).match(c))){a=!0;break a}a=!1}else a=!0;if(!a)return!0}}10>r&&(a=String(this.getAttribute("data-elkeyname")),50<a.length&&(a=a.substring(0,50),a+="..."),e.push('<span class="b-text-wrapper">'+m.htmlEncode(a)+"</span>"));f.push(String(this.getAttribute("data-elid")).replace(/,\s/g,
", , "));r++});h=e.join(", ");f=f.join(", ");10<r&&(h+=n.totalelem.replace(/__s__/,r));k&&(g.params.tconvert=k);g.params.elid=f;g.params.plid=l||"";g.rows=h;a.trigger(s,g)},K=function(a,c){b=c?c.tabId?c.tabId:b:b;p().switchClass("notActive","active").removeClass("removed").attr("data-state","noselect");l().switchClass("notActive","active").removeClass("removed").attr("data-state","noselect");t().switchClass("active","notActive").attr("data-state",null)},L=function(a,b){if(b.__headers&&b.__content){for(var d=
b.colName,e=b.__content,f=b.index,g=b.tabId,h=e.length,k=0;h--;)e[h][d]&&(k+=e[h][d].v-0);c("#cont-"+g).find(".sb-result_index_"+f).html(k)}},x=function(a,b){if(b.__headers&&b.__content){var d=b.tabId,e=b.len,g=b.__headers,h=b.__content,k=g.length,l,s,r,p,m,q=b.selectedRows,u,t,v={},z,w;p=c("#"+d+" .sb-result_index_0");m=c("#"+d+" .sb-selected_index_0");if(0!==e)p.removeClass("sb-result_st_active"),p=m.addClass("sb-selected_st_active").html().replace(/\d{1,100}/,e),m.html(p),q.each(function(a){t=
this.getAttribute("data-index");for(l=k;l--;){z=g[l].type;if(g[l].total&&h[t]&&h[t][g[l].name])if("data"===z||"money"===z)v[l]=G(v[l],h[t][g[l].name]);else if("indicator"===z){var b=v,p=l,m=v[l],q=h[t][g[l].name],m=m||{a:0,b:0,c:0};q.u=q.u_orig||q.u;q.l=q.l_orig||q.l;m.a=12<m.a.length||12<q.u.length?I(m.a,q.u):parseInt(m.a,10)+parseInt(q.u,10);m.b=12<m.b.length||12<q.l.length?I(m.b,q.l):parseInt(m.b,10)+parseInt(q.l,10);isNaN(m.a)&&(m.a="-");isNaN(m.b)&&(m.b="-");m.c=m.a+" / "+m.b;b[p]=m}else if("prop"===
z){b=v;p=l;m=v[l];void 0===m&&(m=[]);var x=h[t][g[l].name].psp,A=q=void 0;if(x)for(q=x.split(":"),A=q.length,x=0;x<A;x++)m[x]=parseInt(m[x]?m[x]:0,10)+parseInt(q[x],10);else m=void 0;b[p]=m}if(a===e-1&&g[l].total)if(s=c("#"+d+" .sb-result_index_"+l).removeClass("sb-result_st_active"),r=c("#"+d+" .sb-selected_index_"+l).addClass("sb-selected_st_active"),"data"===z||"money"===z){w="";for(var y in v[l])"TOTAL_FINAL"!==y&&(""!==w&&(w+="; "),w="money"===z?w+(f.Tabs.moneyFormat(v[l][y])+" "+y):w+(v[l][y]+
" "+y),g[l].convert&&"money"!==g[l].convert&&M(g[l].convert,w,r));r.html(n.total+": "+w)}else"indicator"===z?g[l].convert?M(g[l].convert,v[l],r):r.html(n.total+": "+v[l].c):"prop"===z&&(u=s.html(),r.html(R(v[l],u)))}});else for(p.addClass("sb-result_st_active"),m.removeClass("sb-selected_st_active"),l=k;l--;)g[l].total&&(c("#"+d+" .sb-result_index_"+l).addClass("sb-result_st_active"),c("#"+d+" .sb-selected_index_"+l).removeClass("sb-selected_st_active"))}},M=function(b,c,d){d={$sbs:d};c&&void 0!==
c.a&&(d.__value=c,d.__name=b,c.a_converted?(c=c.b,d.__current="b"):(c=c.a,d.__current="a"));a.trigger("ajaxRequest",{param:{func:"convert",name:b,value:c},invar:d,type:"get",outtype:"json",trfunc:"updateTotalWithConvert",failfunc:"DoNothing",queue:"multiload"})},G=function(a,b){if(b.total&&"ignore"===b.total)return a;if(b.total&&"final"===b.total)return a={TOTAL_FINAL:!0,"":b.orig||b.v};if(a&&a.TOTAL_FINAL)return a;var c,d=0;c=0;var e;a=a||{};b=b.orig||b.v;e=b.replace(/[0-9\s\.,-]+/,"");b=b.replace(e,
"").replace(/\s/g,"");a[e]&&12<a[e].length||12<b.length?a[e]=a[e]?I(a[e],b):b:(a[e]?(c=J(a[e]),d=J(b),c=c>d?c:d):c=J(b),""===b&&(b="0"),a[e]=a[e]?parseFloat(a[e])+parseFloat(b):parseFloat(b));a[e]&&(a[e]=a[e].toFixed?a[e].toFixed(c):a[e]);return a},J=function(a){return(a=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,a[1]?a[1].length:0,-(a[2]?+a[2]:0)):0},I=function(a,b){var d=function(a,b,d){a=String(c.trim(a));b=String(c.trim(b));var e=a.split("").reverse(),f=b.split("").reverse(),
g=[],h=null,k=0;d&&(k=1);d=e.length;var l=f.length,s=0,r="";d>l?(s=l,h=a):(s=d,h=b);for(a=0;a<s;a++)b=parseInt(e[a],10)+parseInt(f[a],10)+k,10<=b?(b-=10,k=1):k=0,g.push(b);d===l?1===k&&g.push(1):(r=h.substr(0,h.length-a-1),g.push(parseInt(h[h.length-a-1],10)+k));g.push(r);g.reverse();return g.join("")},e=function(a,b){var c="",d;for(d=0;d<b;d++)c+="0";return a+c},f="";if(-1!==String(a).indexOf(".")||-1!==String(b).indexOf(".")){var g=a.split("."),h=b.split("."),k="",l="";void 0===g[1]?k=h[1]:void 0===
h[1]?k=g[1]:(k=g[1].length,l=h[1].length,f=0,k>l?(f=k,h[1]=e(h[1],k-l)):(f=l,g[1]=e(g[1],l-k)),k=d(g[1],h[1]),l=k.length>f?d(g[0],h[0],!0):d(g[0],h[0]),f=l+"."+k)}else f=d(a,b);return f},R=function(a,b){if(!a)return"";for(var c=b.split(","),d=0;d<a.length&&void 0!==c[d];d++)c[d]=c[d].replace(/>\d+/,">"+a[d]),c[d]=0===a[d]-0?c[d].replace(/class=\"default\"/,'class="no"'):c[d].replace(/class=\"no\"/,'class="default"');return c.join(", ")},N=!1,P,O=!1,S,U,V,W=function(a){if(!a.touches||1===a.touches.length&&
!N)O=!0,P=a.originalEvent.changedTouches[0],S=P.pageX,U=P.pageY,V=this,document.ontouchmove=Y,document.ontouchend=T,document.ontouchcancel=T},Y=function(a){var b=a.changedTouches[0];(N||O)&&b[0]!==P&&(Math.abs(S-b.pageX)>=Math.abs(U-b.pageY)&&(a.preventDefault(),N=!0),O=!1,N&&(c(V).trigger("click"),c(V).trigger("dblclick")))},T=function(a){document.ontouchmove=null;document.ontouchend=null;document.ontouchcancel=null;N=!1;P=null;O=!1;V=U=S=null},ba=function(a,b){var c=b.$sbs,d=b.convertValue;if(b.__value&&
b.__current){if("a"===b.__current){b.__value.a_converted=d;M(b.__name,b.__value,b.$sbs);return}"b"===b.__current&&(d=b.__value.a_converted+" / "+d)}c.html(n.total+": "+d)};return{dataCalc:G,init:function(){a.bind("clickedGroupItem",B);a.bind("listMultiSelect, mapMultiSelect",A);a.bind("listSelect, mapSelect",C);a.bind("listUnSelect, mapUnSelect",K);a.bind("switchTab",k);a.bind("listMultiSelect,listSelect,listLiveFound,listUnSelect",x);a.on("#content",".content .list_table tbody tr","click",q);a.on("#content",
"table td","mousedown",h);a.bind("hideToolBtn",E);a.bind("showToolBtn",F);a.bind("appendList",y);a.bind("appendList",g);a.bind("updatedTableHeight",D);a.bind("comboCtrlShiftAKeyUp",d);a.on("#main-wrapper","a.select-all","click",d);a.bind("comboCtrlShiftFKeyUp",e);a.bind("updateSelected",v);a.on("#main-wrapper",".list_table tr","touchstart",W);a.bind("updateTotalList",L);a.bind("updateTotalWithConvert",ba);a.bind("upKeyUp",u);a.bind("downKeyUp",z)}}}(window,$,EventMgr,App);"use strict";
App.ListSorting=function(m,c,a,f){var n=function(a,b){return b.number===a.number?0:b.number<a.number?1:-1},b=function(a,b){return b.data===a.data?0:b.data<a.data?1:-1},l=function(a,b){if(!a.data)return-1;if(!b.data)return 1;a=a.data.replace(/[A-Za-z!,@,#,$,%,^,&,*,?,_,~"'/=<>|]+\-/g,"").replace(/[A-Za-z!,@,#,$,%,^,&,*,?,_,~"'/=<>|]/g,"").replace(/[-]+\s/g,"").replace(/-{2,}/,"-");b=b.data.replace(/[A-Za-z!,@,#,$,%,^,&,*,?,_,~"'/=<>|]+\-/g,"").replace(/[A-Za-z!,@,#,$,%,^,&,*,?,_,~"'/=<>|]/g,"").replace(/[-]+\s/g,
"").replace(/-{2,}/,"-");return parseFloat(a)-parseFloat(b)},p=function(a){if("undefined"===typeof m.getSelection||""===m.getSelection().toString()){var h=this.getAttribute("data-sorttype");a=this.getAttribute("data-order");var g=this.getAttribute("data-coln"),d=c(this).parents(".block-table").attr("id"),s=document.getElementById("lt-"+d);if(null!==s){var s=s.tBodies[0].rows,r=s.length,n,p,q,t=[],w={},y,w=0;a=a&&"desc"!==a?!1:!0;for(y=0;y<r;y++){w={row:[]};for(n=0;n<s[y].cells.length;n++)w.row.push(s[y].cells[n].innerHTML);
n=c(s[y]);p=s[y].attributes;q=p.length;for(w.attrs=[];q--;)"id"!==p[q].nodeName&&(w.attrs.push({name:p[q].nodeName,value:p[q].nodeValue}),s[y].removeAttribute(p[q].nodeName));if(p=n.find(".data-wrapper")[g])n=null,q=c(p).find(".b-list__table-col-content"),q.length&&(n=q[0].getAttribute("data-orig")),w.data=n?n:q.length?q.html():p.innerHTML;t.push(w)}"alpha"===h?t.sort(b):"digit"===h&&t.sort(l);a||t.reverse();for(y=0;y<r;y++){w=s[y].cells.length;for(n=0;n<w;n++)f.u.replaceHtml(s[y].cells[n],t[y].row[n]);
if(t[y].attrs)for(p=t[y].attrs,q=p.length;q--;)s[y].setAttribute(p[q].name,p[q].value);0!==y%2?s[y].className.match(/even/)||(s[y].className+=" even"):s[y].className=s[y].className.replace(/even/,"")}h=document.getElementById("lt-"+d);null!==h&&(g=h.tHead.rows[0].cells[g],g=c(g),c("#lt-"+d+" .triangle").removeClass("triangl-bot").removeClass("triangl-top"),a?(g.find(".triangle").addClass("triangl-bot"),g.find(".ovf").attr("data-order","asc")):(g.find(".triangle").addClass("triangl-top"),g.find(".ovf").attr("data-order",
"desc")))}}},t=function(b,f,g){var d=b.getAttribute("sorting"),h=b.getAttribute("data-colname"),l={},m,p,q,t=[],w,y="";if(f){m=c(b).parents(".block-table");var D=m.attr("data-block-name");p=q=m.attr("id");b=m.attr("data-block-pnum");l.dashboard=D;m=m.attr("data-block-func")}else p=c(b).parents(".content").attr("data-tabid"),b=c("#cont-"+p).attr("data-pnum");if(g)for(c("#sort_table-"+p).find(".td_sort .ovf").each(function(){w=this.getAttribute("sorting");this.getAttribute("data-colname");w&&t.push({name:this.getAttribute("data-colname"),
value:w,number:String(w).charAt(1)})}),t.sort(n),g=0,d=t.length;g<d;g++)0!==g&&(y+=","),y+=t[g].value.charAt(0)+t[g].name;else d&&(h=d.charAt(0)+h);l.p_current=y;l.p_num=b;l.p_col=h;f?(l.func=m,a.trigger("ajaxRequest",{param:l,invar:{blockId:q},type:"get",outtype:"json",trfunc:"ajaxResponseForDashboard",failfunc:"failedAjaxResponseForDashboard",queue:"noqueue"})):a.trigger("reloadTab",{tabId:p,param:l})},h=function(a,b){if("undefined"===typeof m.getSelection||""===m.getSelection().toString()){var f=
!1;0<c(this).parents(".block-table").length&&(f=!0);t(this,f,a.ctrlKey||a.metaKey);blockEvent(a);a.preventDefault()}};return{init:function(){a.on("#main-wrapper",".td_sort .ovf","click",h);a.on("#main-wrapper",".td_client_sort .ovf","click",p)}}}(window,$,EventMgr,App);"use strict";
App.LiveListFilter=function(m,c,a,f){var n=f.Dom,b=m.pageInfo,l={},p=null,t=2,h=function(){var c=this.getAttribute("data-tabid");n.byId("_pager-slist-"+c)&&a.trigger("forceShowHint",{elem:this,hint:b.messages.hintLivefilter})},e=function(b){a.trigger("hideHint")},k=function(a){var b=this.getAttribute("data-tabid"),b=n.byId(b+"-search");b.value="";d.apply(b,[]);a.preventDefault()},g=!1,d=function(b){function d(b,f,k){var r=l[k],n=r.length;if(b.length<t){for(f=0;f<n;f++)s(r[f],!1);f=c("#lt-"+k+" tbody tr.ifound");
b=f.length;a.trigger("listLiveFound",{selectedRows:f,tabId:"cont-"+k,len:b})}else{var m=f+10;f;for(h=n;f<h&&f<m;f++){var n=r[f],q=b,v=n.text.toLowerCase(),z=q.toLowerCase();(v=-1!==v.indexOf(z))&&!g||!v&&g?s(n,q):n.isVisible&&(n.tr.removeClass("ifound"),n.tr.addClass("filtred"),n.tr.removeClass("selected"),n.isVisible=!1,p.insertRow(p.rows.length).className="fake-row",u(n))}r=g?String(e.val()).substring(1)!==b:e.val()!==b;m=f<h;!r&&f&&h&&m?d(b,f,k):(f=c("#lt-"+k+" tbody tr.ifound"),b=f.length,a.trigger("listLiveFound",
{selectedRows:f,tabId:"cont-"+k,len:b}),c("tr.ifound").removeClass("lf-odd"),c("tr.ifound:odd").addClass("lf-odd"))}}b=this.getAttribute("data-tabid");var e=c(this),f=c.trim(this.value),h=f.length,k=c("#cont-"+b);if(g="-"===String(f).charAt(0)?!0:!1)f=f.substring(1),h-=1;p=n.byId("lt-"+b);0<h?e.parent().addClass("livesearch"):(e.parent().removeClass("livesearch"),k.find(".list_table tr").removeClass("filtred").removeClass("ifound"));h>=t?k.addClass("livesearch-active"):(k.removeClass("livesearch-active"),
k.find(".list_table tr").removeClass("filtred").removeClass("ifound"));0===h&&a.trigger("updateSelected",{tabId:b});d(f,0,b);f.length>=t&&ScrollHandler.scrollTo("ltwr-"+b,0);a.trigger("updateSelected",{tabId:b})},s=function(a,b){a.isVisible||(a.tr.removeClass("filtred"),a.tr.removeClass("selected"),a.isVisible=!0,p.deleteRow(p.rows.length-1));a.tr.addClass("ifound");b?r(a,b):u(a)},r=function(a,b){a.isHighLight&&b&&u(a);try{var d=b?RegExp("("+f.u.escapeRegExp(b)+")","ig"):!1;a.isHighLight=!0;a.data.each(function(a){a=
c(this);var b=m.filterXSS(c.trim(a.html())),e;e=b.replace(d,'<span class="live-search-highlighted">$1</span>');e!==b&&a.html(e)})}catch(e){console.log("e",e)}},u=function(a){a.data.find(".live-search-highlighted").each(function(b){b=c(this);b.replaceWith(b.text());a.isHighLight=!1})},z=function(a,b){var d=b.tabId,e=[],f,g,h;c("#lt-"+d+" tbody tr").each(function(){f=c(this);g=f.find(".b-list__table-col-content");h=function(){var a=[],b;g.each(function(){b=c.trim(c(this).text());a.push(b)});return a.join("||")};
e.push({tr:f,isVisible:!0,text:h(),isHighLight:!1,data:g})});l[d]=e},q=function(a,b){var c=b.tabId;l[c]=null;delete l[c]};return{init:function(){a.on("#main-wrapper",".itsearch","keyup",d);a.on("#main-wrapper",".itsearch","focus",h);a.on("#main-wrapper",".itsearch","blur",e);a.bind("appendList",z);a.bind("forceListIndex",z);a.bind("closeTabEvent",q);a.on("#main-wrapper",".close_tsearch a","click",k)}}}(window,$,EventMgr,App);"use strict";
App.LoadScripts=function(m,c,a,f){var n=function(){l(pageInfo.host+pageInfo.theme+"AnyChart.js",b,"");l(pageInfo.host+pageInfo.theme+"AnyChartHTML5.js",b,"")},b=function h(){void 0!==m.AnyChart&&void 0!==m.anychart.render?(AnyChart.renderingType=anychart.RenderingType.SVG_ONLY,a.trigger("runQueue")):setTimeout(function(){h()},250)},l=function(a,b,c){var f=document.getElementsByTagName("script")[0],d=document.createElement("script");d.onreadystatechange=function(){if("loaded"===d.readyState||"complete"===
d.readyState)d.onreadystatechange=null,b(c),a=c=null};d.onload=function(){b(c);a=c=null};d.src=a;f.parentNode.insertBefore(d,f)},p=function(a,b){f.Global.anychartXML=b};return{init:function(){a.bind("gotAnyChartXML",p);a.bind("required",l);a.one("loadACHTML5",n)}}}(window,$,EventMgr,App);"use strict";
App.LocalStorage=function(m,c,a){var f=m.pageInfo,n=f.product+"_5_"+f.user+"_"+f.hostName+"_"+f.lang+f.project,b=function(a,b){b&&b.id&&localStorage.setItem(b.id,JSON.stringify(b.data))},l=function(a,b){},p=function(a,b){b&&b.id&&localStorage.removeItem(b.id)},t=function(a,b){return a[0]&&b[0]?a[0].sIndex-b[0].sIndex:0},h=function(a,b){var c=b.tabs,e=b.forceActive,f={},g,h,k,l,m;f.tabs=[];for(g in c)if("parent"===c[g].hType&&"tab0"!==g&&!0!==c[g].pin){h=[];m={sIndex:c[g].sIndex,status:c[g].status,
title:c[g].title,params:c[g].paramObjAll,menuFunc:c[g].menuFunc,help:c[g].help};e&&c[g].beforeRequest&&(m.beforeRequest=c[g].beforeRequest);h.push(m);k=!0;for(l=g;k;)c[l].child&&void 0!==c[l]?(l=c[l].child,m={status:e?c[l].forceActive?1:0:c[l].status,title:c[l].title,params:c[l].paramObjAll,help:c[l].help},e&&c[l].beforeRequest&&(m.beforeRequest=c[l].beforeRequest),h.push(m)):k=!1;f.tabs.push(h)}f.tabs.sort(t);c=JSON.stringify(f);"undefined"!==typeof localStorage&&(localStorage.setItem(n,c),localStorage.setItem(n+
"_time",(new Date).getTime()))},e=function(){var b,c;b=App.u.parseParams("func="+f.startform);c=App.u.parseParams("func="+f.startpage);"dashboard"!==f.startpage?(b=f.startform?'{"tabs": [[{"status": 1, "title": "", "params": '+JSON.stringify(c)+'}, {"status": 1, "title": "", "params": '+JSON.stringify(b)+"}]]}":'{ "tabs": [[{"status": 1, "title": "", "params": '+JSON.stringify(c)+"}]]}",a.trigger("readStorage",{tabs:b})):f.startform?(b='{"tabs": [[{"status": 1, "title": "", "params": '+JSON.stringify(b)+
"}]]}",a.trigger("readStorage",{tabs:b})):(b=(new Date).getTime(),localStorage.getItem(n)&&(c=localStorage.getItem(n+"_time"),6048E5<b-c||f.forgetTabs?(localStorage.removeItem(n),localStorage.removeItem(n+"_time")):(b=localStorage.getItem(n),a.trigger("readStorage",{tabs:b}))))},k=function(){var a=localStorage.getItem(n+"_gs");if(a=JSON.parse(a))for(var b in a)f[b]=a[b]},g=function(a,b){var c=localStorage.getItem(n+"_gs"),c=JSON.parse(c)||{},e=b.key,g=b.value;c[e]=g;f[e]=g;localStorage.setItem(n+
"_gs",JSON.stringify(c))};return{init:function(){m.localStorage&&(a.bind("changedTabs",h),a.bind("loadPage",e),a.bind("writeDatatoLocalStorage",b),a.bind("readDatafromLocalStorage",l),a.bind("removeDatafromLocalStorage",p),a.bind("loadPage",k),a.bind("setGlobalSetting",g))}}}(window,$,EventMgr);"use strict";
_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"===typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};
App.MultiLoadTabs=function(m,c,a){var f=m.pageInfo,n=function(b,f){var h=f.tabs,e;try{e=c.parseJSON(h),a.trigger("multiLoadTab",{tabs:e.tabs})}catch(k){}},b=function(b,c){var h=50,e,k=c.tabs,g=c.isNotInit,d,l="loginform"===App.u.parseParams(m.location.search).sfrom&&!(""!==f.startform||"dashboard"!==f.startpage);if(f.tabPin&&1<f.tabPin.length&&!g)for(g=1,e=f.tabPin.length;g<e;g++)k.unshift([f.tabPin[g]]);if(null!==k)for(d in k)g=k[d][0],e=k[d].length,h+=50,1<e?(k[d].splice(0,1),e=k[d]):e=null,"object"===
_typeof(g.params)&&(g.beforeRequest&&a.trigger("ajaxRequest",{param:App.u.parseParams(g.beforeRequest),trfunc:"DoNothing",queue:"multiload"}),setTimeout(function(b,c){return function(){1!==c.status||l?c.title&&a.trigger("ajaxResponse",{newtab:!0,children:b,ignErr:!0,pin:c.pin,__src_func:c.menuFunc,pinIcon:c.pinIcon,type:"empty",title:c.title,urlObj:c.params}):a.trigger("ajaxRequest",{param:c.params,noesc:""!==f.startform,invar:{newtab:!0,children:b,ignErr:!0,__src_func:c.menuFunc},type:"get",outtype:"json",
trfunc:"ajaxResponse",queue:"multiload"});b=null}}(e,g),h));c=null},l=function(b,c){var h=c.parent,e=c.children,k=e[0],g="loginform"===App.u.parseParams(m.location.search).sfrom&&!(""!==f.startform||"dashboard"!==f.startpage),e=1<e.length?e.splice(1,1):null;k.beforeRequest&&a.trigger("ajaxRequest",{param:App.u.parseParams(k.beforeRequest),trfunc:"DoNothing",queue:"multiload"});setTimeout(function(b,c,e){return function(){1!==e.status||g?a.trigger("ajaxResponse",{parent:c,children:b,ignErr:!0,help:e.help,
type:"empty",title:e.title,pinIcon:e.pinIcon,urlObj:e.params}):(a.trigger("ajaxRequest",{param:e.params,invar:{parent:c,children:b,ignErr:!0,help:e.help},type:"get",noesc:""!==f.startform,outtype:"json",trfunc:"ajaxResponse",queue:"multiload"}),a.trigger("tabLoading",{tabId:c}))}}(e,h,k),50)};return{init:function(){a.bind("readStorage",n);a.bind("loadChildren",l);a.bind("multiLoadTab",b)}}}(window,$,EventMgr);"use strict";
App.ProgressBar=function(m,c,a,f,n){function b(a){var b=f.Dom.byId("cont-"+a);f.Dom.removeClass(b,"tab-content__progressbar_show");b=f.Dom.byId("cont-"+a+"-progressbar");if(null!==b){b.style.display="none";b.innerHTML="";a=f.Dom.byId("cont-"+a+"-progressbar-default");if(null===a)return!1;"none"===a.style.display&&(a.style.display=null)}}function l(b,c){("wait"===c.progresstype||c.invar&&"wait"===c.invar.progresstype)&&setTimeout(function(){a.trigger("ajaxRequest",{param:c.param,invar:c.invar,type:"get",
outtype:"json",trfunc:"progressBarResponse",failfunc:"progressBarResponseFail",queue:"noqueue"})},1500)}function p(c,d){var f=d.start,h=d.progresstype,l="",m=!1,m=d.param.elid;if(""!==f&&void 0!==f){var p=d.done,v=d.now,w=d.steps,y=d.comment,D=d.param,E="",l=d.tabId,F=0;""!==p&&""!==w&&(F=Math.round(100*(p/w)));""!==p&&""!==w&&"notime"!==h&&(w-=p,0!==w&&0!==p&&Math.round((v-f)/p*w));f=0.98*F;6>F?(F=".",E="blue-color"):(100<F&&(F=100,f=0.98*F),F+="%");f=n.progressBar({tabId:l,per:F,width:f,left:"",
comment:y,colorClass:E});(m=t(l,m,f))&&setTimeout(function(){a.trigger("ajaxRequest",{param:D,invar:{tabId:l,param:D,progresstype:h},type:"get",outtype:"json",trfunc:"progressBarResponse",failfunc:"progressBarResponseFail",queue:"noqueue"});h=l=D=null},1E3)}else l=d.tabId,b(l);d.ok&&"wait"===h&&d.param&&d.param.elid&&(k[d.param.elid]=!0,e[d.param.elid]&&(e[d.param.elid].progresstype=null,e[d.param.elid].progressok?(e[d.param.elid].__dataSource.rp=["progressok"],e[d.param.elid].__dataSource.rp=["progressok"],
a.trigger("tabLoading",{tabId:d.tabId}),a.trigger("ajaxRequest",e[d.param.elid].__dataSource)):a.trigger("ajaxFormResponse",e[d.param.elid]),delete e[d.param.elid]))}function t(a,b,c){b=f.Dom.byId(b);var e=f.Dom.byId("cont-"+a);if(!b)return!1;f.Dom.addClass(e,"tab-content__progressbar_show");b=f.Dom.byId("cont-"+a+"-progressbar");if(null===b)return!1;b.style.display="block";b.innerHTML=c;a=f.Dom.byId("cont-"+a+"-progressbar-default");if(null===a)return!1;a.style.display="none";return!0}function h(b,
c){k[c.progressid]?(c.progresstype=null,a.trigger("ajaxFormResponse",c)):c&&c.progressid&&(e[c.progressid]=c)}var e={},k={};return{init:function(){a.bind("progressBarSaveState",h);a.bind("progressBarResponse",p);a.bind("progressBarResponseFail",l)}}}(window,$,EventMgr,App,templates);"use strict";
App.SendFormWithFiles=function(m,c,a,f){var n=function(b){b=this.getAttribute("data-id");a.trigger("ajaxRequestAbort",{id:b})},b=function(a,b){m.FormData?l(b):p(b)},l=function(b){var f=new FormData,g=b.param,d=b.tabId;b=b.options;var h=(new Date).getTime();t(d);for(var l in g)f.append(l,g[l]);c("#frm-"+d+' input[type="file"]').each(function(){if(this.files){var a=this.files.length,b=this.name;for(1<a&&(b+="[]");a--;)f.append(b,this.files[a])}});b.formData=f;b.reqType="xhr";b.id=h;var g=c("#"+d+"-progressbar"),
n=g.find(".b-progressbar__loader"),g=g.find(".b-progressbar__btn-wr");n.removeClass("b-progressbar__loader_type_static");g.length&&g.remove();b.progressCb=function(a){if(a.lengthComputable){a=Math.round(100*a.loaded/a.total);var b=0.98*a;n.hasClass("b-progressbar__loader_type_static")||(c("#"+d+"-progressbar").addClass("b-progressbar_type_withbtn"),n.removeClass("b-progressbar__loader_type_animate"),n.addClass("b-progressbar__loader_type_static"),c("#"+d+"-progressbar .b-progressbar__inner").append('<div class="b-progressbar__btn-wr"><div class="b-button b-button_style_small i-button-form-send-cancel" data-id="'+
h+'">'+pageInfo.msgCancel+"</div></div>"),c("#"+d+"-progressbar .b-progressbar__comment").html(m.pageInfo.formSending));n.css("width",b+"%");7<a?n.html(a+"%"):n.html("")}};a.trigger("ajaxRequest",b);a.trigger("tabLoading",{tabId:d})},p=function(b){var f=b.tabId,g=b.parent,d="iframe-"+Math.round((new Date).getTime()/1E3),l;t(f);c("body").after('<iframe width="0" height="0" style="display:none;" name="'+d+'" id="'+d+'"></iframe>');l=document["frm-"+f].getAttribute("action");c("#form-wrapper-"+f).wrap(function(){return'<form action="'+
l+'" id="form-'+d+'" method="POST" enctype="multipart/form-data" target="'+d+'"/>'});f=c("#form-"+d);if(b.addParams)for(var n in b.addParams)f.append('<input type="hidden" name="'+n+'" value="'+b.addParams[n]+'"/>');c("#"+d).load(function(){h(this,d,b,g)});f.submit();a.trigger("showLoader")},t=function(a){c("#form-wrapper-"+a).find('.l-form__row_hidden_yes input[type="file"]').each(function(){var a=c(this);a.wrap("<form>").closest("form").get(0).reset();a.unwrap()})},h=function(b,f,g,d){var h={};
b=b.contentWindow.document.body.innerHTML;var l=g.tabId;try{b=b.replace(/\\'/g,"'");b=b.replace(/<![\w\s\"-\/]*>/g,"");b=b.replace(/(<([^>]+)>)/g,"");if(b.match(/^long\/+/)){a.trigger("ajaxRequest",{url:pageInfo.host+b,invar:{iType:"replace",dataSaved:!0,tabId:l,targetTabId:l,parent:d},type:"post",outtype:"json",trfunc:"ajaxFormResponse",queue:"noqueue",failfunc:"failFormAjaxResponse"});return}h=c.parseJSON(c.trim(b))}catch(n){h=b,a.trigger("hideLoader"),a.trigger("pullMsg",{msg:"JSON Parse Error."})}h&&
(c("#form-wrapper-"+l).unwrap(),c("#"+f).remove(),h.tabId=l,h.parent=d,f=c.extend(h,g.options.invar),a.trigger(g.options.trfunc,f),a.trigger("hideLoader"))};return{init:function(){a.bind("setBrandSettings",b);a.on("#main-wrapper",".i-button-form-send-cancel","click",n)},handleResponse:h}}(window,$,EventMgr,App);"use strict";
App.Slider=function(m,c,a,f){var n=function(){return c("#main-wrapper")},b=0,l=0,p=null,t=0,h=0,e=0,k=null,g="",d=null,s=0,r=!1,u=function(){g=p.getAttribute("data-tabid");d=p.getAttribute("data-id");l=p.getAttribute("data-min");(s=parseInt(p.getAttribute("data-step"),10))||(s=1);b=p.getAttribute("data-max");e=c(p).parent().width();t=e-9},z=function(c){var e=0;c<=t&&0<=c?e=c:c>t?(r=!1,e=t):(r=!1,e=0);p.style.left=e+"px";if(!r){c=l%s;var e=Math.round(e*((b-l)/t))+parseInt(l,10),h=f.Dom.byId(d),k=f.Dom.byId(d+
"-slider"),n=e%s,m=s-n,e=(n>m?e+m:e-n)+c;e>b?e=b:e<l&&(e=l);null!==h&&(h.value=e);k&&k.setAttribute("data-value",e);a.trigger("changeSliderValue",{tabId:g})}return r=!1},q=function(a,d){g=d.tabId;c("#incont-"+g+" .b-slider__el").each(function(){p=this;r=!0;u();if(0!==e){var a=this.getAttribute("data-value"),c=(b-l)/t;z(a/c-l/c)}})},v=function(a,d){g=d.tabId;c("#editinlist-wrapper-"+g+" .b-slider__el").each(function(){p=this;r=!0;u();var a=this.getAttribute("data-value"),c=(b-l)/t;z(a/c-l/c)})},w=
function(c,e){c=c||m.event;this.value=("-"===this.value.substr(0,1)?"-":"")+this.value.replace(/\D/g,"");r=!0;var h=this.getAttribute("id");p=f.Dom.byId(h+"-slider");u();var h=f.Dom.byId(d).value,k=h%s,n=s-k,q=(b-l)/t,v=l%s,w=f.Dom.byId(d+"-slider"),h=h-0;this.value=h=(k>n?h+n:h-k)+v;k=h/q-l/q;k>t&&(r=!1);z(k);blockEvent(c);w&&w.setAttribute("data-value",h);a.trigger("changeSliderValue",{tabId:g});return!1},y=function(a){a=a||m.event;var b=a.which||a.keyCode,d;if(38===b||40===b)d=this.getAttribute("id"),
p=c("a#"+d+"-slider")[0],u(),blockEvent(a);38!==b||a.ctrlKey?40!==b||a.ctrlKey||(clearInterval(k),E(!1),k=setInterval(function(){E(!1)},100),blockEvent(a)):(clearInterval(k),E(!0),k=setInterval(function(){E(!0)},100),blockEvent(a))},D=function(){this.value=("-"===this.value.substr(0,1)?"-":"")+this.value.replace(/\D/g,"");clearInterval(k)},E=function(e){var h=f.Dom.byId(d),l=h.value,l=e?parseInt(l,10)+s:l===b?l-3:l-s;h.value=l;a.trigger("changeSliderValue",{tabId:g});c("#"+d).trigger("change")},F=
function(a){a=a||m.event;p=c(this).children(".b-slider__el")[0];u();h=a.clientX-c(this).offset().left-7;z(h);c("#"+d).trigger("change")},A=function(a){c(this).trigger("focus");a=a||m.event;a.touches?(h=a.touches[0].pageX-parseInt(this.style.left,10),document.ontouchmove=C,document.ontouchend=B,document.ontouchcancel=B):(h=a.clientX-parseInt(this.style.left,10),document.onmousemove=C,document.onmouseup=B);p=this;u();blockEvent(a);return!1},C=function(a){a=a||m.event;a.touches?z(a.touches[0].pageX-
h):z(a.clientX-h);blockEvent(a);return!1},B=function(a){c(this).trigger("blur");a=a||m.event;document.onmousemove=null;document.onmouseup=null;document.ontouchmove=null;document.ontouchend=null;document.ontouchcancel=null;c("#"+d).trigger("change");blockEvent(a)};return{init:function(){a.on(n(),'.l-slider__wr:not(".readonly") .b-slider__el',"mousedown",A);a.on(n(),'.l-slider__wr:not(".readonly")',"mousedown",F);a.bind("appendForm",q);a.bind("appendEditInList",v);a.bind("reloadSlider",q);a.on(n(),
'.b-input_for_slider:not(".readonly")',"change",w);a.on(n(),'.b-input_for_slider:not(".readonly")',"keydown",y);a.on(n(),'.b-input_for_slider:not(".readonly")',"keyup",D);a.on(n(),'.l-slider__wr:not(".readonly") .b-slider__el',"ontouchstart",A)}}}(window,$,EventMgr,App);"use strict";
App.SelectAutoComplete=function(m,c,a,f,n){function b(){var a;a&&0!==a.length||(a=c("#main-wrapper"));return a}function l(){var a;a&&0!==a.length||(a=c("body"));return a}function p(a){a.preventDefault();a.stopPropagation()}function t(b,d){var e=b.getAttribute("data-name"),f=b.getAttribute("data-tabid"),g=m.pageInfo.url,h=c("#frm-"+f).serializeObject(),l=b.value;h[e]=b.value;h.sv_field=e;h.sv_autocomplete="yes";(l!==w||d)&&a.trigger("ajaxRequest",{url:g,param:h,trfunc:"selectAutoCompleteResponse",
invar:{tabId:f,sourceField:e,value:l},type:"post",outtype:"json",queue:"noqueue"});w=l}function h(){l().trigger("click");t(this,!0)}function e(a){a=a||m.event;var b=a.which||a.keyCode;if(q[b])k(a,q[b],this);else{var c=this;v&&clearTimeout(v);v=setTimeout(function(){t(c)},200)}}function k(a,b,d,e){var f=d.getAttribute("data-name"),g=d.getAttribute("data-tabid");d=c("#b-select-ac-list__"+f+"-"+g+" .b-select-ac__list-item_selected_yes");0===d.length?(d=c("#b-select-ac-list__"+f+"-"+g+" .i-select-ac__list-item:first"),
0!==d.length&&(d.addClass("b-select-ac__list-item_selected_yes"),s.apply(d[0],[a,!0,e]))):"UPKEY"===b?(b=d.prev(),0!==b.length&&(d.removeClass("b-select-ac__list-item_selected_yes"),b.addClass("b-select-ac__list-item_selected_yes"),s.apply(b[0],[a,!0,e]))):"DOWNKEY"===b?(b=d.next(),0!==b.length&&(d.removeClass("b-select-ac__list-item_selected_yes"),b.addClass("b-select-ac__list-item_selected_yes"),s.apply(b[0],[a,!0,e]))):"ENTERKEY"===b?s.apply(d[0],[a,!1,e]):"TABKEY"===b&&0===d.index()&&s.apply(d[0],
[a,!0,e])}function g(b,d){var e=d.sourceField,g=e+"-"+d.tabId,h=f.Dom.byId("b-select-ac-list__"+g),k="cont-b-select-ac-list__"+g,n=f.Dom.byId(k),s=d.setvalues[e],m=d.value,p="",r,q,t={},u=(new Date).getTime();if((r=document.activeElement)&&r.getAttribute("data-name")!==e)return!1;d[d.sourceField]&&(d[d.sourceField]=null,a.trigger("formSetValues",d));if(s&&s.slist){for(var e=s.slist.length,v=0;v<e;v++)r=s.slist[v].value,"string"===typeof r&&(q=RegExp("("+f.u.escapeRegExp(m)+")","i"),r=r.replace(q,
'<span class="b-select-ac__font-normal">$1</span>'),p+='<li data-id="'+v+'" data-lid="'+u+'" class="b-select-ac__list-item i-select-ac__list-item">'+r+"</li>",t[String(v)]={key:s.slist[v].key,value:s.slist[v].value});y[String(u)]={options:t};h.innerHTML=p}else h.innerHTML='<li class="b-select-ac__list-item i-select-ac__list-item b-select-ac__list-item_notfound_yes" data-lid="'+u+'">'+pageInfo.notfound+"</li>";"block"!==n.style.display?n.style.display="block":l().off("click.closeChooseList");l().on("click.closeChooseList",
c.proxy(z,h));a.trigger("updateScroll",k);f.Common.setOptionListPosition("#opt-",g)}function d(a){a=a||{};var b=f.Dom.byId(a.id),d=f.Dom.byId("key-"+a.id);b&&(b.value=a.value);d&&(d.value=a.key,c(d).trigger("change"),D[a.id]={key:a.key,value:a.value})}function s(a,b,c){c||a.preventDefault();a=this.getAttribute("data-id");c=this.getAttribute("data-lid");var e=this.parentNode,f=e.getAttribute("data-id");y[c]&&y[c].options&&void 0!==y[c].options[a]&&d({id:f,key:y[c].options[a].key,value:y[c].options[a].value});
b||z.apply(e,[{},!0])}function r(a){a=a||m.event;"TABKEY"===q[a.which||a.keyCode]&&(""!==this.value&&k(a,"TABKEY",this,!0),l().trigger("click"))}function u(a,b){var e=this.getAttribute("id"),g=f.Dom.byId("cont-b-select-ac-list__"+e),h=f.Dom.byId("b-select-ac-list__"+e);if(b||g&&"none"===g.style.display||c(h).find(".b-select-ac__list-item_notfound_yes").length)g=f.Dom.byId("key-"+e),D[e]&&g&&D[e].key===g.value?""!==this.value?this.value=D[e].value:d({id:e,key:"",value:""}):this.value=""}function z(a,
b){var e,g=c(this).find(".i-select-ac__list-item"),h=this.parentNode;if(g[0]&&!b){var k=g[0].getAttribute("data-lid");if((g=this.getAttribute("data-id"))&&y&&y[k]){var n=f.Dom.byId(g),s=y[k].options,m=n.value,k=!1;if(s&&void 0!==m)for(var p in s)if(s.hasOwnProperty(p)&&(e=p,s[p].value===m)){k=!0;break}e=s[e].key;k?d({id:g,key:e,value:n.value}):u.apply(n,[{},!0])}}h.style.display="none";this.innerHTML="";l().off("click");y={}}var q={38:"UPKEY",40:"DOWNKEY",37:"LEFTKEY",39:"RIGHTKEY",13:"ENTERKEY",
9:"TABKEY"},v,w,y={},D={};return{init:function(){a.on(b(),".b-select-ac__input","keyup",e);a.on(b(),".b-select-ac__input","keydown",r);a.on(b(),".b-select-ac__input","blur",u);a.on(b(),".b-select-ac__input","click",h);a.on(b(),".b-select-ac__input","click",p);a.bind("selectAutoCompleteResponse",g);a.on(b(),".i-select-ac__list-item","click",s)}}}(window,$,EventMgr,App,ScrollHandler);"use strict";
App.TableRowResize=function(m,c,a,f){var n=0,b="",l="",p,t="",h="",e="",k="",g="",d,s=function(a){a=a||m.event;n=a.clientX;document.onmousemove=r;document.onmouseup=u;this.style.position="absolute";var s=c(".tab-content_st_active .list_table").width();k=this.parentNode;t=k.offsetWidth;e=f.Common.getPreviousNode(k);h=e.offsetWidth;g=2*(s/100);var s=c(".tab-content_st_active .content"),p=s.height();d=s.attr("data-tabid");this.style.height=p+"px";l=this.offsetLeft;b=this;blockEvent(a)},r=function(a){a=
a||m.event;var c=a.clientX-n,d;a:{if(0<=c){if(t-c<g){d=!1;break a}}else if(h+c<g){d=!1;break a}d=!0}d&&(p=c);b.style.left=l+p+"px";blockEvent(a)},u=function(c){if(p){c=parseInt(k.style.width,10);var l=parseInt(e.style.width,10);c+=l;0<p?(l=2*(t-p)/g,l=2<l?l:2,k.style.width=Math.round(l)+"%",c-=l,e.style.width=Math.round(2<c?c:2)+"%"):(l=2*(h+p)/g,l=2<l?l:2,e.style.width=Math.round(l)+"%",c-=l,c=2<c?c:2,k.style.width=Math.round(c)+"%");p=void 0;c=z()}else c=void 0;b.style.height="100%";b.style.left=
"";b.style.position="";document.onmouseup=null;document.onmousemove=null;b="";c&&(c.func="colwidth",c.out="xml",c.elid=f.Tabs.tabs[d].func,a.trigger("ajaxRequest",{param:c,trfunc:"DoNothing",queue:"noqueue"}))},z=function(){var a={};c(".tab-content_st_active .sort_table td").each(function(b){var d=this.getAttribute("data-colname"),e=parseInt(this.style.width,10),f="lt-"+c(this).parents(".sort_table").attr("id").replace("sort_table-","");this.firstChild.style.width=e*(g/2)+"px";a[d]=e;c(".tab-content_st_active .list_table#"+
f+" tbody tr:first td:eq("+b+")").width(e+"%");c(".tab-content_st_active .list_table#"+f+' th[data-colname="'+d+'"]').width(e+"%");c('.tab-content_st_active .statusbar td[data-colname="'+d+'"]').width(e+"%")});return a};return{init:function(){a.on("#content",".content .rowHandler","mousedown",s)}}}(window,$,EventMgr,App);"use strict";
_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"===typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};
App.Tabs=function(m,c,a,f,n){var b={},l=m.pageInfo,p=1,t=0,h="",e="",k=function(){f.u.parseParams(m.location.search).sfrom&&m.history&&setTimeout(function(){m.history.pushState("default","",l.binary)},1E4)},g=function(a){if(a&&"okList"!==a.__src&&"okForm"!==a.__src)if(a.features&&l.features&&!a.wizard&&a.features!==l.features){if(a=f.u.parseParams(m.location.search),a.ssavetabs=1,a.scountreload?(a.scountreload-=0,a.scountreload+=1):a.scountreload=1,5>a.scountreload)return m.location.search="?"+f.u.getQueryString(a),
!1}else a=f.u.parseParams(m.location.search),a.ssavetabs&&setTimeout(function(){m.history&&m.history.pushState("default","",l.binary)},1E4);return!0},d=function(c){if(c&&c.reload){var d=l.url;c.savetab&&(d+="?sfrom=sessionexpired");if(c.__src&&("menuAction"===c.__src||"toolbarAction"===c.__src||"report"===c.__src||"reloadTab"===c.__src)){var e,g;e="tab"+p;g={status:1,forceActive:!0,title:"",paramObjAll:f.u.parseParams(c.sourceParamString)};var h=g.paramObjAll.func;if(!String(h).match(/su$/)&&"chlevel"!==
h){if(c.parent){if(c.targetTabId||c.tabId)e=c.targetTabId||c.tabId;g.hType="child";b[c.parent]&&(b[c.parent].child=e)}else c.targetTabId&&(e=c.targetTabId),g.hType="parent";b[e]=g;a.trigger("changedTabs",{tabs:b,forceActive:!0})}}c.__src&&"filterset"===c.__src&&(e=c.tabId,b[e]&&(b[e].beforeRequest=c.sourceParamString),a.trigger("changedTabs",{tabs:b,forceActive:!0}));m.location=d;return!1}return!0},s=function(a){if(a){if(a.location&&a.newwin)return m.open(a.location,"_blank"),c(".m-item.loading").removeClass("loading"),
!1;if(a.location)return m.location=a.location,!1}return!0},r=function(b){if(b){var c,d;c=b.formParam;d=b.parent;if(c)return c=f.u.parseParams(c),d={noesc:!0,param:c,invar:{waitingTabId:b.targetTabId,parent:d,dataSaved:!0,__src_func:b.__src_func,__src:"okForm",__srcBtn:b.__srcBtn,newtab:b.newtab},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"noqueue"},b.openAsChild&&(d.invar.parent=b.tabId),a.trigger("ajaxRequest",d),!1}return!0},u=function(b){if(b){var c;c=b.listParam;var d=b.parent;if(c)return c=
f.u.parseParams(c),a.trigger("ajaxRequest",{noesc:!0,param:c,invar:{waitingTabId:b.targetTabId,parent:d,dataSaved:!0,__src:"okList",__srcBtn:b.__srcBtn,newtab:b.newtab},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"noqueue"}),b.openAsChild&&(options.invar.parent=b.tabId),a.trigger("tabLoading",{tabId:d}),!1}return!0},z=f.Common.storage,q=function(a){b[a]&&"form"===b[a].type&&c("#frm-"+a+" .b-button_st_disabled").each(function(){var a=c(this);a.html(a.attr("data-enabled"));a.removeClass("b-button_st_disabled")})},
v=function(d){var e=this.getAttribute("data-tabid"),f=this.getAttribute("data-func"),g=c(this);c("#frm-"+e).hasClass("b-form_showcase_yes");var h=g.getFlags();b[e]&&(g=b[e].parent,h.refresh&&g&&a.trigger("reloadTab",{tabId:g,__src:"formCancelRefresh",filter:!0}),b[e].rParentObj?(f=b[e].rParentObj,b[e].rParent=void 0,a.trigger("ajaxRequest",{url:l.url,param:f,invar:{parent:g,targetTabId:e,iType:"replace",dataSaved:!0},type:"get",outtype:"json",trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",
queue:"noqueue"}),a.trigger("tabLoading",{tabId:e})):f?(f={param:{func:f},invar:{parent:g,targetTabId:e,iType:"replace",dataSaved:!0},type:"get",outtype:"json",trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",queue:"noqueue"},a.trigger("ajaxRequest",f),a.trigger("tabLoading",{tabId:e})):Q(d,e),d.preventDefault())},w=function(b){"on"===b&&(a.trigger("ajaxRequest",{param:{func:"usrparam",elid:l.user,checkunsaved:"off",sok:"ok"},type:"get",outtype:"json",trfunc:"DoNothing",queue:"noqueue"}),l.checkUnsaved=
!1)},y=function(d,e){var f=!1,g;!e.newtab&&!e.dataSaved&&l.checkUnsaved&&b[h]&&(g=D(h),g!==h&&b[g]&&0===b[g].status&&N(g),g=ja(g),g.isChanged&&(f=!0,a.trigger("confirmBoxShow",{callbackOk:E,callbackCancel:function(){c(".m-item.loading").removeClass("loading")},text:String(l.unsavedData).replace("__VALUE__",g.count)+'<br/><span class="b-text_style_bold">'+g.labels+"</span>",args:[d,e],checkbox:{msg:l.unsavedDontShow,cb:w}})));f||E(d,e)},D=function Qa(a){return b[a]&&"form"===b[a].type?a:b[a].child?
Qa(b[a].child):!1},E=function(e,g){a.trigger("hideHint");var h=g.parent?g.parent:"",l=g.ok||!1,k;h&&(a.trigger("tabLoadingHide",{tabId:h}),q(h));g.targetTabId&&a.trigger("tabLoadingHide",{tabId:g.targetTabId});g.srcTabId&&a.trigger("tabLoadingHide",{tabId:g.srcTabId});if(!(d(g)&&s(g)&&u(g)&&r(g)))return!1;if(l&&void 0!==h)a.trigger("reloadTab",{tabId:h,filter:!0,__src:"buildTabOk"});else{a.trigger("startbuildTab","new empty tab");k="tab"+p;h=g.type||g.id;"dashboard"===g.exType?k="tab0":g.targetTabId?
k=g.targetTabId:g.showcase?k="tab0":p++;if(g.error&&!g.ignErr&&"form"!==g.type&&"inspectorForm"!==g.type&&"showcaseForm"!==g.type&&"report"!==g.type||void 0===g.userexpMsg&&g.error&&"form"===g.type)a.trigger("hideLoader"),h="fatalerror";else if(g.error&&g.ignErr)return;if(""===h&&!b.tab0||"dashboard"===g.exType)h="dashboard";g.msg&&c.extend(f.Common.msg,g.msg);switch(h){case "list":F(k,g);break;case "form":A(k,g);break;case "dashboard":C(k,g);break;case "report":K(k,g);a.trigger("reportLoad");break;
case "map":case "rack":L(k,g);break;case "fatalerror":B(k,g);break;case "empty":x(k,g);break;case "inspectorForm":M(k,g);break;case "showcaseForm":G(k,g);break;default:a.trigger("pullMsg",{msg:'Do not support type = "'+h+'" of metadata'})}h=g.autoupdate;b[k]&&(b[k].timeId&&clearTimeout(b[k].timeId),void 0!==g.autoupdate?(h=setTimeout(function(b,c){return function(){a.trigger("updateTab",{tabId:b,delay:c})}}(k,h),1E3*g.autoupdate),b[k].autoupdate=!0,b[k].timeId=h):(b[k].autoupdate=!1,b[k].timeId=void 0),
g.tips&&setTimeout(function(){a.trigger("showTips",{tips:g.tips,inTab:!0,tabId:k,sameModule:g.sameModule})},1))}},F=function(d,e){var g="",h,k=I(e,d);e.plid&&encodeURIComponent(e.plid);e.elid&&encodeURIComponent(e.elid);e.sortOrder&&(g+="&p_order="+e.sortOrder);e.sortCol&&(g+="&p_sort="+e.sortCol);"true"===e.pager.pager&&(g+="&p_num="+e.pager.pageNum+"&p_cnt="+e.pager.pageCnt);e.sbar=!0;f.Global.warning&&(e.warning=f.Global.warning);e.selid&&(f.Global.selid=e.selid);e.scrollTop&&(f.Global.scrollTop=
e.scrollTop);e.tabId=d;if(e.warning){var s=c.extend({},e.warning);a.trigger("checkWarningForConfirm",{d:e,w:s})}var s=ka(e),m="";if("true"===e.pager.pager)var m=e.pager,p=n.formItemSelect({name:"pager-slist",slist:m.pageSlist,value:m.pageNum,msg:m.pageSlist[m.pageNum-1].value,depend:m.depend,dependMaster:m.dependMaster,dependFields:"",hide:"",show:"",readonly:"",setvalue:"",id:d,attrInput:""}),r=xa(m.pageCount,m.pageNum),m=n.listPager({slist:p,cnt:m.pageCnt,pagerList:r,msgBegan:m.msgPagershow,msgEnd:m.msgPagerline});
p="";"true"===e.filter&&(p=e.activeFilter.status?"filter filter-hide filter-set":"filter filter-hide");var r=e.breadcrumb,q="";for(h in r)q+='<a href="#" data-id="'+h+'" class="breadcrumb">'+r[h].name+"</a>";h=q;delete e.breadcrumb.name;z.breadcrumb[d]=e.breadcrumb;k.autoupdate=void 0!==e.autoupdate;k.tsettings=f.u.escapeQuote(e.hintTsettings)||"";k.hAutoupdate=f.u.escapeQuote(e.hintAutoupdate)||"";k.hExport=f.u.escapeQuote(e.hintExport)||"";k.hSelectAll=f.u.escapeQuote(e.hintSelectAll)||"";k.fHelp=
f.u.escapeQuote(e.hintFilter)||"";k.pNum=e.pager.pageNum;k.porder=e.sortOrder;k.sortCol=e.sortCol;k.pcnt=e.pager.pageCnt;k.breadcrumb=h;k.plidAttr=e.plid?'data-plid= "'+filterXSS.safeAttrValue("div","data-plid",e.plid)+'"':"";k.convertAttr=e.convert?"data-convert="+e.convert:"";k.oplid=e.plid||"";k.tsplid=e.tsplid||"";k.tsettingsParam=filterXSS.safeAttrValue("a","data-url","?func=tsetting&elid="+e.func+"&plid="+e.tsplid);k.table=s;k.progressid=e.progressid;k.tabIdAttr="data-parent="+d;k.pager=m;k.filter=
p;k.afilter=e.activeFilter;k.param=g;k.livefilter=e.liveFilter||"";b[d].body=k;b[d].__content=e.content;b[d].__headers=e.headers;f.Global.bannerHtml=null;f.Global.targetId="";"true"===e.filter?(b[d].filter=!0,b[d].filterFunc=e.filterFunc):b[d].filter=!1;a.trigger("builtTab",{tab:b[d],newtab:e.newtab,targetTabId:e.targetTabId,iType:e.iType,srcData:e});S(d,e.newtab,e.iType);e.children&&a.trigger("loadChildren",{parent:d,children:e.children});e.progressid&&(g={elid:e.progressid,func:"progress.get"},
a.trigger("ajaxRequest",{url:l.url,param:g,invar:{tabId:d,param:g,progresstype:void 0},type:"get",outtype:"json",trfunc:"progressBarResponse",queue:"noqueue"}));e.diagram&&e.diagram[0]&&a.trigger("appendListWithDiagram",{diagram:e.diagram[0],content:e.content,tabId:d,gid:"diagram-"+d});e.liveFilter&&c("#"+d+"-search").trigger("keyup")},A=function(c,d){var e=I(d,c);d.form&&(d.form.id=c,d.form.formflags=d.formflags||{},d.form.parent=d.parent||"",d.form.func=d.func,e=J(d,c,e),b[c].formModel=e.model,
b[c].formSource=e.formSource,b[c].body=e,a.trigger("builtTab",{tab:b[c],newtab:d.newtab,targetTabId:d.targetTabId,iType:d.iType,srcData:d}),S(c,d.newtab,d.iType),d.error&&a.trigger("focusOnErrorField",{tabId:c}))},C=function(d,f){var g;b[d]=new TabObj(d,1,"dashboard");!f.error&&f.blocks?b[d].body=wa(f.blocks):f.lateLoad?(g=l.loading,b[d].body={id:d,top:g,left:"",right:""}):f.shithappend?(g=l.loading,b[d].body={id:d,top:g,left:"",right:""},setTimeout(function(){a.trigger("ajaxRequest",{url:l.url,param:{func:"dashboard"},
invar:{exType:"dashboard"},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"dashboard"})},500)):(g=n.fatalError({message:f.ermsg,ref:!1}),b[d].body={id:d,top:g,left:"",right:""});c("#cont-tab0").remove();b[d].func=f.func;a.trigger("builtTab",{tab:b[d]});e=d;b.tab1&&b.tab1.active?b.tab0.deactive():S(d)},B=function(d,e){var f,g,h=e.targetTabId||d,k;c(".m-item.loading").removeClass("loading");"groupAction"===e.__src||"report"===e.__src||"toolbarAction-refresh"===e.__src?(a.trigger("tabLoadingHide",
{tabId:e.tabId}),"groupAction"===e.__src&&a.trigger("reloadTab",{tabId:e.tabId,filter:!0})):"wizardLink"===e.__src?(a.trigger("tabLoadingHide",{tabId:e.tabId}),h=!1):e.targetTabId?a.trigger("tabLoadingHide",{tabId:e.targetTabId||e.waitingTabId}):e.waitingTabId&&(a.trigger("tabLoadingHide",{tabId:e.waitingTabId}),q(e.waitingTabId));e.ref&&(f=l.url+e.ref);"unavailable"===e.ertype&&(g=e.sourceParamString);h&&b[h]&&Q({preventDefault:function(){}},h);e.parent&&(k=function(){a.trigger("reloadTab",{tabId:e.parent,
__src:"fatalError"})});f=n.fatalAlert({msg:e.ermsg,ref:f,refreshLink:g,refreshLinkMsg:l.tryreload,moreMsg:l.moreinfo});a.trigger("showAlert",{msg:f,callback:k})},K=function(d,e){var f,g=I(e,d);e.form.id=d;e.form.func=e.func;e.reports.func=e.func;f=e.reports;if(f.emptyBand)f=f.hasDiagram?n.emptyBandOverlay({emptymsg:l.emptyreport,tabId:d}):'<div class="report-nodata">'+l.nodata+"</div>";else{var h="",k=f.bands,s=k.length-1,m=null,p,r;for(r=0;r<s;r++)if(m=d+"-"+r,0===k[r].content.length)k[r-1]&&k[r-
1].title&&(h+='<div class="b-report-nodata">'+l.nodata+"</div>");else if(void 0!==k[r].title)p=k[r].fullwidth?"fullwidth-band":"",h+='<div class="band-content b-title '+p+'"><div class="band-title big-title">'+k[r].title+"</div></div>";else{c.extend(k[r],{elKey:k[r].headers[0].name,pager:{pageElems:0},tabId:m,oTabId:d});k[r].func=f.func;var q="<div>"+ka(k[r]),t=m+k[r].id,u=d+"-"+k[r].id,v="",z="",w=k[r].hidden?"data-table-hidden":"",x=k[r].showMsg,H=k[r].hideMsg,y=k[r].hidden?"hidden":"",A=k[r].diagram.length;
p=k[r].fullwidth?"fullwidth-band":"";0===A&&(p+=" nodiagram");""!==k[r].smallTitle&&(v=k[r].smallTitle,z="small-title");h+=n.reportBand({title:v||"",titleClass:z,table:q,id:m,aid:u,gid:t,fullwidth:p,hidden:w,showMsg:x,hideMsg:H,hiddenClass:y,dc:A});p=k[r].headers;m='<table id="table_sum-'+m+'"><tr>';for(q=0;q<p;q++)m+='<td><span class="data-sum" id="'+p[q].name+'"></span></td>';m+="</tr></table>";h+=m}f=h}g=J(e,d,g);g.helpType="default";g.helpurl="";g.type="report";g.bands=f;g.reportInfo=e.reportInfo;
b[d].body=g;a.trigger("builtTab",{tab:b[d],newtab:e.newtab,bands:e.reports,targetTabId:e.targetTabId});S(d,e.newtab,e.iType)},L=function(c,d){var e=I(d,c),g,h=d.type;d.ermsg&&!d.erobj&&(g=n.banner({message:{status:"error",classes:"",id:c,text:f.Common.wordWrap(d.ermsg,100),ref:!1,refText:l.moreinfo,dismiss:d.msg.dismiss}}));e.helpType="default";e.helpurl="";e.type=h;e.plid=d.plid?String(d.plid).replace(/"/g,"&quot;"):"";e.elid=d.elid?String(d.elid).replace(/"/g,"&quot;"):"";e.parent=d.parent?d.parent:
"";e.ermsg=g;e.btng=d.btng?d.btng:[];e.btnview=d.btnview?"o-"+d.btnview:"";e.plidAttr=d.plid?'data-plid= "'+filterXSS.safeAttrValue("div","data-plid",d.plid)+'"':"";e.convertAttr=d.convert?"data-convert="+d.convert:"";b[c].body=e;a.trigger("builtTab",{tab:b[c],map:d[h],newtab:d.newtab,targetTabId:d.targetTabId});S(c,d.newtab,d.iType)},x=function(c,d){var e=l.loading,f;I(d,c);f=b[c];f.body={id:c,text:"",comment:e};f.status=0;f.notLoaded=!0;f.pin=d.pin;d.children&&a.trigger("loadChildren",{parent:c,
children:d.children});a.trigger("builtTab",{tab:f,newtab:d.newtab,targetTabId:d.targetTabId});a.trigger("changedTabs",{tabs:b})},M=function(c,d){if(d.error&&void 0===d.userexpMsg)a.trigger("pullMsg",{msg:d.ermsg});else{var e=I(d,c);delete b[c];c="modal1";e.id=c;d.form&&(d.form.id=c,e=J(d,c,e),e.parent=d.sourceTab,e=n.tabContForm(e),a.trigger("readyInspectorFormHtml",e))}},G=function(c,d){c="tab0";var e=I(d,c);d.form.id=c;d.form.formflags=d.formflags||{};d.form.parent=d.parent||"";e=J(d,c,e);b[c].formModel=
e.model;b[c].formSource=e.formSource;e.showcase=!0;e.nostep=!l.wizard_step;e.notitle=!l.title;e=n.tabContForm(e);a.trigger("readyShowcaseFormHtml",e)},J=function(a,b,c){if(c&&a){var d="",e=String(a.userexpMsg).replace("__value__",a.userexpHideFields);a.ermsg&&!a.erobj&&(d=n.banner({message:{status:"error",classes:"i-message__outer-link",id:b,text:f.Common.wordWrap(a.ermsg,100),ref:a.ref?a.ref:!1,refText:l.moreinfo,dismiss:a.msg.dismiss||l.dismiss}}));c.form=a.form;c.tabClass=a.testMode?" tab-content_st_testmode":
"";c.formstatus=a.formstatus;c.files=a.withfiles?"withfiles":"withoutfiles";c.bands="";c.progress=a.progress?a.progress+"_"+c.itemId:!1;c.helpType=a.helpType;c.helpurl=a.helpurl;a.form.testMode=a.testMode;b=Ia(a.form,b);c.pages=b.html;c.model=b.model;c.formSource=b.source;c.action=l.binary;c.step=l.step;c.formflags=a.formflags?a.formflags:{};c.buttons=a.buttons;c.parent=a.parent?a.parent:"";c.plid=a.plid?String(a.plid).replace(/"/g,"&quot;"):"";c.elid=a.elid?String(a.elid).replace(/"/g,"&quot;"):
"";c.plidAttr=a.plid?'data-plid= "'+filterXSS.safeAttrValue("div","data-plid",a.plid)+'"':"";c.type="form";c.userexp=a.userexp;c.userexpMsg=e;c.reportInfo=void 0;c.arePages=1<a.form.length?"a-lot-of-pages":"";c.ermsg=d;var g;if(a.__innervars){d=a.__innervars;e="";b=0;for(g in d)0!==b&&(e+="|"),b++,e+=g+":"+d[g];g=e}else g="";c.__innervars=g;a.buttons&&(c.model.__buttons=a.buttons);return c}},I=function(a,d){var e={},g,h=0,k,n,m,s;g=a.selfUrl?a.selfUrl.replace(/sfrom=ajax/g,""):"";var p;a.pin=a.pin&&
"menuAction"!==a.__src;if(h=a.pin){a:{h=a.func||(a.urlObj?a.urlObj.func:"");for(p in b)if(m=b[p],p===d||m&&m.paramObjAll&&m.paramObjAll.func===h||m&&m.urlObj&&m.urlObj.func===h){p=!0;break a}p=!1}h=!p}h&&(a.pin=!0);e.commonDir=l.commonDir;e.itemId=a.type+(new Date).getTime();e.id=d;e.func=a.func;e.theme=a.theme;e.hReload=f.u.escapeQuote(a.hintReload)||"";e.comment=f.u.escapeQuote(a.msg_loading)||"";e.hFavorite=f.u.escapeQuote(a.hintFavorite)||"";e.hUnfavorite=f.u.escapeQuote(a.hintUnFavorite)||"";
e.hPrint=f.u.escapeQuote(a.hintPrint)||"";e.hCopy=f.u.escapeQuote(a.hintCopy)||"";e.hPdf=f.u.escapeQuote(a.hintPdf)||"";e.hHelp=f.u.escapeQuote(a.hHelp)||"";e.hintUnpin=f.u.escapeQuote(a.hintPin)||"";e.hintPin=f.u.escapeQuote(a.hintUnpin)||"";e.hDevel="out=devel";e.breadcrumb="";e.message="";e.selfurl=l.url+"?"+R(a.urlObj);e.devMode=aa;e.testMode=a.testMode;e.pdfOn=Ha;e.btng=a.btng?a.btng:[];e.btnview=a.btnview?"o-"+a.btnview:"";e.favorite=a.favorite||!1;e.pin=a.pin||!1;e.inmenu=!!f.Dom.byId("l-"+
String(a.func).replace(/\./g,"_"));e.parentAttr=a.parent?"data-parent="+a.parent:"";e.tabIdAttr="data-parent="+d;p=c.extend({},a.urlObj);delete p.sfrom;delete p.operafake;delete p.clickstat;p.startform=p.func;delete p.elname;delete p.func;e.permaLink=l.url+"?"+R(p);if(f.Global.targetId&&f.Global.targetId!==d&&f.Global.bannerHtml&&0<f.Global.bannerHtml.length)for(p=f.Global.bannerHtml.length;p--;)"error"===f.Global.bannerHtml[p].status&&f.Global.bannerHtml.splice(p,1);a.message?e.message=f.Global.bannerHtml?
a.message.concat(f.Global.bannerHtml):a.message:f.Global.bannerHtml&&(e.message=f.Global.bannerHtml);if(e.message)for(p=e.message.length;p--;)""===e.message[p].refText&&(e.message[p].refText=a.msg.moreinfo),""===e.message[p].dismiss&&(e.message[p].dismiss=a.msg.dismiss||l.dismiss);a.targetTabId?(b[d].type=a.type,b[d].selfUrl=g):b[d]=new TabObj(d,1,a.type,g);a.__src_func&&(b[d].menuFunc=a.__src_func);p=b[d];if("hardUpdate"!==a.iType&&"replace"!==a.iType)if(a.parent){if(void 0===b[a.parent])return;
p.hType="child";p.parent=a.parent;p.gParent=b[a.parent].gParent?b[a.parent].gParent:a.parent;"empty"===a.type&&(b[a.parent].child=d)}else p.hType="parent";else a.parent=p.parent;a.title&&""!==a.title?(h=a.title.length,g=25>h?a.title:a.title.substr(0,25)+"...",k=10>h?a.title:a.title.substr(0,10)+"...",n=f.u.escapeQuote(a.title)):g="...";p.title=a.title;e.tabTitle=a.title;s=a.parent?b[b[d].gParent].func:a.id;h=qa(s,a.selfIcon,l.commonDir);m=qa(s,a.selfIcon,l.commonDir,!0);e.tImg=h;e.tStyle=m;p.rParentObj=
a.rParent?b[d].paramObjAll:void 0;p.paramObjAll=a.urlObj;"empty"!==a.type&&(p.notLoaded=!1);p.iType=a.iType;a.pinIcon?h=a.pinIcon:(h=String(s).replace(/\./g,"_"),h=f.Dom.byId("l-"+h),h=c(h).parent(),name=h.attr("data-group"),h=h.attr("data-img")?'class="subtab__text_for_pin s16x16 s-icon" style="background: url(/manimg/common/img/m-'+name+'.png) left top no-repeat"':'class="subtab__text_for_pin s16x16 s-icon m-'+name+'"');p.pinIcon=h;p.pin=a.pin||!1;p.header={tabId:d,title:g,hint:n,isPin:a.pin,pinIcon:p.pinIcon,
shortTitle:k,theme:l.theme};p.func=a.func;p.favorite=a.favorite;p.features=a.features;p.wizard=a.wizard;p.help=a.help?a.help:"toolbarAction"===a.__src||"okForm"===a.__src||"tSetting"===a.__src?a.parent&&b[a.parent]?b[a.parent].help+"."+a.__srcBtn:a.func:a.func;e.help=p.help;return e},R=function(a){var b="",c=0,d;for(d in a)""!==d&&(0!==c&&(b+="&"),b+=d+"="+encodeURIComponent(a[d]),c++);return b},N=function(c){var d="",e=h,f="";b[h]&&(b[h].deactive(),b[h].gParent&&(d=b[h].gParent,b[d].actChild=null));
b[c].gParent&&(d=b[c].gParent,b[d].actChild=c);b[c].activate();f=d?d:c;a.trigger("activateTab",{tabId:c});a.trigger("changedTab",{tabId:c,prevTabId:e});a.trigger("changeTabStatus",{func:O(f),type:"activate"});a.trigger("changedTabs",{tabs:b});h=c;(b[c].aupdate||b[c].notLoaded)&&a.trigger("reloadTab",{tabId:c,selid:!0,help:!0,filter:!0})},P=function(a){var c=!1;b[a]&&b[a].pin?c=!0:b[a]&&b[a].gParent&&b[b[a].gParent]&&b[b[a].gParent].pin&&(c=!0);return c},O=function(a){var c="";b[a]&&(b[a].menuFunc?
c=b[a].menuFunc:b[a].func?c=b[a].func:b[a].paramObjAll&&(c=b[a].paramObjAll.func));return c},S=function(d,f,g){var k=P(h);if(h===d)b[d].activate();else{var l=b[d].hType,p=b[d].parent||null,n=b[d].gParent||null,m;m="hardUpdate"===g||"softUpdate"===g;g="replace"===g;!h||h===e||f||"child"===l||"tab0"===d||m||g||k||(f=h,a.trigger("closeTab",{tabId:f}),b[f].child&&Z(b[f].child),b[f].parent&&fa(b[f].parent),"tab0"!==f&&(b[f].close(),delete b[f],a.trigger("closeTabEvent",{tabId:f})));p&&b[p].child&&!m&&
!g&&(m=b[p].child,Z(m));"child"===l&&(b[p].child=d,b[n].actChild=d);b[h]&&b[h].deactive();b[d].activate();l=n?n:d;h=d;c(".m-item.loading").removeClass("loading");a.trigger("activateTab",{tabId:d});a.trigger("changeTabStatus",{func:O(l),type:"activate"});a.trigger("changedTabs",{tabs:b})}},U=function Ra(a){var c=a;b[a].child&&(c=Ra(b[a].child));return c},V=function(c){c.preventDefault();c=this.getAttribute("data-tabid");h!==c&&(N(c),"form"===b[c].type||"report"===b[c].type?(a.trigger("switchTabForm",
{tabId:c}),a.trigger("updFormHeight",{tabId:c})):a.trigger("updTableHeight"),a.trigger("switchTab",{tabId:c}))},W=function(a){if(2===a.which||1===a.button){var b=this.getAttribute("data-tabid");a.preventDefault();"tab0"!==b&&ba.apply(this,[a])}},Y=function(b){b.preventDefault();b=this.getAttribute("data-tabid");a.trigger("reloadTab",{tabId:b,__src:"dblclickTab",filter:!0})},T=function(c,d){var f=d.tab,k=d.newtab||!1,l=d.bands||"",p=d.map||"",n,m=P(h);h===e||k||m||(n=b[h].gParent?b[h].gParent:h);f.iType?
"hardUpdate"===f.iType?f.render().update().clean():"softUpdate"===f.iType?f.softUpdate().clean():"replace"===f.iType&&f.render().replace().clean():f.render().append(n).clean();a.trigger("appended",{tabId:f.id});"form"===f.type?a.trigger("appendForm",{tabId:f.id,tabObj:f,srcData:d.srcData}):"list"===f.type?a.trigger("appendList",{tabId:f.id,srcData:d.srcData}):"dashboard"===f.type?a.trigger("appendDashboard",{}):"report"===f.type?a.trigger("appendReport",{tabId:f.id,bands:l}):"map"!==f.type&&"rack"!==
f.type||a.trigger("appendMap",{tabId:f.id,map:p});!0===f.filter&&a.trigger("appendFilter",{tabId:f.id,listParam:f.paramObjAll,func:f.filterFunc});g(f)},ba=function(c){c.stopPropagation();var d=this.getAttribute("rel")||this.getAttribute("data-tabid"),e=!1;if(!b[d].pin){if(b[d]&&"form"===b[d].type&&l.checkUnsaved){var f=ja(d);f.isChanged&&(e=!0,a.trigger("confirmBoxShow",{callbackOk:Q,callbackCancel:"",self:this,text:String(l.unsavedData).replace("__VALUE__",f.count)+'<br/><span class="b-text_style_bold">'+
f.labels+"</span>",args:[c,d],checkbox:{msg:l.unsavedDontShow,cb:w}}))}e||Q(c,d)}},Q=function(c,d,f){a.trigger("closeTab",{});var g;d=d?d:this.getAttribute("rel");if(b[d])if(b[d]&&b[d].pin)"form"===b[d].type&&a.trigger("reloadTab",{tabId:d,__src:"pinForm"});else{a.trigger("closeTabEvent",{tabId:d});a:{var k;if(b[d]){if(b[d].gParent){if(g=b[d].gParent,!b[g].actChild)break a}else if(!b[d].actChild&&d!==h)break a;if("parent"===b[d].hType)if("backBtn"===f)k="tab0";else{f=[];var l=0,p;for(p in b)"parent"===
b[p].hType&&(f.push(p),p===d&&(k=l),l++);p=k+1;k-=1;k=f[p]?U(f[p]):f[k]?U(f[k]):e}else k=b[d].parent,b[d].gParent&&(g=b[d].gParent,b[g].actChild=k);b[k].gParent&&(b[b[k].gParent].actChild=k);b[k].activate();g=g?g:k;h=k;a.trigger("activateTab",{tabId:k});a.trigger("changeTabStatus",{func:O(g),type:"activate"});a.trigger("changedTab",{tabId:k});a.trigger("changedTabs",{tabs:b});(b[k].aupdate||b[k].notLoaded)&&a.trigger("reloadTab",{tabId:k,__src:"activateTab",selid:!0,filter:!0})}}b[d]&&b[d].child&&
Z(b[d].child);b[d]&&"child"===b[d].hType&&(g=b[d].parent,b[g].child=null);b[d].close();delete b[d];c&&c.preventDefault();a.trigger("updTableHeight");a.trigger("changedTabs",{tabs:b})}},fa=function Sa(c){a.trigger("closeTabEvent",{tabId:c});b[c].parent&&Sa(b[c].parent);b[c].close();delete b[c]},Z=function la(c){a.trigger("closeTabEvent",{tabId:c});b[c].child&&la(b[c].child);b[c].close();delete b[c]},da=function(a){if(b)for(var c in b)b.hasOwnProperty(c)&&"tab0"!==c&&Q(a,c)},H=function(a){if(b){var d=
c(".tab-content_st_active").attr("data-tabid"),d=b[d].gParent?b[d].gParent:d,e;for(e in b)b.hasOwnProperty(e)&&"tab0"!==e&&"parent"===b[e].hType&&e!==d&&Q(a,e)}},ca=function(d,e){d.preventDefault();var g,h,k=[];g=c(this);var p=filterXSS.friendlyAttrValue(g.parents(".toolbar").attr("data-plid")||""),n="report"===g.closest(".tab-content").attr("data-report");g=e?e:this.getAttribute("rel");k.push(p);h=b[g].parent;if(f.Dom.hasClass(this,"updatetab")){k=p.lastIndexOf("/");h=l.url;var n=this.getAttribute("data-url").replace("func=",
""),m={};m.func=n;-1!==k&&(p=p.substring(0,k),k=p.lastIndexOf("/"),-1===k?m.elid=p:(m.plid=p.substring(0,k),m.elid=p.substr(k+1)));a.trigger("ajaxRequest",{url:h,param:m,invar:{parent:null,targetTabId:g,iType:"replace",__src:"toolbarAction"},type:"get",outtype:"json",trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",queue:"noqueue"});a.trigger("tabLoading",{tabId:g})}else Q.apply(this,[d,g,"backBtn"]),h&&!n&&(a.trigger("reloadTab",{tabId:h,__src:"backBtn",selid:k,filter:!0}),a.trigger("tabLoading",
{tabId:h}))},za=function(c,d){var e=d.tabId,f=d.delay;h!==e?void 0!==b[e]&&b[e].autoupdate&&(setTimeout(function(b,c){return function(){a.trigger("updateTab",{tabId:b,delay:c})}}(e,f),1E3*f),b[e].autoupdate=!0):a.trigger("reloadTab",{tabId:e,__src:"autoUpdate",selid:!0,filter:!0})},Aa=function(a){a.preventDefault();a=this.getAttribute("data-tabid");b[a]&&(b[a].autoupdate=!1,clearTimeout(b[a].timeId),f.Dom.removeClass(this,"i-list-icon__stop"),f.Dom.addClass(this,"b-elem_style_gracescale"))},Ba=function(a){var b=
[],d;c("#cont-"+a+' .list_table tr.selected:not(".filtred")').each(function(){d=this.getAttribute("data-elid");b.push(d)});return b},ka=function(a){var b,c,d,e=a.headers,g={};for(d in e)g[e[d].name]={type:e[d].type,hidden:e[d].hidden?!0:!1};a.headersName=g;var h=a.tabId,k=a.headers,p=a.props,n=a.elKeyName||a.elKey,m=a.elKey,s=k.length,r,q,t,u,v,z,w,x,e=""+('<table class="list_table init b-list__table_type_body" id="lt-'+h+'"><thead><tr>'),g=""+('<table id="sort_table-'+h+'" class="sort_table b-list__table_type_head"><thead class="1"><tr>');
d=""+('<table id="statusbar-'+h+'" class="statusbar b-list__table_type_footer"><tbody class="1"><tr>');for(b in k)if(r=k[b],!r||!r.hidden){q=r.hint?" hint ":"";q+=r.align?" align-"+r.align:"";r.minimize&&(q+=" i-minimize-col ");x=0===b-0;u=' data-colname="'+r.name+'" ';v=' data-colname="'+r.name+'" ';v+=' data-coln="'+b+'" ';u+=r.total?' data-type="'+r.type+'" ':"";u+=r.nestedreport?' data-nestedreport="'+r.nestedreport+'" ':"";u+=r.nestedlist?' data-nestedlist="'+r.nestedlist+'" ':"";u+=r.nestedlistBlank?
' data-nestedlist-blank="true" ':"";u+=r.editform?' data-editform="'+r.editform+'" ':"";r.hint=r.hint?f.u.escapeQuote(r.hint):void 0;u+=r.hint?' data-hint="'+r.hint+'" ':"";u+=r.width?' width="'+r.width+'"':"";z=0!==b-0?'<div class="rowHandler"><div class="rowLine1"></div><div class="rowLine2"></div></div>':"";u+=r.edit?' data-edit-func="'+r.edit+'" ':"";m===r.name&&(q+=" keyfield ");n===r.name&&(q+=" keynamefield ");x?(q+="first ",w=l.selected+" - 1"):w="";s-1===b&&(q+="last");r.sort&&!a.band?(q+=
" td_sort i-tip-target_st_sort i-tip-target_st_msort",c=r.sort):r.sort&&a.band&&(q+=" td_client_sort i-tip-target_st_sort i-tip-target_st_msort",c=r.sort);v+=c?' data-sorttype="'+c+'" ':"";r.sorted?(t=String(r.sorted).match(/\+/)?'<div class="triangl-bot triangle"></div>':'<div class="triangl-top triangle"></div>',1<a.sortedCount&&(t+='<div class="b-sort-table__sort-order">'+String(r.sorted).charAt(1)+"</div>"),v+='sorting="'+r.sorted+'"'):t='<div class="triangle"></div>';t+='<div class="filter-icon hint"  data-hint=""></div>';
aa&&(t+='<a href="#" class="devel-link-settings devel-link-settings--col" data-elid="'+r.name+'" data-tabid="'+h+'"></a>',t+='<a href="#" class="devel-link-delete devel-link-delete--col" data-elid="'+r.name+'" data-name="'+r.pName+'" data-tabid="'+h+'"></a>',x&&(t+='<a href="#" class="devel-link-add devel-link-add--col"  data-tabid="'+h+'"></a>'));if("button"===r.type)for(b in r.confirm)""!==r.confirm[b]&&(v+=" data-confirm-"+b+'="'+r.confirm[b]+'" ');e+='<th  class="'+q+'" '+u+'><div class="ovf" '+
v+'><span class="data-wrapper" data-mn="'+r.name+'" data-fn="'+a.func+'">'+r.pName+"</span>"+t+"</div> "+z+"</th>";g+='<td  class="'+q+'" '+u+'><div class="ovf"  '+v+'><span class="data-wrapper" data-mn="'+r.name+'" data-fn="'+a.func+'">'+r.pName+"</span>"+t+"</div> "+z+"</td>";if(0===b-0)d+="<td "+u+'><div class="ovf"><span class="sb-result sb-result_index_0 sb-result_st_active" data-mn="msg_total" data-fn="desktop">'+l.total+": "+a.pager.pageElems+'</span><span class="sb-selected sb-selected_index_0" data-mn="msg_selected" data-fn="desktop">'+
l.selected+": 1</span></div></td>";else{if(""!==r.total)if("object"===_typeof(r.total)){r=r.total;q="";t=0;v=void 0;z="";x=void 0;var H=!1,H=void 0,y="";for(v in r)z=0!==t?",</span> ":"",y=0===r[v]-0?"no":"default",x=p[v],(H=""===x.style)?q+=z+'<span class="'+y+'"><div class="props s-icon s16x16 '+x.onImg+" i-total-prop-"+v+'"></div>'+r[v]:(H=x.animated?".gif":".png",q+=z+'<span class="'+y+'"><img class="props" src="'+l.commonDir+"img/"+x.onImg+H+'"/>'+r[v]),t++;r=q+="</span>"}else r=r.total;else r=
"";d+="<td "+u+'><div class="ovf"><span class="sb-result sb-result_st_active sb-result_index_'+b+'">'+r+' </span><span class="sb-selected sb-selected_index_'+b+'">'+w+"</span></div></td>"}}b=e=g+"</tr></thead></table>"+(e+"</tr></thead>");c=d+"</tr></thead></table>";d=pa(a);b+=d;a.sbar&&(b+='<div class="bottom-bar">',b+=c);return b},pa=function(b){var d="<tbody>",e=b.plid?' data-plid="'+filterXSS.safeAttrValue("div","data-plid",b.plid)+'" ':"",g,h,k,l,p,r,n=b.elKeyName||b.elKey,m=b.elKey,s=0,q=b.content;
b.defProp=b.props?Ca(b.props):null;b.backBtn&&(h=b.headers.length,d+='<tr class="back-btn"><td colspan="'+h+'"><div class="back-btn-row hint" data-tabid="'+b.tabId+'" ><div class="hint back-btn-row-hint" data-hint="'+f.u.escapeQuote(f.Common.msg.hintBack)+'"></div></td></tr>',s++);for(g in q)h=q[g],l=l=l=k="",s++,t++,p="",r=e,r+=' id="i-'+t+'" ',r+=' data-index="'+g+'"',void 0!==m&&void 0!==h[m]&&(l=h[m].v.replace(/"/g,"&quot;"),r+=' data-elid="'+l+'" ',k=h[m].v),void 0!==n&&void 0!==h[n]&&(l=h[n].v.replace(/"/g,
"&quot;"),r+=' data-elkeyname ="'+l+'" '),l=0===s%2?" even ":"",h._ovcol&&(l+=" "+h._ovcol+" "),h._ovhide&&(r+=' data-hide="'+h._ovhide+'" ',l+=" toolbtn-hide "),h._ovremove&&(r+=' data-remove="'+h._ovremove+'" ',l+=" toolbtn-remove "),h._ovshow&&(r+=' data-show="'+h._ovshow+'" ',l+=" toolbtn-show "),b.warning&&void 0!==b.warning[k]&&void 0!==b.warning[k].msg&&(l+=" warning",p=f.u.escapeQuote(b.warning[k].msg),delete b.warning[k]),l+=" b-list__table-row",d+='<tr class="'+l+'"'+r+" >",d+=ia(h,b,p),
d+="</tr>";b.warning&&a.trigger("nextEventBind",{event:"appendList",tData:b.warning,cb:function(b,d){if(b.data){var e=d.tabId,f=c("#cont-"+e+" .b-message__text_warning").get(0),g=b.data,h="";if(f){for(var k in g)g[k]&&(h+=g[k].msg+"<br/>");h&&(f.innerHTML=h);a.trigger("updateScroll",{id:"cont-"+e})}}}});d=d+"</tbody>"+Ga(b);d+="</table>";return d+="</div>"},ia=function(a,b,c){var d=b.headersName,e="",g=b.elKey,h=0,k=0,p,r,n,s,q,t,u,v,z,w,x,H;for(r in d)if(!d[r]||!d[r].hidden){h++;t=x=p="";v="b-list__table-col_name_"+
r;H=z=n=w="";g===r&&(x+=" key-field ");1===h&&""!==c&&void 0!==c&&(p='<div class="warning-img hint" data-hint="'+c+'"></div>');q=a[r];b.headers[k].edit&&(t+=" editable ");b.testMode&&(t+=" i-testmode-field ");b.headers[k].fastFilter&&!b.blockId&&(t+=" i-filter-field ");u=void 0===b.headers[k].nestedlist||q.nestedlist?"":" i-nestedlist b-list__table-col-content_type_link";u+=void 0===b.headers[k].editform||q.nolink?"":" i-editform b-list__table-col-content_type_link b-list__table-col-content_style_underline";
if(void 0!==q)if(s=d[r].type,"data"===s||"prop"===s||"money"===s)if(void 0!==q.color&&(x+=" status-"+q.color),b.headers[k].acthint&&(x+=" acthint "),s=b.headers[k].noescaping?m.filterXSS(m.htmlDecode(q.v)):q.v,H=q.id?m.filterXSS(m.htmlDecode(q.id)):null,u+=b.headers[k].wrap?" b-list__table-col-content_is_wrap ":"",x+=void 0!==b.headers[k].nestedreport?" nestedreport ":"",x+=b.headers[k].align?" align-"+b.headers[k].align:"",w+=q.link?' data-child-id="'+b.oTabId+"-"+q.childid+'" ':"",w+=q.elid?' data-elid="'+
q.elid+'" ':"",z+=H?' data-v-id="'+H+'"':"",z+=q.orig?'data-orig="'+q.orig+'"':"",q.props){w+=q.psp?' data-stat="'+q.psp+'" ':"";w='\n                  <td>\n                    <div class="ovf i-text-content '+t+'">\n                      '+p+'\n                      <span class="data-wrapper " '+w+">\n                        ";s=b;H=a;p="";for(var y=n=v=t=void 0,A=void 0,C=void 0,B=void 0,D=q.props,E=D.length,G=void 0,G=1;G<E;G++)if(D[G].n){t=D[G].n;C=f.u.escapeQuote(s.props[t].hint);v=s.props[t].func;
n=s.props[t].type;var A=s.props[t].hide,y=B="",L;if(L=v)a:{if(A){L=A.length;for(var ca=void 0,J=void 0;L--;)if(ca=A[L].n,J=A[L].v,H[ca]&&H[ca].v===J){L=!1;break a}}L=!0}L&&(B+=' data-func="'+v+'" ',B+=' data-type="'+n+'" ',B+=' data-value="'+D[G].v.replace(/"/g,"&quot;")+'" ',y+="controlprop","group"===n&&(B+=' data-confirm="'+s.props[t].confirm+'" '),s.props[t].cgi&&(B+=' data-cgi="'+s.props[t].cgi+'" '));B+='data-name="'+s.props[t].name+'"';v||(B+=' data-value="'+D[G].v.replace(/"/g,"&quot;")+'" ');
y=s.props[t].acthint?y+" acthint":y+" hint";""!==C&&C?(C=f.u.escapeQuote(C.replace("__value__",D[G].v)),B+=' data-hint="'+C+'" '):""!==D[G].v&&D[G].v&&(B+=' data-hint="'+f.u.escapeQuote(D[G].v)+'" ');s.props[t].style&&(B+=s.props[t].style);p=s.props[t].animated?p+('<img class="props '+y+' " '+B+' src="'+l.commonDir+"img/"+s.props[t].onImg+'.gif"/>'):p+('<div class="s-icon s16x16 props '+y+" "+s.props[t].onImg+'" '+B+"></div>")}e+=w+p+'\n                      </span>\n                      <span class="data middle '+
x+'">\n                        <span class="b-list__table-col-content '+u+'" '+z+">"+q.v+"</span>\n                      </span>\n                    </div>\n                  </td>"}else e+='\n                  <td class="first '+v+'">\n                    '+p+'\n                    <span class="i-text-content data-wrapper data '+x+" "+t+'" '+w+'>\n                      <span class="b-list__table-col-content '+u+'" '+z+">"+s+"</span>\n                    </span>\n                  </td>";else if("indicator"===
s)q.u&&q.l&&(void 0!==q.color&&(x=" status-"+q.color),0!==parseInt(q.l,10)&&(0===parseInt(q.u,10)?z=0:(z=Math.round(100*(q.u/q.l)),0!==z&&z||(z=0),z=100<z?100:z),n='<div class="used-wr"><div class="used" style="width:'+z+'%"></div></div>')),e+='<td class="first"><span class="i-text-content data-wrapper data '+x+t+'">'+p+'<span class="b-list__table-col-content '+u+'">'+m.htmlDecode(q.v)+"</span></span>"+n+"</td>";else if("indicatorbrackets"===s)void 0!==q.color&&(x=" status-"+q.color),s=q.l||"",""!==
q.u&&(s+=' (<span class="'+x+'">'+q.u+"</span>)"),e+='<td class="first"><span class="i-text-content data-wrapper data">'+p+'<span class="b-list__table-col-content '+u+'">'+s+"</span></span></td>";else{if("button"===s){for(u=0;u<q.buttons.length;u++)if(x=q.buttons[u],""!==x){z=x;p=b.btn[z].msgsrc&&a[b.btn[z].msgsrc];w="";p||(w+=' data-func="func='+b.func+'" ');w+=' data-type="'+b.btn[x].type+'" ';w+=' data-name="'+x+'" ';s=b.btn[x].type;z=p?a[b.btn[z].msgsrc].v:b.btn[z].name;if("edit"===s||"group"===
s||"editlist"===s)w+=' data-form="func='+b.btn[x].func+"&elid="+a[b.elKey].v+'" ';H+='<a href="#" '+w+' class="dashboard-button">'+z+"</a> "}e+='<td><span class="data-wrapper">'+H+"</span></td>"}}else e+='<td><span class="data-wrapper '+x+'"></span></td>';k++}return e},Ca=function(a){for(var b in a)if(a[b].defImg)return b;return null},Da=function(a,b){c("#"+b.id).html(b.convertValue)},Ga=function(b){for(var c=b.headers,d=c.length,e="<tfoot><tr>",g=b.content,h,k="",l=f.Common.msg,p="",r,n,s=0;s<d;s++)if(!(c&&
c[s]&&c[s].hidden)){n=h="";p="align-"+(c[s].align||"");if("sum"===c[s].total){k=r=c[s].name;h=g;for(var m=h.length,q=0,t=void 0,u=0,v=void 0;m--;)t=h[m][k].orig?h[m][k].orig-0:""===h[m][k].v?0:parseFloat(h[m][k].v.replace(/\s/g,"")),v=(v=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,v[1]?v[1].length:0,-(v[2]?+v[2]:0)):0,u=v>u?v:u,q+=t;0<u&&(q=q.toFixed(u));h=q;k=l.totalSum||""}else if("sumsuffix"===c[s].total){k=l.totalSum||"";q=r;t=g;r=c[s].convert;u=t.length;h=void 0;for(m="";u--;)h=
f.List.dataCalc(h,t[u][q]);q=void 0;for(q in h)""!==m&&(m+="; "),m="money"===r?m+(f.Tabs.moneyFormat(h[q])+" "+q):m+(h[q]+" "+q);h=m;r=c[s].name}else if("count"===c[s].total)h=g.length,k=l.totalCount||"";else if("avg"===c[s].total){k=r=c[s].name;h=g;q=m=h.length;t=0;for(u=u=void 0;q--;)u=""===h[q][k].v?0:parseFloat(h[q][k].orig||h[q][k].v),t+=u;u=t/m;u.toFixed&&(u=u.toFixed(2));h=u;k=l.totalAvg||""}c[s].convert&&""!==h&&(n=b.tabId+"-"+r,a.trigger("ajaxRequest",{param:{func:"convert",name:c[s].convert,
value:h},invar:{id:n},type:"get",outtype:"json",trfunc:"updateTotalWithConvertReport",failfunc:"failMenuAjaxResponse",queue:"multiload"}));e+='<td id="'+n+'" class="hint '+p+'" data-hint="'+f.u.escapeQuote(k)+'">'+h+"</td>"}return e+"</tfoot>"},qa=function(a,b,d,e){var g;a=f.Dom.byId("l-"+a);g=c(a).parent();a=g.attr("data-img");b||(b=g.attr("data-group"));g=b&&-1!=b.indexOf(".")?"":"mb-"+b;e&&a&&(g=b&&-1!=b.indexOf(".")?'style="background: url('+b+') left top no-repeat"':'style="background: url('+
d+"img/mb-"+b+'.png) left top no-repeat"');!a&&e&&(g="");return g},aa=l.devmode,Ha=l.pdfOn,ra,sa=function(c,d,e){var g="";e=e||"";"text"===c.type||"hidden"===c.type||"color"===c.type||"password"===c.type?(c.setvalue=c.setvalue||"",c.value&&(c.value=f.u.escapeQuote(c.value)),c.test&&!c.zoom?e+=" test":c.test&&c.zoom&&(e+=" testzoom"),c.passwd&&(g+='<div class="b-input-btn b-input-btn_type_passwd hint" data-hint="'+f.u.escapeQuote(c.hintGenBtn)+'" data-control-field="'+c.name+'"></div>'),c.showpwd&&
(g+='<div class="'+(c.passwd?"b-input-btn_is_left":"")+' b-input-btn b-input-btn_type_showpwd hint" data-hint="'+f.u.escapeQuote(c.hintShowPwdBtn)+'" data-control-field="'+c.name+'" data-tabid="'+d+'"></div>'),c.date&&(g+='<div class="b-input-btn b-input-btn_type_calendar hint" data-hint="'+f.u.escapeQuote(c.hintBtn)+'" data-control-field="'+c.name+'" data-type="'+c.date+'"></div>'),c.unlimit&&(g+='<div class="b-input-btn b-input-btn_type_unlimit hint" data-hint="'+f.u.escapeQuote(c.hintBtn)+'" data-control-field="'+
c.name+'"></div>'),c.change&&(g+='<div class="b-input-btn b-input-btn_type_change hint" data-hint="'+f.u.escapeQuote(c.hintBtn)+'"></div>'),c.zoom?(g+='<div class="b-input-btn b-input-btn_type_zoom hint" data-hint="'+f.u.escapeQuote(c.hintBtn)+'" data-control-field="'+c.name+'"></div>',c.inputAttr=c.attr,c.inputClasses=e,c.inputName=c.name,c.textareaClasses=" b-textarea_for_zoom",g+=n.formItemInputWithZoom(c)):"password"===c.type?(c.classes+=e,c.confirm?(c.confirmField=c.confirmField+"-"+d,c.classes+=
" b-form-confirm-field"):c.passwd&&(c.classes+=" b-form-passwd-field"),g+=n.formItemPassword(c),c.passwd?(c.pwcheck.id=d,c.pwcheck.name=c.name,g+=n.passwdCheck(c.pwcheck)):c.confirm&&(g+=n.confirmCheck(c))):(c.classes+=e,g+=n.formItemInput(c))):"file"===c.type?(c.classes+=e,c.setvalue="",c.value="",g+=n.formItemFile(c)):"textarea"===c.type?(c.classes+=c.editor,c.value=m.htmlEscape(c.value),g+=n.formItemTextarea(c),c.variables&&a.trigger("saveVarsTinyMCE",{name:c.name,tabId:d,vars:c.variables})):"desc"===
c.type?g+=n.formItemDesk(c):"htmldata"===c.type?g+=n.formItemHtmldata(c):"select"===c.type?(c.msg=m.filterXSS(c.msg),c.msg=c.img+c.msg,g+=n.formItemSelect(c)):"mselect"===c.type?(g+=n.formItemMSelect(c),c.msg_select_all&&l&&l.messages&&(l.messages.msg_select_all=c.msg_select_all)):"aselect"===c.type?g+=n.formItemSelectAutocomplete(c):"radio"===c.type?(""===c.hint&&(c.readonly+=" nohint"),g+=n.formItemRadio(c)):"radioimg"===c.type?g+=n.formItemRadioImg(c):"checkbox"===c.type?(""===c.hint&&(c.dependFields+=
" nohint"),""===c.desc&&(c.dependFields+=" nodesc"),g+=n.formItemCheckbox(c)):"slider"===c.type?g+=n.formItemSlider(c):"mgrview"===c.type?g+=n.formItemMgrview({tabId:d,theme:l.theme}):"textdata"===c.type?(c.value=m.htmlDecode(c.value),g+=n.formItemTextData(c)):"tree"===c.type?g+=ua(c,d):"ticket"===c.type?g+=n.formItemTicket(c):"link"===c.type?g+=n.formItemLink(c):"frame"===c.type?g+=n.formItemFrame(c):"datetime"===c.type?(e=f.u.parseDate(c.value),c.difftime=(new Date).getTime()-e.getTime(),c.value=
f.u.formatDateTime(e.getTime()),g+=n.formItemDateTime(c),ra=setInterval(function(a,c){return function(){var d=f.Dom.byId(a+"-"+c);if(b[a]&&d){var e=d.getAttribute("data-difftime")-0;d.innerHTML=f.u.formatDateTime((new Date).getTime()-e)}else clearInterval(ra)}}(d,c.name),500)):"listfilter"===c.type?g+=n.formListFilterWrapper({name:c.name,id:c.id,content:n.formListFilter(c)}):"captcha"===c.type&&(g+=n.formItemCaptcha(c),a.trigger("appendCaptcha",{id:d+"-"+c.name}));return g},Ia=function(c,d){var e=
c.length,g,h="",k,p,r,s,m,q,t,u,v={},z={};for(g=0;g<e;g++)if(k={name:c[g].name,title:"",content:"",classes:"",withList:c[g].withList,display:c[g].collapsed?"none":"block",collapsed:c[g].collapsed,hide:c[g].hide?c[g].hide:{},show:c[g].show?c[g].show:{},tabId:d},""!==c[g].title&&(k.title=n.formPageTitle({title:c[g].title,name:c[g].name,id:c[g].name,type:"page",collapsed:c[g].collapsed,hintCollapse:l.pageCollapse,hintExpand:l.pageExpand,blockType:"",theme:l.theme,reload:!1})),c[g].formItems){p=c[g].formItems.length;
s=c[g].formItems;for(r=0;r<p;r++)for(m=s[r].length,t=s[r],q=0;q<m;q++)if(!t[q].skip){z[t[q].name]=t[q];v[t[q].name]={defValue:t[q].value,isChanged:!1,value:t[q].value,label:t[q].label||t[q].desc||!1};"textarea"===t[q].type&&"\n"===t[q].value&&(t[q].value="",v[t[q].name].value="",v[t[q].name].defValue="");u={first:"",second:"",third:"",hint:"",classes:""};u.hide=t[q].hide||{};u.show=t[q].show||{};u.id=t[q].name+"-"+c.id;u.desc="";u.error=t[q].error?t[q].error:"";u.colspan=t[q].error?'colspan="2"':
"";u.fname=t[q].name;u.label=t[q].label;u.tabId=c.id;u.devMode=aa;u.testMode=c.testMode;t[q].id=c.id;t[q].label?u.first+=n.formItemLabel({label:t[q].label,img:t[q].l_img||"",required:t[q].required,tabId:c.id,func:c.func,id:t[q].name,devMode:aa}):"textdata"!==t[q].type&&(u.first+="<div></div>");""!==t[q].hint&&t[q].hint&&(u.third+=f.u.escapeQuote(t[q].hint),t[q].shadowHint&&(u.third+=" <span class='hint-shadow'>"+f.u.escapeQuote(t[q].shadowHint)+"</span>",u.hint+=" shadow "),u.hint+="field-help_available_yes");
if(t[q].setvalue){var w=parseInt(t[q].setvalue,10),x;isNaN(w)||(x=setInterval(function(c,d){return function(){b[c]||clearInterval(x);a.trigger("forceSetValues",{tabId:c,name:d})}}(d,t[q].name),1E3*w))}else"textarea"===t[q].type&&(t[q].quote&&(u.classes+=" b-form-row_with_quote "),t[q].third=u.third,t[q].error=u.error);t[q].desc&&""!==t[q].desc&&(u.desc=t[q].desc||"","checkbox"===t[q].type&&""!==t[q].desc&&(u.desc=""),u.descName=t[q].descName||"");"checkbox"!==t[q].type||t[q].desc||(u.classes+=" row-with-no-desc ");
u.classes+=" l-form__row_type_"+t[q].type;t[q].fixed&&(u.classes+=" i-form__row_fixed_yes b-form__row_fixed_yes");t[q].error&&(u.classes+=" row-error");void 0!==t[q].show&&(u.classes=t[q].shadow?u.classes+" depended-shadow-s":u.classes+" depended-hidden-s");u.second=sa(t[q],d,"");t[q].hasAddition&&(w=t[q+1])&&("checkbox"===w.type?""!==w.desc&&(u.desc=""):"text"===w.type&&(u.id=w.name+"-"+c.id),w.id=c.id,u.second+=sa(w,d,""),u.classes+=" l-form__row_has_addition",t[q].propWidth&&(u.classes+=" l-form__row_propwidth"),
w.error&&(u.error=w.error,u.classes+=" row-error",u.colspan='colspan="2"'));"hidden"===t[q].type?k.content+=n.formItemRowHidden(u):t[q].fullwidth?(u.classes+=" fullwidth-row",k.content+=n.formItemFullWidthRow(u)):t[q].formwidth?(u.classes+=" formwidth-row",k.content+=n.formItemFormWidthRow(u)):"desc"===t[q].type?(u.third="",u.hint="",k.content+=n.formItemRowDesc(u)):"list"===t[q].type?(t[q].id=c.id,t[q].formflags=c.formflags,t[q].parent=c.parent,t[q].testMode=c.testMode,t[q].type="form",t[q].rows&&
1===t[q].rows.length&&"table"===t[q].view||(k.content+=n.formListItemRow(t[q]))):k.content=""===u.first?k.content+n.formItemRowWithoutLabel(u):k.content+n.formItemRow(u);if(t[q].plainhint)for(u=t[q].plainhint.length,w=1;w<u;w++)t[q].plainhint[w].name=t[q].name,k.content+=n.formPlainHintRow(t[q].plainhint[w])}k.view="form";h+=n.formPageWrapper(k)}return{html:h,model:v,source:z}},ta=function(b,c){var d=c.elem,e=va(c.setvalues[c.name].tlist),g=c.id;d.after(e);c.img.attr("src",c.src);d.parent().addClass("loaded t-opened").removeClass("collapsed loading");
a.trigger("updateScroll",{id:g})},ua=function(a,b){var c,d=18*a.rows,e=a.name+"-"+b;c=va(a.tlist,a.value);return'<div class="tree-wrapper '+a.setvalue+" "+a.multiple+'" id="cont-'+e+'"  style="height:'+d+'px;"><div id="'+e+'" class="tree-inner" data-tabid="'+b+'">'+c+'<input data-type="tree" type="hidden" name="'+a.name+'" value="'+a.value+'" class="'+a.classes+'"id="'+a.name+"-"+b+'-value" data-tabid="'+b+'"/></div></div><div class="b-resizer" data-move-trigger="updateScroll" data-id="cont-'+e+'" data-tabid="'+
b+'"></div>'},va=function Ta(a,b){var c=a.length,d,e="",g,f="",h,e="<ul>";for(d=0;d<c;d++)f=(g=0<a[d].child.length)?"t-opened loaded":a[d].collapsed?"collapsed":"",f+=c-1===d?" last ":"",h=a[d].key===b?" selected ":"",e+=' <li class="'+f+' folder"> <div class="tree-hitarea bline"></div> <div class="tree-handler '+h+'"  data-val="'+a[d].key+'" ><div class="bline icon"><img src="'+l.commonDir+"img/"+a[d].img+'.png" /></div><div class="tree-label bline">'+a[d].value+"</div></div>",g&&(e+=Ta(a[d].child,
b)),e+="</li>";return e+"</ul>"},Ka=function(a){return n.infoList({rows:a.rows,testMode:a.testMode})},wa=function(b){var d=b.length,e="",g="",h="",k,p,r,s;z.dashboard={};for(var m=0;m<d;m++){b[m].name=String(b[m].name).replace(/\./g,"_");p=b[m].name;k=b[m].name;p={name:b[m].name,id:p,title:b[m].title,type:"dashboard-block",blockType:b[m].type,theme:l.theme,collapsed:"min"===b[m].display,hintCollapse:l.pageCollapse,hintExpand:l.pageExpand,hintReload:b[m].hintReload,reload:!1};if("toolbar"===b[m].type)k=
n.dashTaskbar({toolbar:b[m].toolbar});else if("list"===b[m].type)r={func:b[m].func,p_num:1,dashboard:b[m].name},b[m].rows&&(r.p_cnt=b[m].rows),c.extend(r,b[m].params),z.dashboard[b[m].name]=r,b[m].autoupdate&&setTimeout(function(b){return function(){a.trigger("refreshDashBlock",{block:b})}}(b[m]),1E3*b[m].autoupdate),a.trigger("ajaxRequest",{url:l.url,param:r,invar:{blockId:"block-"+b[m].name},type:"get",outtype:"json",trfunc:"ajaxResponseForDashboard",failfunc:"failedAjaxResponseForDashboard",queue:"noqueue"}),
k='<div id="block-'+k+'" class="block-table" data-block-name="'+b[m].name+'" data-block-cnt="'+b[m].rows+'" data-block-pnum="1" data-block-func="'+b[m].func+'"><div class="dashboard-nodata">'+l.loading+"</div></div>",p.reload=!0;else if("report"===b[m].type)r={func:b[m].func,dashboard:b[m].name},c.extend(r,b[m].params),z.dashboard[b[m].name]=r,a.trigger("ajaxRequest",{url:l.url,param:r,invar:{blockId:"block-"+b[m].name},type:"get",outtype:"json",trfunc:"ajaxResponseForDashboard",failfunc:"failedAjaxResponseForDashboard",
queue:"noqueue"}),k='<div id="block-'+k+'" class="block-table" data-block-name="'+b[m].name+'" data-block-func="'+b[m].func+'" data-block-param="'+f.Common.serializeForAttr(b[m].params)+'"><div class="dashboard-nodata">'+l.loading+"</div></div>",p.reload=!0;else if("url"===b[m].type)k='<div><iframe id="f-'+b[m].name+'" width="100%" src="'+b[m].url+'"></iframe></div>';else if("infolist"===b[m].type)r={func:b[m].func,dashboard:b[m].name},z.dashboard[b[m].name]=r,b[m].autoupdate&&setTimeout(function(b){return function(){a.trigger("refreshDashBlock",
{block:b})}}(b[m]),1E3*b[m].autoupdate),a.trigger("ajaxRequest",{url:l.url,param:r,invar:{blockId:"block-"+b[m].name},type:"get",outtype:"json",trfunc:"ajaxResponseForDashboard",failfunc:"failedAjaxResponseForDashboard",queue:"noqueue"}),p.reload=!0,k='<div class="" id="block-'+k+'" data-block-name="'+b[m].name+'"></div>';else{a.trigger("pullMsg",{msg:'Dashboard type "'+b[m].type+'" do not support.'});return}b[m].update&&a.trigger("addBlockToUpdate",b[m]);p=n.formPageTitle(p);r="min"===b[m].display?
" b-form-page_st_collapsed ":"";s="min"===b[m].display?"none":"block";k={view:"dblock",title:p,content:k,classes:r,display:s,tabId:b[m].name,hide:[],show:[]};"top"===b[m].position||"undefined"===b[m].position?e+=n.formPageWrapper(k):"left"===b[m].position?g+=n.formPageWrapper(k):"right"===b[m].position&&(h+=n.formPageWrapper(k));s=r=p=k=""}return{top:e,left:g,right:h,id:"tab0"}},La=function(b,c){var d=c.startTime||0,e=c.blockId.replace(/\./g,"_"),g,h,k,l,m,r;c.tabId=e;g=f.Dom.byId(e);r=f.Dom.byId("t"+
e);d=1E3-((new Date).getTime()-d)%1E3;setTimeout(function(){r&&(r.className=r.className.replace(/loading/g,""))},d);null!==g&&("report"===c.type?(d=Ma(c.bands,e),g.innerHTML=d,setTimeout(function(){a.trigger("loadGCharts",{bands:c,tabId:e})},10)):"infolist"===c.type?(d=Ka({rows:c.rows,testMode:c.testMode}),g.innerHTML=d):(h=d="",c.error?d=c.ermsg:(d=ka(c),"true"===c.pager.pager&&(h=xa(c.pager.pageCount,c.pager.pageNum))),d='<div id="'+e+'-scrollwrapper">'+d+'</div><div class="pager_list pager-list_type_dashboard">'+
h+"</div>",h=g.getAttribute("data-block-name"),k=g.getAttribute("data-block-cnt"),l=g.getAttribute("data-block-func"),m=g.getAttribute("data-block-pnum"),g=f.Common.replaceHtml(g,d),g.setAttribute("data-block-pnum",c.pager?c.pager.pageNum:1),g.setAttribute("data-block-name",h),g.setAttribute("data-block-cnt",k),g.setAttribute("data-block-func",l),g.setAttribute("data-block-pnum",m),c.error||a.trigger("appendDashList",{tabId:e})),setTimeout(function(){a.trigger("updateScroll",{id:"cont-tab0"})},300),
setTimeout(function(){a.trigger("updateScroll",{id:"cont-tab0"})},7E3),g=null)},Ma=function(a,b){var c=a.length-1,d="",e,g,f,h,k;if(0<c)for(e=0;e<c;e++)g=b+"-"+e+a[e].id+"0",h=f="",k=a[e].fullwidth?"fullwidth-band":"",""!==a[e].bigTitle?(f=a[e].bigTitle||"",h="big-title"):""!==a[e].smallTitle&&(f=a[e].smallTitle||"",h="small-title"),d+=n.reportBandDash({empty:a[e].empty,emptymsg:l.emptyreport,title:f,titleClass:h,id:b,gid:g,fullwidth:k});else d='<div class="dashboard-nodata">'+l.nodata+"</div>";return d},
Na=function(e,g){var h=g.tabId,k=g.resetFilterOn,m=l.url,r=g.softUpdate?"softUpdate":"hardUpdate",p=g.filter||!1,s,q=0,n=g.help,t=g.selid||!0;if((!g.reload||d(g))&&void 0!==b[h]){var u=b[h].paramObjAll,v=b[h].parent,z=g.newurl?!0:!1;g.param?(s=g.param,s.p_num!==u.p_num&&(t=!1),s.p_num&&delete u.p_num):(s=g.addedParam||{},b[h].param.match("p_num")&&(s=f.Common.parseParams(b[h].param)));u=c.extend(u,s);z&&(m=l.url);t&&(q=f.Dom.byId("ltwr-"+h+"-scrollbar-handler"),s=0,q&&(s=parseFloat(q.style.top,10)),
q=s,!0===t&&(t=Ba(h)));p&&(p=(p=f.Dom.byId(h+"-search"))?p.value:!1);k&&delete u.filter;"filterset"!==g.__src&&"buildTabOk"!==g.__src||delete u.filter;a.trigger("ajaxRequest",{url:m,param:u,invar:{dataSaved:!0,parent:v,targetTabId:h,selid:t,scrollTop:q,iType:r,__src:"reloadTab",help:n?b[h].help:!1,liveFilter:p},type:"get",outtype:"json",trfunc:"ajaxResponse",queue:"reloadTab"+h,failfunc:"failCommonAjaxResponse"});"softUpdate"!==r&&a.trigger("tabLoading",{tabId:h})}},Oa=function(e,h){var k=h.tabId,
m=h.elid?[h.elid]:!0,p="",t="";b[k]||"modal1"!==k||a.trigger("formInspectorResponse",h);if(h.ok||h.progressok){h.notifyUp&&a.trigger("forceCheckNotify");if("wait"===h.progresstype)return a.trigger("progressBarSaveState",h),!1;h.message&&h.message.length&&(f.Global.bannerHtml=h.message,f.Global.warning=h.warning,f.Global.targetId="");(p=!d(h))||(p=!s(h))||(p=!g(h))||(h&&h.dashboard?(c("#switch-tab0").trigger("click"),p=!1):p=!0,p=!p);if(p)return Q(e,k),!1;if(!r(h)||!u(h))return!1;h.bootTime&&a.trigger("startCheckRestart",
{bootTime:h.bootTime});b[k]&&b[k].parent?(p=b[k].parent,t=b[b[k].parent].parent,Q(e,k),a.trigger("reloadTab",{tabId:p,selid:m,filter:!0}),a.trigger("tabLoading",{parent:t})):Q(e,k)}else h.error&&!h.form?h.error&&h.targetTabId&&(k=n.banner({message:{status:"error",classes:"",id:h.targetTabId,text:f.Common.wordWrap(h.ermsg,100),ref:!1,refText:l.moreinfo,dismiss:h.msg.dismiss}}),c("#cont-"+h.targetTabId).find(".error-message").html(k),a.trigger("tabLoadingHide",{tabId:h.targetTabId}),q(h.targetTabId),
a.trigger("updateScroll",{id:"form-scroll-"+h.targetTabId})):a.trigger("ajaxResponse",h)},xa=function(a,b){var c="",d="",e=Math.round(2);b||(b=1);b=parseInt(b,10);var g=function(a,b){for(var c="",e=1;e<=a;e++)d=e===b-0?"pager-list__item_active":"pager-list__item_act",c+='<span class="page pager-list__item '+d+'" data-n="'+e+'">'+e+"</span>";return c},f=function(a,b,c){for(var e="",g=a-1,f=1;f<=a;f++)d=f===c-0?"pager-list__item_active":"pager-list__item_act",e=f===g?e+'<span class="page ellipsis">...</span>':
f===a?e+('<span class="page pager-list__item '+d+'" data-n="'+b+'">'+b+"</span>"):e+('<span class="page pager-list__item '+d+'" data-n="'+f+'">'+f+"</span>");return e},h=function(a,b,c){var e="";b-=a;for(var g=1;g<=a;g++)d=g+b===c-0?"pager-list__item_active":"pager-list__item_act",e=2===g?e+'<span class="page ellipsis"> ... </span>':1===g?e+('<span class="page pager-list__item '+d+'" data-n="1">1</span>'):e+('<span class="page pager-list__item '+d+'" data-n="'+(g+b)+'">'+(g+b)+"</span>");return e},
k=function(a,b,c,e){var g="";e=c-e-3;for(var f=a-1,h=1;h<=a;h++)d=h+e===c?"pager-list__item_active":"",g=1===h?g+('<span class="page pager-list__item pager-list__item_act'+d+'" data-n="1">1</span>'):2===h||h===f?g+'<span class="page ellipsis">...</span>':h===a?g+('<span class="page pager-list__item pager-list__item_act '+d+'"  data-n="'+b+'">'+b+"</span>"):g+('<span class="page pager-list__item pager-list__item_act '+d+'" data-n="'+(h+e)+'">'+(h+e)+"</span>");return g};9>=a?c=g(a,b):9<=a&&1>=b-e?
c=f(9,a,b):9<=a&&b+e>=a?c=h(9,a,b):9<=a&&(1<=b-e||b+e<=a)&&(c=k(9,a,b,e));return c},Ja=function(a,c){var d=c.tabId,e=c.chart;void 0!==b[d]&&(b[d].chart=b[d].chart||[],b[d].chart.push(e))},ga=function(c,d){var e=d.tabId,g=d.elid,h=d.pName,k=d.value,m=l.url,p=d.self,r;void 0!==b[e]&&(r=f.Common.clone(b[e].paramObjAll),r.hint_field=h,r.plid=r.elid,r.elid=g,k&&(r.value=k),a.trigger("ajaxRequest",{url:m,param:r,invar:{hintTabId:e,hintElid:g,hintValue:k,hintPName:h,self:p},type:"get",outtype:"json",trfunc:"ajaxResponseHint",
queue:"actHint"+e,failfunc:"failCommonAjaxResponse"}))},X=function(c){c=this.getAttribute("data-tabid");b[c]&&a.trigger("formFieldChanged",{tabObj:b[c],tabId:c,field:this})},ma=function(a){var c=a.tabId;b[c]&&(a.__formModel=b[c].formModel)},ea=function(a){if(a.tabId){var c=a.tabId.replace("cont-","");b[c]&&b[c].__content&&b[c].__headers&&(a.__content=b[c].__content,a.__headers=b[c].__headers)}},na=function(a,c){var d=c.tabId;b[d]&&(b[d].formModel[c.name]=c.value)},ya=function(a){a&&(a.__tabs=b)},
ja=function(a){if(b[a]&&b[a].formModel){a=b[a].formModel;var c=0,d="",e=!1,g;for(g in a)a[g].isChanged&&a[g].label&&(c++,d+=a[g].label+"<br/>",e=!0);return{isChanged:e,count:c,labels:d}}return{isChanged:!1,count:0}},Ea=function(c,d){var e=d.tabId;b[e]&&a.trigger("ajaxRequest",{param:{page:d.name,action:b[e].func,func:"collapse",collapse:d.collapsed?"off":"on"},trfunc:"DoNothing",queue:"noqueue"})},Fa=function(d){d.preventDefault();d=c(this);var e=d.closest(".tab-content").attr("data-tabid"),g,f={param:{},
trfunc:"favoriteMenuUpdateDone",outtype:"json"};b[e]&&((g=b[e].favorite)?(f.param.func="usermenu.suspend",d.addClass("b-elem_style_gracescale"),d.attr("data-state","unfavorite")):(f.param.func="usermenu.resume",d.removeClass("b-elem_style_gracescale"),d.attr("data-state","favorite")),f.param.elid=b[e].func,a.trigger("ajaxRequest",f),b[e].favorite=!g)},ha=function(d){d.preventDefault();d=c(this);var e=d.closest(".tab-content").attr("data-tabid"),g,f=c("#switch-"+e),h={param:{},trfunc:"pinTabDone",
outtype:"json"};b[e]&&((g=b[e].pin)?(h.param.func="usermenu.unpin",d.addClass("b-elem_style_gracescale"),d.attr("data-state","unpin"),f.removeClass("subtab_is_pin")):(h.param.func="usermenu.pin",d.removeClass("b-elem_style_gracescale"),d.attr("data-state","pin"),f.addClass("subtab_is_pin")),h.param.elid=b[e].func,a.trigger("ajaxRequest",h),b[e].pin=!g,a.trigger("changedTabs",{tabs:b}))},oa=function(c,d){if(d.s&&d.t&&b[d.s]&&b[d.t]){var e=b[d.s].sIndex;b[d.s].sIndex=b[d.t].sIndex;b[d.t].sIndex=e;a.trigger("changedTabs",
{tabs:b})}},Pa=function(a,b){var d=c(".tab-content_st_active"),e=d.attr("data-tab-type"),g=d.attr("data-tabid");"list"===e||"report"===e?d.find(".toolbar-button__item-img.back").trigger("click"):"form"===e&&c("#switch-"+g).find(".i-tab-close").trigger("click")};return{init:function(){a.bind("ajaxResponse",y);a.bind("builtTab",T);a.bind("comboCtrlShiftZKeyUp",da);a.bind("comboCtrlShiftXKeyUp",H);a.on("#main-wrapper","a.close","click",ba);a.on("#main-wrapper","span.back","click",ca);a.on("#main-wrapper",
"#tabs .switch","click",V);a.on("#main-wrapper","#tabs .switch","mousedown",W);a.on("#main-wrapper","#tabs .switch","dblclick",Y);a.bind("reloadTab",Na);a.bind("updateTab",za);a.bind("ajaxFormResponse",Oa);a.on("#main-wrapper",".i-button_type_cancel","click",v);a.bind("ajaxResponseForDashboard",La);a.bind("addedChart",Ja);a.bind("formGetTreeBranch",ta);a.bind("getActiveHint",ga);a.on("#main-wrapper","input, textarea","change",X);a.on("#main-wrapper",".i-list-icon__stop","click",Aa);a.addHook("formSetValues,formSubmit",
ma);a.bind("updateModel",na);a.addHook("listMultiSelect,listSelect,listLiveFound,listUnSelect,ajaxResponseEditInListSave,updateTotalList,clickedGroupItem",ea);a.bind("saveFormPageState",Ea);a.on("#main-wrapper",".i-take-favorite","click",Fa);a.on("#main-wrapper",".i-pin","click",ha);a.bind("loadPage",k);a.addHook("menuAction,testColCheck",ya);a.bind("changeTabSortIndex",oa);a.bind("updateTotalWithConvertReport",Da);a.addToTriggerStack("escKeyUp",Pa,1)},tabs:b,closeTab:Q,moneyFormat:function(a){var b=
(""+parseFloat(a).toFixed(2)).split("."),c=b[0]||"",b=b[1]||"",d=[];if(c){for(var e=c.length,g=Math.floor(e/3),f=0;f<g;f++)d.push(c.substr(e-3*f-3,3));d.push(c.substr(0,e%3));d.reverse()}return 0<d.length?d.join(" ")+"."+b:a}}}(window,$,EventMgr,App,templates);"use strict";
App.Validators=function(m,c,a,f){var n=m.pageInfo,b=function(b,e){var d=this.getAttribute("data-check"),f=this.getAttribute("data-check-args"),h=this.getAttribute("data-error-msg"),l=this.getAttribute("data-fieldname"),m=this.getAttribute("data-funcname"),p=c(this).siblings(".b-input__prefix").html(),n=this.getAttribute("data-convert");""===this.value?a.trigger("okMsgValid",{self:this,number:0,value:""}):a.trigger("checkValue",{name:d,prefix:p,param:f,err:h,fieldname:l,number:0,funcname:m,convert:n,
self:this,value:this.value})},l=function(b,c){if(""===this.value)a.trigger("okMsgValid",{self:this,number:0,value:""});else{var d=0,e=this.value,e=this.value.split(/\s+/),f=e.length;if(c)var d=c.number,h=d+1,d=f===h?0:h,e=e[h-1];else{if(1===f)d=0;else{if("yes"!==this.getAttribute("duplicate")){a:{h=e.length;for(d=0;d<h;d++)for(f=d+1;f<h;f++)if(e[d]===e[f]){d=!0;break a}d=!1}if(d){a.trigger("errMsgValid",{type:"duplicate",self:this,err:n.duplicate,number:0});return}}d=1}e=this.value.split(/\s+/)[0]}var f=
this.getAttribute("data-check"),h=this.getAttribute("data-check-args"),l=this.getAttribute("data-error-msg"),m=this.getAttribute("data-fieldname"),p=this.getAttribute("data-funcname"),t=this.getAttribute("data-convert");a.trigger("checkValue",{name:f,param:h,err:l,multi:!0,fieldname:m,funcname:p,self:this,number:d,value:e,convert:t})}},p=function(a,b,c){a=String(a).split(/\s+|\n/);for(var e=a.length,f={v:"",changed:!1};e--;)if(String(a[e])===String(b)){String(b)!==String(c)&&(f.changed=!0);a[e]=c;
break}f.v=a.join(" ");return f},t=function(b,e){var d=e.self,f=e.number,m=e.value,n=e.ovalue,t=e.vvalue,q=e.multi,v=e.notOk,w=e;e={};e.number=f;0!==f-0?(n=p(d.value,t,m),d.value=n.v,n.changed&&h(b,w),l.apply(d,[null,e])):(f=c(d).parents(".l-form__col_cont_control"),2!==f.attr("colspan")-0||f.hasClass("formwidth")||f.attr("colspan",""),""===m&&d.getAttribute("required")||v?f.parents(".l-form__row").removeClass("row-error").removeClass("row-ok"):f.parents(".l-form__row").removeClass("row-error").addClass("row-ok"),
void 0!==m&&void 0!==n&&void 0!==t&&(n={},q?(n=p(d.value,t,m),d.value=n.v,n.changed&&h(b,w)):""!==m&&((d.value!==m||n.changed)&&h(b,w),d.value=m)));m=c(d).closest(".tab-content").attr("data-tabid");a.trigger("syncInputToZoom",{tabId:m,self:d});a.trigger("updFormHeight",{tabId:m})},h=function(a,b){b.warning=!0;b.err=n.messages.validChangeVal;e.apply(m,[a,b])},e=function(b,e){var d=e.err,f=e.self;f.getAttribute("name");var h=f.getAttribute("id"),l=e.number,p=f.value?f.value.split(" "):[],n="",t=e.warning,
w,y;0===l-0&&(l=p.length);for(w=0;w<l-1;w++)n+=p[w]+" ";l=n.length;d='<div class="b-error-box"><div class="b-error-box__top-triangle"></div><div class="b-error-box__inner">'+d+"</div></div>";c('.b-error-box__wrapper[data-id="'+h+'"]').html(d);y=c(f).parents(".l-form__col_cont_control");y.attr("colspan")||t||y.attr("colspan","2");t?(y.parents(".l-form__row").addClass("row-warning"),setTimeout(function(){y.parents(".l-form__row").removeClass("row-warning")},2E3)):y.parents(".l-form__row").addClass("row-error").removeClass("row-ok");
h=c(f).closest(".tab-content").attr("data-tabid");a.trigger("updFormHeight",{tabId:h});a.trigger("updateFixedField",{tabId:h});t||(d=c(f),t=d.closest(".l-form__row")[0]?d.closest(".l-form__row")[0].offsetTop:0,d=d.closest(".b-form-page"),n=c("#form-scroll-"+h),d.hasClass("b-form-page_st_collapsed")&&d.find(".i-form-page__title").trigger("click"),n.length&&(p=parseFloat(n[0].style.height),n=n[0].scrollTop,d[0]&&(t+=d[0].offsetTop),t+=78,(t<n||p+n<t)&&a.trigger("scrollTo",{id:"form-scroll-"+h,offsetTop:t,
animate:!1,raw:!1})),"file"!==String(f.getAttribute("type")).toLowerCase()&&(0!==f.offsetWidth?(f.focus(),m.scrollTo(0,0),f.setSelectionRange?f.setSelectionRange(l,l):f.createTextRange&&(f=f.createTextRange(),f.collapse(!0),f.select(l,l))):f.nextSibling&&(f.nextSibling.focus(),m.scrollTo(0,0),f.setSelectionRange?f.nextSibling.setSelectionRange(l,l):(f=f.nextSibling.createTextRange(),f.collapse(!0),f.select(l,l)))))};return{init:function(){a.on("#main-wrapper",'input[type="text"].test',"change",b);
a.on("#main-wrapper",'input[type="text"].testzoom',"change",l);a.bind("errMsgValid",e);a.bind("okMsgValid",t)}}}(window,$,EventMgr,App);"use strict";
App.Wizards=function(m,c,a){function f(c,b){var f=b.tabId;setTimeout(function(){a.trigger("bindHorizScrollControl",{leftBtn:"#cont-"+f+" .i-wizard__triangle_dir_left",rightBtn:"#cont-"+f+" .i-wizard__triangle_dir_right",actElem:"#cont-"+f+" .i-wizard__step-num_st_active",innerBox:"#cont-"+f+" .i-wizard__inner",id:f})},50)}return{init:function(){a.bind("appendForm",f)}}}(window,$,EventMgr);"use strict";
App.Calendar=function(m,c,a){function f(){return c("#calendar")}function n(){B||(B=document.getElementById("calendar"),B||(B=document.createElement("div"),B.setAttribute("class","cl"),B.setAttribute("id","calendar"),K=document.createElement("div"),K.setAttribute("class","cl-cell"),K.setAttribute("id","calendar-cell"),B.appendChild(K),document.body.appendChild(B)));K||(K=document.getElementById("calendar-cell"));J||(J=document.getElementById("calendar-y"),J||(J=document.createElement("div"),J.setAttribute("id",
"calendar-y"),J.setAttribute("class","cl-ym-y"),document.body.appendChild(J)));I||(I=document.getElementById("calendar-m"),I||(I=document.createElement("div"),I.setAttribute("id","calendar-m"),I.setAttribute("class","cl-ym-m"),document.body.appendChild(I)));A||(a.on(f(),T,"click",d),a.on(f(),fa,"click",l),a.on(f(),ba,"click",h),a.on(f(),W,"mousedown",s),a.on(f(),Y,"mousedown",s),a.on(c("#calendar-m"),Q,"mouseup",q),a.on(c("#calendar-y"),Q,"mouseup",q),a.on(c("#calendar-y"),Q,"mouseover",w),a.on(c("#calendar-y"),
Q,"mouseout",y),a.on(c("#calendar-m"),Q,"mouseover",w),a.on(c("#calendar-m"),Q,"mouseout",y),A=!0)}function b(a){var b=a.target?a.target:a.srcElement;a=c(b).offset();var d=m.innerWidth,e=B.offsetWidth,g=B.offsetHeight,f=a.left-e+b.offsetWidth,b=a.top+b.offsetHeight-1,h=m.innerHeight-(b+g);0>d-(f+e)&&(f=d-e);0>h&&(b=a.top-g);C&&(f+=1);B.style.left=f+"px";B.style.top=b+"px";B.style.visibility="visible"}function l(a){a.preventDefault();if(this){a=this.getAttribute("data-value");var b=x.getFullYear();
e(b,a-0+1);u()}}function p(){if(""===J.innerHTML){var a;for(a=0;12>a;a++){var b=document.createElement("div");b.id="ycombo"+a;b.className=0===a%2?"cl-ym-div":"cl-ym-diveven";b.innerHTML="y "+a;J.appendChild(b);b=document.createElement("div");b.id="mcombo"+a;b.className=0===a%2?"cl-ym-div":"cl-ym-diveven";b.innerHTML="m "+a;I.appendChild(b)}}}function t(a){var b=a.getFullYear(),c=a.getMonth(),d=a.getDate(),e,f;0===c?(e=b-1,f=11):(e=b,f=c-1);var h=document.getElementById("calmonth");document.getElementById("calyear").innerHTML=
b;if(h){h.innerHTML=S[c];a=new Date(a.getFullYear(),a.getMonth(),a.getDate());a.setDate(1);a=a.getDay();0===a&&(a=7);b=g(b,c);f=g(e,f)-(a-2);e=[1,1,1,1,1,1,1,1];for(var h=c=1,k,l=2;8>l;l++)for(var m=0;7>m;m++)N.rows[l].className="",N.rows[l].cells[m].className=0===l%2?"cl-days":"cl-even cl-days",5<=m&&E(N.rows[l].cells[m],"cl-weekend"),N.rows[l].cells[m].id="",2===l&&m+1<a?(N.rows[l].cells[m].className=0===l%2?"cl-behind cl-days":"cl-even cl-behind cl-days",5<=m&&E(N.rows[l].cells[m],"cl-weekend"),
k='<div class="inner-td">'+f+"</div>",N.rows[l].cells[m].innerHTML=k,N.rows[l].cells[m].id=f,f++):c>b?(N.rows[l].cells[m].className=0===l%2?"cl-days cl-future":"cl-even cl-future cl-days",5<=m&&E(N.rows[l].cells[m],"cl-weekend"),k='<div class="inner-td">'+h+"</div>",N.rows[l].cells[m].innerHTML=k,N.rows[l].cells[m].id=h,h++,0===m&&(e[l]=0)):(k='<div class="inner-td">'+c+"</div>",N.rows[l].cells[m].innerHTML=k,c===d&&E(N.rows[l].cells[m],"cl-selected"),c++),0===m?E(N.rows[l].cells[m],"cl-first"):6===
m&&E(N.rows[l].cells[m],"cl-last"),2===l?N.rows[l].className="first-row":7===l&&(0!==e[l]?N.rows[l].className="last-row":N.rows[l-1].className="last-row");for(d=5;d<e.length;d++)N.rows[d].style.display=1===e[d]?"table-row":"none"}}function h(a){a=a||m.event;var b=(a.target?a.target:a.srcElement).innerHTML;if(String(b).match(/\d+/)){var b=b.replace(/\D[^\.]/g,""),d=c(this),b=parseInt(b,10);if(d.hasClass("cl-behind"))x.setMonth(x.getMonth()-1,b);else if(d.hasClass("cl-future"))x.setMonth(x.getMonth()+
1,b);else if(isNaN(b))return;k(x.getFullYear(),x.getMonth()+1,b);B||(B=document.getElementById("calendar"));document.onmouseup=null;document.onmousedown=null;B.style.visibility="hidden";F(a)}}function e(a,b){10>b&&(b="0"+String(b));if(null===L.getAttribute("readonly")){var d=a+"-"+b;L.value=d;c(L).trigger("change");O&&""===O.value&&(O.value=d,c(O).trigger("change"))}}function k(a,b,d){10>b&&(b="0"+String(b));10>d&&(d="0"+String(d));null===L.getAttribute("readonly")&&(a=a+"-"+b+"-"+d,L.value=a,c(L).trigger("change"),
O&&""===O.value&&(O.value=a,c(O).trigger("change")))}function g(a,b){var c=[31,28,31,30,31,30,31,31,30,31,30,31];return 1!==b||0!==a%4||0===a%100&&0!==a%400?c[b]:29}function d(a){a=a||m.event;var b=x.getDate(),d=x.getMonth(),f=x.getFullYear(),h;x.setDate(1);"prevY"===this.id?(x.setFullYear(x.getFullYear()-1),d=g(x.getFullYear(),x.getMonth()),d<b?x.setDate(d):x.setDate(b),t(x)):"prevM"===this.id?(x.setMonth(x.getMonth()-1),d=g(x.getFullYear(),x.getMonth()),d<b?x.setDate(d):x.setDate(b),t(x)):"today"===
this.id?(h=new Date,h.getFullYear()===f&&h.getMonth()===d&&h.getDate()===b?(k(f,d+1,b),u()):(x=h,t(x))):"curMonth"===this.id?(h=new Date,h.getFullYear()===f&&h.getMonth()===d?(e(f,d+1),u()):(x=h,c(".b-cal__month_selected").removeClass("b-cal__month_selected"),c('.b-cal__month[data-value="'+x.getMonth()+'"]').addClass("b-cal__month_selected"),c("#calyear").html(x.getFullYear()))):"nextM"===this.id?(x.setMonth(x.getMonth()+1),d=g(x.getFullYear(),x.getMonth()),d<b?x.setDate(d):x.setDate(b),t(x)):"nextY"===
this.id&&(x.setFullYear(x.getFullYear()+1),d=g(x.getFullYear(),x.getMonth()),d<b?x.setDate(d):x.setDate(b),t(x));F(a)}function s(a){a=a||m.event;var b=a.target?a.target:a.srcElement;G=b;"calyear"===b.id?(M&&clearTimeout(M),M=setTimeout(function(){for(var a=x.getFullYear(),a=a+12,b=0;12>b;b++)J.childNodes[b].innerHTML=a-1-2*b;a=c(G).offset();b="calyear"===G.id?a.left-1:a.left+G.offsetWidth-J.offsetWidth+1;C&&(b+=1);J.style.left=b+"px";J.style.top=a.top+G.offsetHeight-1+"px";J.style.visibility="visible";
E(G,"cl-tool-selected")},250),document.onmouseup=r):"calmonth"===b.id&&(M&&clearTimeout(M),M=setTimeout(function(){for(var a=x.getMonth(),b=0;12>b;b++)I.childNodes[b].innerHTML=U[b],a===b?E(I.childNodes[b],"cl-ym-selected"):D(I.childNodes[b],"cl-ym-selected");a=c(G).offset();b="calmonth"===G.id?a.left:a.left+G.offsetWidth-I.offsetWidth;C&&(b+=1);I.style.left=b+"px";I.style.top=a.top+G.offsetHeight-1+"px";I.style.visibility="visible";E(G,"cl-tool-selected")},250),document.onmouseup=r);F(a)}function r(){M&&
clearTimeout(M);document.onmouseup=null;J.style.visibility="hidden";I.style.visibility="hidden";G&&D(G,"cl-tool-selected")}function u(){B||(B=document.getElementById("calendar"));document.onmousedown=null;B.style.visibility="hidden"}function z(a){a=a||m.event;for(a=a.target?a.target:a.srcElement;a.parentNode;){if("calendar"===a.id)return;a=a.parentNode}u()}function q(a){a=a||m.event;var b=a.target?a.target:a.srcElement;a=x.getDate();x.setDate(1);String(b.id).match(/ycombo/)?(x.setFullYear(parseInt(b.innerHTML,
10)),b=g(x.getFullYear(),x.getMonth()),b<a?x.setDate(b):x.setDate(a),t(x)):String(b.id).match(/mcombo(\d+)/)&&(x.setMonth(parseInt(RegExp.$1,10)),b=g(x.getFullYear(),x.getMonth()),b<a?x.setDate(b):x.setDate(a),t(x))}function v(a,b){var c=!1,d=null,e=null,g=null;b?String(a).match(/^(\d\d\d\d)-(\d+)/)&&(d=parseInt(RegExp.$1,10),e=parseInt(RegExp.$2,10),g=1,isNaN(d)||isNaN(e)||(e-=1,c=!0)):String(a).match(/^(\d\d\d\d)-(\d+)-(\d+)/)&&(d=parseInt(RegExp.$1,10),e=parseInt(RegExp.$2,10),g=parseInt(RegExp.$3,
10),isNaN(d)||isNaN(e)||isNaN(g)||(e-=1,c=!0));var f=null;return f=c?new Date(d,e,g):new Date}function w(a){a=a||m.event;E(a.target?a.target:a.srcElement,"cl-ym-hover")}function y(a){a=a||m.event;D(a.target?a.target:a.srcElement,"cl-ym-hover")}function D(a,b){if(a&&a.className){for(var c=a.className.split(" "),d=[],e=c.length;0<e;)c[--e]!==b&&(d[d.length]=c[e]);a.className=d.join(" ")}}function E(a,b){D(a,b);a.className+=" "+b}function F(a){a=a||m.event;C?(a.cancelBubble=!0,a.returnValue=!1):(a.preventDefault(),
a.stopPropagation());return!1}var A=!1,C=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),B=null,K=null,L=null,x=null,M=null,G=null,J=null,I=null,R=null,N=null,P=null,O=null,S="January February March April May June July August September October November December".split(" "),U="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),V="Mo Tu We Th Fr Sa Su".split(" "),W="#calmonth",Y="#calyear",T=".cl-tool-td",ba="td.cl-days",Q=" div",fa=".b-cal__month",Z=m.pageInfo,da=m.doT.template('<div class="b-cal"><div class="b-cal__head cl-head"><div class="cl-tool-td" id="prevY"><div class="t-inner"></div></div><div class="cl-tool-td" id="calyear">{{=it.cYear}}</div><div class="cl-tool-td" id="nextY"><div class="t-inner"></div></div><div class="cl-tool-td b-cal__today" id="curMonth"></div></div><div class="cl-days-wrapper b-cal__month-wrapper">{{~it.months :value :index}}<div class="b-cal__month {{?index === it.month}}b-cal__month_selected{{?}}" data-value="{{=index}}">{{=value}}</div>{{~}}</div></div>');
return{init:function(){var a;for(a=0;12>a;a++)S[a]=Z.calendar["m"+a],U[a]=Z.calendar["ms"+a];for(a=0;7>a;a++)V[a]=Z.calendar["w"+a]},show:function(a,c,d){d=d||m.event;n();document.onmousedown=z;L=a;O=c;x=v(L.value);if(!R||"default"!==B.getAttribute("data-type")){var e;K.innerHTML="";R=document.createElement("div");R.className="cl-head";K.appendChild(R);B.setAttribute("data-type","default");R.innerHTML="";p();a=document.createElement("div");a.className="cl-days-wrapper";K.appendChild(a);N=document.createElement("table");
N.className="cl-days";a.appendChild(N);P=document.createElement("tbody");N.appendChild(P);a={prevM:".",calmonth:"",nextM:".",prevY:".",calyear:"",nextY:".",today:""};for(e in a)c=document.createElement("div"),c.className="cl-tool-td",c.id=e,c.setAttribute("unselectable",!0),c.innerHTML="."===a[e]?'<div class="t-inner"></div>':a[e],R.appendChild(c);e=document.createElement("tr");P.appendChild(e);for(e=0;7>e;e++)for(a=document.createElement("tr"),0===e&&(a.className="cl-dayst-tr"),P.appendChild(a),
c=0;7>c;c++){var g=document.createElement("td");6===c&&(g.style.borderRightWidth=0);g.innerHTML=0===e?V[c]:"&nbsp;";0===c?E(g,"cl-first"):6===c&&E(g,"cl-last");a.appendChild(g)}}t(x);b(d)},showMonth:function(a,c,d){n();p();document.onmousedown=z;L=a;O=c;x=v(a.value,!0);a=da({cYear:x.getFullYear(),months:S,month:x.getMonth()});B.setAttribute("data-type","month");K.innerHTML=a;b(d)}}}(window,$,EventMgr);"use strict";
App.ValidChecker=function(m,c,a,f){var n=function(b,c){var f=c.name,h=c.self,e=c.param,k=c.number,g=c.value,d=c.prefix,m=c.convert,r={func:"check."+f,value:g,name:c.fieldname,funcname:c.funcname};e&&(r.args=e);d&&(r.prefix=d);m&&(r.tconvert=m);a.trigger("ajaxRequest",{url:pageInfo.url,param:r,invar:{self:h,namevalid:f,ovalue:h.value,vvalue:g,multi:c.multi,number:k},trfunc:"validatorResponse",outtype:"json",queue:"multiload"})},b=function(b,c){var f=c.self,h=c.namevalid,e=c.ovalue,k=c.value,g=c.number,
d=c.vvalue;c.ermsg?e===f.value&&0!==f.offsetWidth||null!==f.nextSibling&&"textarea"===f.nextSibling.nodeName.toLowerCase()&&0!==f.nextSibling.offsetWidth&&e===f.value?a.trigger("errMsgValid",{type:h,self:f,err:c.ermsg,number:g}):a.trigger("okMsgValid",{type:h,self:f,number:g}):e===f.value?a.trigger("okMsgValid",{type:h,self:f,number:g,multi:c.multi,value:k,ovalue:e,vvalue:d}):a.trigger("okMsgValid",{type:h,self:f,multi:c.multi,number:g,value:k,ovalue:e,vvalue:d})};return{init:function(){a.bind("checkValue",
n);a.bind("validatorResponse",b)}}}(window,$,EventMgr,App);"use strict";
App.Toolbar=function(m,c,a,f){var n,b=f.Dom,l=function(){var a=this.offsetWidth,c=this.getAttribute("data-id"),c=b.byId("tb-"+c);c.style.marginLeft=(a-c.offsetWidth)/2+"px"},p=function(a){return a.offsetWidth+3<a.scrollWidth?!0:!1},t=function(a,c,d){for(var e=!0,f=!1,h=a.length;e&&h--;)e=a[h].getAttribute("data-name"),e=b.byId("tb-"+d+"-"+e),e=e.childNodes,e=e.length,0<e&&b.addClass(a[h],"collapsed"),f=!0,e=p(c);return f},h=function(a,e){var d=e.tabId,f=b.byId("toolbar-"+d),h=c("#toolbar-"+d+" .toolgrp"),
l,m=!1;f&&((l=p(f))&&(m=t(h,f,d)),m&&b.addClass(f,"collapsed"))},e=function(){clearTimeout(n);n=setTimeout(function(){var a,e;e=c(".tab-content_st_active");a=e.attr("data-tabid");if("list"===e.attr("data-tab-type")){e=b.byId("toolbar-"+a);var d=b.hasClass(e,"collapsed"),f=c("#toolbar-"+a+" .toolgrp"),h;if(e){h=p(e);if(d&&!h){d=f.length;h=!1;var l,m,n;for(m=0;m<d;m++)if(l=f[m].getAttribute("data-name"),l=b.byId("tb-"+a+"-"+l),l.style.marginLeft=0,l=l.childNodes,n=l.length,b.removeClass(f[m],"collapsed"),
l=p(e)){0<n&&b.addClass(f[m],"collapsed");h=!0;break}d=h}else h&&(d=t(f,e,a));d?b.addClass(e,"collapsed"):b.removeClass(e,"collapsed")}}},100)};return{init:function(){a.bind("appendList",h);a.bind("menuPositionChanged",e);a.obind(c(m),"resize",e);a.on("#main-wrapper",".toolgrp.collapsed","mouseover",l)}}}(window,$,EventMgr,App);"use strict";App=App||{};
App.Map=function(m,c,a,f){var n=pageInfo.url,b={},l=function(b,c){var d=0,e="cont-"+c.tabId,f=[],g,h;for(h in b)d++,g={},g.elid=b[h].elid,g.name=b[h].name,f.push(g);1===d?a.trigger("mapSelect",{tabId:e}):0===d?a.trigger("mapUnSelect",{tabId:e}):1<d&&a.trigger("mapMultiSelect",{tabId:e});a.trigger("updateSelectedElems",{elems:f,tabId:c.tabId})},p=function(c,d){var e=[],f,g,h;for(h in c)c[h].state&&(g=c[h])&&(f={elid:g.elid,name:g.type,position:g.position},g.parent&&(f.plid=g.parent.elid),e.push(f));
e=JSON.stringify(e);a.trigger("ajaxRequest",{url:n,param:{func:b[d].saveAction,data:e},invar:{tabId:d},type:"get",outtype:"json",trfunc:"savedMapData",failfunc:"failSavedMapData",queue:"noqueue"});a.trigger("tabLoading",{tabId:d})},t=function(b,c){var d=[],e,f;for(f in b)e=b[f],b[f]&&(e={elid:e.elid,direction:Math.round(e.curDirect),top:e.curY,left:e.curX,name:e.name},d.push(e));d=JSON.stringify(d);a.trigger("ajaxRequest",{url:n,param:{func:D[c].saveAction,data:d},invar:{tabId:c},type:"get",outtype:"json",
trfunc:"savedMapData",failfunc:"failSavedMapData",queue:"noqueue"});a.trigger("tabLoading",{tabId:c})},h=function(b,c){a.trigger("tabLoadingHide",{tabId:c.tabId})},e=function(b,c){if(b){for(var d=b.length,e=d,f="cont-"+c,g=[],h;d--;)h={},h.elid=b[d].elid,h.name=b[d].type,g.push(h);1===e?a.trigger("mapSelect",{tabId:f}):0===e?a.trigger("mapUnSelect",{tabId:f}):1<e&&a.trigger("mapMultiSelect",{tabId:f});a.trigger("updateSelectedElems",{elems:g,tabId:c})}},k=function(b,d){var e=[{elid:b.elid,name:b.type}];
a.trigger("mapSelect",{tabId:"cont-"+d});a.trigger("updateSelectedElems",{elems:e,tabId:d});c("#toolbar-"+d+" .action.default").trigger("click")},g=function(b){var d=c(m).height(),e=c("#menu-items-wr").offset().top,d=d-e;c(".tab-content").height(d);e=c("#tcw-"+b+" .topBar");0<e.length&&(d-=e[0].offsetHeight,c("#"+b+"-map").height(d),a.trigger("updateScroll",{id:b+"-map"}))},d=function(c){var d=new Rack("wrapper");d.setData(c);d.render();d.onSaveData(p);d.onSelect(e);d.onDblclick(k);d.saveAction=c.map.action;
b[c.tabId]=d;setTimeout(function(){g(c.tabId)},150);a.trigger("appendMapDone",c)},s=function(a,b){if("rack"===b.map.type)d(b);else{var c=b.tabId,e=b.map,f=w.byId(c+"-map"),g=y.createElement("div"),h="svg-map-"+c,k=e.scale||1,p=e.width,n=e.height;f&&(g.setAttribute("class","svg-wrapper"),g.setAttribute("id",h),f.appendChild(g),f=new m.DCMap(h),f.init({width:p,height:n,scale:k,edit:e.edit,msg:e.msg}),f.onDblClick(r),f.renderWorkarea(),f.renderLayers(e),D[c]=f,f.saveAction=e.action,f.onSave(t),f.onSelect(l),
f.tabId=c,E=setTimeout(function(){A()},100))}},r=function(b,d){b.preventDefault();var e={},f=[],g=this.papper.master.tabId;e.elid=this.elid;e.name=this.name;f.push(e);a.trigger("updateSelectedElems",{elems:f,tabId:g});c("#toolbar-"+g+" .action.default").trigger("click")},u=[],z=function(b,c){"undefined"!==typeof m.DCMap?s.apply(m,[b,c]):(u.push(c),a.trigger("loadMapScript"))},q=function(){f.Common.required("/manimg/orion/dcmap.min.js",v)},v=function(){for(var a=u.length;a--;)s.apply(m,[{},u[a]])},
w=f.Dom,y=document,D={},E,F=function(){clearTimeout(E);E=setTimeout(function(){A()},50)},A=function(){var a=c(".tab-content_st_active"),b=a.attr("data-tab-type"),a=a.attr("data-tabid"),d,e;"map"===b&&D[a]?(d=c("#"+a+"-map"),b=d[0].offsetWidth-20,d=d.offset().top,e=document.body.offsetHeight,a=D[a],a.resize({width:b,height:e-d-20})):"map"===b&&g(a)},C=function(){var a=c(".tab-content_st_active").attr("data-tabid");D[a]&&D[a].forceRotate()},B={38:"up",40:"down",37:"left",39:"right"},K=function(a,b){var d=
c(".tab-content_st_active").attr("data-tabid"),e=B[b.codeKey];D[d]&&D[d].forceMove(e)};return{init:function(){a.bind("appendMap",z);a.bind("savedMapData",h);a.obind(c(m),"resize",F);a.one("loadMapScript",q);a.bind("spaceKeyUp",C);a.bind("upKeyUp, downKeyUp, leftKeyUp, rightKeyUp",K)}}}(window,$,EventMgr,App);"use strict";
App.Builder=function(m,c,a,f){var n=m.document,b=pageInfo.url,l=function(){return f.Dom.byId("inspector_form")},p=function(c,d){a.trigger("ajaxRequest",{url:b,param:c,invar:{sourceTab:d},type:"get",outtype:"json",trfunc:"ajaxResponseInspectorForm",queue:"",failfunc:"failResponseInspectorForm"})},t=function(a,b,c){var d={},e=a.getAttribute("data-tabid"),g=f.Dom.byId("cont-"+e);d.func=b;c&&(d.plid=g.getAttribute("data-func"));d.elid=a.getAttribute("data-elid")||"";p(d,e)},h=function(b,c){var d={},e=
b.getAttribute("data-tabid"),g=f.Dom.byId("cont-"+e),h={};d.func=c;d.plid=g.getAttribute("data-func");d.elid=b.getAttribute("data-elid");h.rows=b.getAttribute("data-name");g=10;for(h.confirm="";g--;)h.confirm+="\u042f \u0442\u043e\u0447\u043d\u043e \u0443\u0432\u0435\u0440\u0435\u043d, \u0447\u0442\u043e \u0445\u043e\u0447\u0443 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442!<br/>";h.tabId=e;h.params=d;a.trigger("listSelectedData",h)},e=function(a){var b={},
c=this.getAttribute("data-tabid"),d=f.Dom.byId("frm-"+c);b.func="builder.field";b.plid=d.func.value;b.elid=this.getAttribute("data-elid")||"";p(b,c);a.preventDefault()},k=function(a){t(this,"builder.button",!0);a.preventDefault()},g=function(a){h(this,"builder.button.delete");a.preventDefault()},d=function(a){var b={},c=this.getAttribute("data-tabid"),d=f.Dom.byId("cont-"+c);b.func="builder.form";b.elid=d.getAttribute("data-func")||"";p(b,c);a.preventDefault()},s=function(a){t(this,"builder.list");
a.preventDefault()},r=function(b,c){c.type="inspectorForm";a.trigger("ajaxResponse",c)},u=function(){},z=function(a){t(this,"builder.col",!0);a.preventDefault();a.stopPropagation()},q=function(a){h(this,"builder.col.delete");a.preventDefault();a.stopPropagation()},v=function(b){var c={},d={},e=this.getAttribute("data-tabid"),g=f.Dom.byId("frm-"+e);c.func="builder.field.delete";c.plid=g.func.value;c.elid=this.getAttribute("data-elid");d.rows=this.getAttribute("data-name");d.confirm="Delete  ";d.tabId=
e;d.params=c;a.trigger("listSelectedData",d);b.preventDefault()},w=function(a){var b={};b.elid=this.getAttribute("data-elid")||"";b.func="builder.menu";p(b,"");a.preventDefault()},y=function(b,c){f.Dom.byId("inspector-content").innerHTML=c;l().style.display="block";a.trigger("appendForm",{tabId:"modal1"});var d=l(),e,g;d.style.right||(e=d.offsetWidth,g=m.innerWidth,d.style.right=(g-e)/2+"px",d.style.top="90px")},D=function(c,d){var e=d.reload,g=d.location,h=d.newwin,k=d.formParam,l=d.listParam,p=
d.__vars;p&&p.afterFunc&&d.ok&&a.trigger(p.afterFunc,{d:p});if(d.ok){if(e)m.location=b;else if(g&&h)m.open(g,"_blank");else{if(g){m.location=g;F(c);return}if(k){e=f.Common.parseParams(k);a.trigger("ajaxRequest",{url:b,noesc:!0,param:e,invar:{parent:""},type:"get",outtype:"json",trfunc:"ajaxResponse",failfunc:"failCommonAjaxResponse",queue:"noqueue"});return}if(l){e=f.Common.parseParams(l);a.trigger("ajaxRequest",{url:b,noesc:!0,param:e,invar:{parent:""},type:"get",outtype:"json",trfunc:"ajaxResponse",
failfunc:"failCommonAjaxResponse",queue:"noqueue"});return}d.parent&&a.trigger("reloadTab",{tabId:d.parent})}F(c)}else d.type="inspectorForm",d.targetTabId=null,d.sourceTab=d.parent,d.__vars&&(d.__innervars=d.__vars),a.trigger("ajaxResponse",d),a.trigger("tabLoadingHide",{tabId:d.tabId})},E=function(a){var b=l();f.Dom.hasClass(b,"collapsed")?(f.Dom.removeClass(b,"collapsed"),f.Dom.addClass(b,"uncollapsed")):(f.Dom.addClass(b,"collapsed"),f.Dom.removeClass(b,"uncollapsed"));a.preventDefault()},F=function(a){l().style.display=
"none";a&&a.preventDefault()},A=function(){F()},C,B,K,L,x,M,G,J,I,R=function(a){a.preventDefault();n.onmousemove=N;n.onmouseup=P;C=l();B=parseInt(C.style.right,10)||0;K=parseInt(C.style.top,10)||0;L=a.clientX;x=a.clientY;M=C.offsetWidth;G=m.innerHeight-35;J=m.innerWidth-M;I=50-M},N=function(a){var b=L-a.clientX+B;a=-(x-a.clientY)+K;0>a&&(a=0);a>G&&(a=G);b<I&&(b=I);b>J&&(b=J);C.style.right=b+"px";C.style.top=a+"px"},P=function(a){n.onmousemove=null;n.onmouseup=null;I=J=G=M=x=L=K=B=void 0};return{init:function(){a.bind("ajaxResponseInspectorForm",
r);a.bind("failResponseInspectorForm",u);a.bind("readyInspectorFormHtml",y);a.on("#main-wrapper",".inspector-close","click",F);a.on("#main-wrapper",".i-button_type_cancel","click",F);a.on("#main-wrapper",".inspector-collapse","click",E);a.on("#main-wrapper",".inspector-control","mousedown",R);a.on("#main-wrapper",".devel-link-settings--field, .devel-link-add--field","click",e);a.on("#main-wrapper",".devel-link-settings--toolbutton, .devel-link-add--toolbutton","click",k);a.on("#main-wrapper",".devel-link-settings--form",
"click",d);a.on("#main-wrapper",".devel-link-settings--list","click",s);a.on("#main-wrapper",".devel-link-settings--col, .devel-link-add--col","click",z);a.on("#main-wrapper",".devel-link-delete--toolbutton","click",g);a.on("#main-wrapper",".devel-link-delete--col","click",q);a.on("#main-wrapper",".devel-link-delete--field","click",v);a.on("#wrapper",".devel-link-settings--menu, .devel-link-add--menu","click",w);a.bind("formInspectorResponse",D);a.bind("closeModalForm",A)}}}(window,$,EventMgr,App);
"use strict";
App.CheckRestart=function(m,c,a){function f(f,m){m.bootTime&&m.bootTime!==b?(c("#b-overlay").fadeOut(300),c("#b-progressbar").fadeOut(300)):setTimeout(function(){a.trigger("ajaxRequest",{url:l.url,param:{func:"keepalive"},outtype:"json",trfunc:"checkRestart",failfunc:"checkRestart",queue:"noqueue"})},1500)}function n(f,m){b=m.bootTime;a.trigger("ajaxRequest",{url:l.url,param:{func:"keepalive"},outtype:"json",trfunc:"checkRestart",failfunc:"checkRestart",queue:"noqueue"});c("#b-overlay").fadeIn(300);c("#b-progressbar").fadeIn(300)}
var b,l=m.pageInfo;return{init:function(){a.bind("startCheckRestart",n);a.bind("checkRestart",f)}}}(window,$,EventMgr);"use strict";
App.TinyMCE=function(m,c,a,f){function n(b){if(g[b]&&m.tinymce){for(var c=g[b].length,e=m.tinymce.editors,f=e.length,h,k;c--;)for(k=g[b][c],h=f;h--;)e[h].id===k&&(a.trigger("removeDatafromLocalStorage",{id:k}),e[h].remove());delete g[b]}}function b(a,b){for(var c=m.tinymce.editors,e=c.length;e--;)c[e].id===b.id&&c[e].setContent(b.content)}function l(a,b){n(b.tabId)}function p(a){t(a)}function t(a){if(a)for(var b=a.length,e,f,h,k;b--;)k="",e=a[b].getAttribute("id"),f=a[b].getAttribute("data-tabid"),
h=a[b].offsetHeight-106,m.localStorage&&m.localStorage.getItem(e)&&(k="isp_bill_macro"),m.tinymce.init({selector:"#"+e,language:pageInfo.lang,resize:!1,height:h,relative_urls:!1,convert_urls:!1,setup:function(a){a.on("blur",function(b){a.save();c("#"+a.id).trigger("change")})},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste "+k],toolbar:"insertfile undo redo pastetext | fontselect | fontsizeselect | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | "+
k}),g[f].push(e)}function h(a,b){var e=b.tabId;n(e);g[e]=[];e=c("#cont-"+e+" .b-text-editor");0<e.length&&("undefined"!==typeof m.tinymce?t(e):f.Common.required("/manimg/common/tinymce/tinymce.min.js",p,e))}function e(a,b){var c=this.getAttribute("data-tabid");if(g[c]&&m.tinymce)for(var e=g[c].length,f=m.tinymce.editors,h=f.length,k,l;e--;)for(l=g[c][e],k=h;k--;)f[k].id===l&&f[k].save()}function k(b,c){a.trigger("writeDatatoLocalStorage",{id:c.name+"-"+c.tabId,data:c.vars})}var g={};return{init:function(){a.bind("appendForm",
h);a.bind("closeTabEvent",l);a.on("#main-wrapper",".i-button_type_ok, .i-button_type_setvalue","click",e);a.bind("preSetValues",e);a.bind("saveVarsTinyMCE",k);a.bind("TinyMCE_setContent",b)}}}(window,$,EventMgr,App);"use strict";
App.FormWatcher=function(m,c,a,f){function n(a){var c=a.field.value,f=a.tabObj;a=a.field.getAttribute("name");f&&f.formModel&&f.formModel[a]&&(f.formModel[a].isChanged=f.formModel[a].defValue===c?!1:!0,f.formModel[a].value=c)}return{init:function(){a.addHook("formFieldChanged",n)}}}(window,$,EventMgr,App);"use strict";
App.ConfirmBox=function(m,c,a,f){function n(){return f.u.selectorCache("#modal")}function b(){return f.u.selectorCache("#modal_form")}function l(a,h){var l=h.text,p=h.self;d=h.checkbox||null;e=h.callbackOk||null;k=h.callbackCancel||null;g=h.args||[];f.u.selectorCache("body").addClass(r);h.warning&&(n().addClass("modal-with-warning"),l=pageInfo.messages.warning+"</br>"+l);f.u.selectorCache("#modal_message").html(m.filterXSS(l));d?b().html(templates.formItemCheckbox({id:"confirmbox",name:"confirmcheckbox",
desc:d.msg,value:"off",attrInput:'id="confirmcheckbox"',dependFields:"b-checkbox__wrapper_for_confirmbox l-form__row_type_checkbox"})):b().html("");if(p){var p=c(p),l=p.offset(),p=p.height(),t=n(),y=t.height(),D=m.innerWidth,E=m.innerHeight,F=l.top+p+10,l=l.left-137;F+y>E?F=E-y-p-20:0>F&&(F=10);l+420>D?l=D-420:0>l&&(l=10);(320<E/2-p/2-F||320<D/2-210-l)&&t.css({top:F,left:l,marginLeft:0,marginTop:0})}n().show();s=!0}function p(){e=k=null;s=!1;d=null;n().css({top:"",left:"",marginLeft:"",marginTop:""});
n().removeClass("modal-with-warning")}function t(a){!0===s&&(f.u.selectorCache("body").removeClass(r),n().hide(),f.u.isFunction(e)&&e.apply(m,g),d&&f.u.isFunction(d.cb)&&d.cb.apply(m,[c("#confirmcheckbox").val()]),p())}function h(a){if(!0===s)return f.u.selectorCache("body").removeClass(r),n().hide(),f.u.isFunction(k)&&k.apply(m,g),b().html(""),p(),!0}var e,k,g,d,s=!1,r="active-modal";return{init:function(){a.bind("confirmBoxShow",l);a.obind(f.u.selectorCache("#modal_ok"),"click",t);a.obind(f.u.selectorCache("#modal_cancel"),
"click",h);a.addToTriggerStack("escKeyUp",h,0);a.bind("enterKeyUp",t)}}}(window,$,EventMgr,App);"use strict";
App.HorizScrollControl=function(m,c,a,f){function n(a,b){var f=c(b.leftBtn),g=c(b.rightBtn),d=c(b.innerBox),l=c(b.actElem),m=b.id,f=new t({leftBtn:f,rightBtn:g,innerBox:d,actElem:l,step:b.step});f.init();p[m]=f}function b(a,b){var c=b.id;p[c]&&p[c].update&&p[c].update()}function l(a,b){var c=b.tabId;p&&p[c]&&(delete p[c],p["filter-"+c]&&delete p["filter-"+c])}var p={},t=function(a){this.leftBtn=a.leftBtn;this.rightBtn=a.rightBtn;this.innerBox=a.innerBox;this.outterBox=this.innerBox.parent();this.actElem=
a.actElem;this.step=a.step||150};t.fn=t.prototype;t.fn.init=function(){this.leftBtn.addClass("b-hsc__btn-left");this.rightBtn.addClass("b-hsc__btn-right");this.leftBtn.bind("click",c.proxy(this.moveLeft,this));this.rightBtn.bind("click",c.proxy(this.moveRight,this));c(m).bind("resize",c.proxy(this.update,this));this.getWidth();this.moveToActElem();this.checkPosition()};t.fn.update=function(){var a=this;clearTimeout(this.updTimeout);this.updTimeout=setTimeout(function(){a.getWidth();a.moveToActElem();
a.checkPosition()},300)};t.fn.moveRight=function(a){a.preventDefault();a=parseFloat(this.innerBox.css("marginLeft"));isNaN(a)&&(a=0);a-=this.step;a<this.maxLeft&&(a=this.maxLeft);var b=this;this.innerBox.animate({marginLeft:a+"px"},150,function(){b.checkPosition()})};t.fn.moveLeft=function(a){a.preventDefault();a=parseFloat(this.innerBox.css("marginLeft"));isNaN(a)&&(a=0);a+=this.step;0<a&&(a=0);var b=this;this.innerBox.animate({marginLeft:a+"px"},150,function(){b.checkPosition()})};t.fn.getWidth=
function(){this.outterBoxWidth=this.outterBox.width();this.innerBoxWidth=this.innerBox.width();this.maxLeft=this.outterBoxWidth-this.innerBoxWidth;this.overWidth=0>this.maxLeft;this.step=Math.ceil(this.innerBoxWidth/Math.floor(this.innerBoxWidth/this.step));isNaN(this.step)&&(this.step=150)};t.fn.moveToActElem=function(){if(0<this.actElem.length&&this.overWidth){this.actElemWidth=this.actElem.width();var a=this.actElem.position().left,a=this.outterBoxWidth-(this.actElemWidth+a);0>a&&(a=parseInt(this.innerBox.css("marginLeft"),
10)+a,a=Math.ceil(a/this.step)*this.step-this.step,a<this.maxLeft&&(a=this.maxLeft),this.innerBox.css("margin-left",a+"px"))}};t.fn.checkPosition=function(){this.outterBox.removeClass("b-hsc_overwidth_right b-hsc_overwidth_left b-hsc_overwidth_full");if(this.outterBoxWidth<this.innerBoxWidth){var a=parseInt(this.innerBox.css("marginLeft"),10);0===a?this.outterBox.addClass("b-hsc_overwidth_right"):a===this.maxLeft?this.outterBox.addClass("b-hsc_overwidth_left"):this.outterBox.addClass("b-hsc_overwidth_full")}};
return{init:function(){a.bind("bindHorizScrollControl",n);a.bind("updateHorizScrollControl",b);a.bind("closeTabEvent",l)}}}(window,$,EventMgr,App);"use strict";
App.DashboardList=function(m,c,a,f){function n(f,m){var n=m.tabId,h=c("#"+n),e=h.find(".list_table"),k=e.find(b),g;e.removeClass("b-list_overflow_ellipsis");k.css("width","");k.length&&(g=e.width(),h=h.width(),g>h&&(g-=h,h=k.width(),k.css("width",h-g+"px"),e.addClass("b-list_overflow_ellipsis"),a.trigger("updateScroll",{id:n+"-scrollwrapper"})))}var b=".i-minimize-col";return{init:function(){a.bind("appendDashList",n)}}}(window,$,EventMgr,App);"use strict";
App.Desktop=function(m,c,a,f){function n(){m.scrollToTopLeft()}return{init:function(){a.obind(c(m),"scroll",n)}}}(window,$,EventMgr,App);"use strict";
App.MessageTempl=function(m,c,a,f){function n(){return c("#main-wrapper")}function b(){var a=this.getAttribute("data-ind");c(".b-msg-templ__title-content-item_ind_"+a).show()}function l(){var a=this.getAttribute("data-ind");c(".b-msg-templ__title-content-item_ind_"+a).hide()}function p(a){for(var b="",c=a.length-1;-1<c;c--)b+=a.substr(c,1);return b}function t(b){b.preventDefault();b=this.getAttribute("data-id");var d=c("#b-msg-templ-"+b).find(".b-msg-templ"),e=this.getAttribute("data-tabid"),h=f.Dom.byId(b),
k=h.value,h=0===k.length?0:f.u.getCaretPosition(h),l=k.lastIndexOf("\n",h-1)+1,k=k.slice(l,h),k=p(k),h=k.match(/(.*?)[\.\?\!] */),k=p(h?h[1]:k),k=k.replace(/^ */,"");0<d.length?d.remove():(d=c("#frm-"+e).serializeObject(),d.source_func=d.func,d.func="anstempl.get",d.source_string=k,a.trigger("ajaxRequest",{param:d,invar:{id:b},type:"get",outtype:"json",trfunc:"msgTemplResp"}))}function h(a){c(".tab-content_st_active .b-msg-templ").remove();c("body").off("click.msgTempl",h)}function e(a,b){var e=b.id,
f=templates.msgTemplList({templList:b.savedmessage,id:e});c("#b-msg-templ-"+e).append(f);setTimeout(function(){c("body").on("click.msgTempl",h)},1)}function k(b){b.preventDefault();var d=this.getAttribute("data-ind");b=this.getAttribute("data-id");var d=c(".b-msg-templ__title-content-item_ind_"+d).text(),e=c(this).closest(".b-msg-templ").attr("data-target"),k=f.Dom.byId(e);k&&(k.focus(),f.u.insertStringAfterCaret(k,d,!0),a.trigger("ajaxRequest",{param:{func:"anstempl.stat",id:b},type:"get",outtype:"json",
trfunc:"DoNothing"}));c("#b-msg-templ-"+e).find(".b-msg-templ").remove();c("body").off("click.msgTempl",h)}return{init:function(){a.on(n(),".b-msg-templ__link","click",t);a.bind("msgTemplResp",e);a.on(n(),".b-msg-templ__title-list-item","mouseenter",b);a.on(n(),".b-msg-templ__title-list-item","mouseleave",l);a.on(n(),".b-msg-templ__title-list-item","click",k)}}}(window,$,EventMgr,App);"use strict";
App.FontSettings=function(m,c,a,f){function n(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("href","http://fonts.googleapis.com/css?family="+a);document.head.appendChild(b)}function b(a){var b=this.getAttribute("data-targetview");a=this.value;var c=this.getAttribute("data-tabid");if(b=f.Dom.byId(c+"-"+b))b.style.fontSize=a+"px",b.style.lineHeight=a+"px"}function l(a){a=this.getAttribute("data-targetview");var b=this.value,
c=this.getAttribute("data-tabid"),k=f.Dom.byId(c+"-"+a);k&&(k.style.fontFamily=b,""===k.style.fontFamily&&(n(b),setTimeout(function(){k.style.fontFamily=b},1E3)))}function p(a,b){var e=c("#cont-"+b.tabId);e.find(".i-font-family-control").trigger("change");e.find(".i-font-size-control").trigger("change")}return{init:function(){a.on(c(".i-list-wr"),".i-font-family-control","change",l);a.on(c(".i-list-wr"),".i-font-size-control","change",b);a.bind("appendForm",p)}}}(window,$,EventMgr,App);"use strict";
App.ContentMistake=function(m,c,a,f){function n(a){c("body").addClass("active_mistake_form");c("#modal_mistake_textarea").val(a.content);c("#modal_mistake_input").val(a.msgName+", "+a.funcName)}function b(){c("body").removeClass("active_mistake_form");c("#modal_mistake_textarea").val("");c("#modal_mistake_input").val("");c("#reportmistakebox").val("on")}function l(){var f=c("#modal_mistake_textarea").val(),g=c("#reportmistakebox").val();f!==e.content&&(a.trigger("ajaxRequest",{param:{msg:e.msgName,
module:e.funcName,content:f,func:"editmsg",notify:g},type:"get",outtype:"json",trfunc:"DoNothing",queue:"noqueue"}),e.node&&(e.node.innerHTML=f));b()}function p(){e={};var b,f,d,h,l,p,t;if("undefined"!==typeof m.getSelection){h=m.getSelection();p=h.toString();if(""===p)return!0;0<h.rangeCount&&(f=h.getRangeAt(0).startContainer.parentNode)&&(d=f.getAttribute("data-mn"),l=f.getAttribute("data-fn"),b=f.innerHTML,t=f,d||c(f).children().each(function(){if(this.getAttribute("data-mn"))return d=this.getAttribute("data-mn"),
l=this.getAttribute("data-fn"),b=this.innerHTML,t=f,!1}),d||(h=c(f).closest("[data-mn]"),(d=h.attr("data-mn"))&&h.length&&(b=h[0].innerHTML)),d&&!l&&(l=c(f).closest(".tab-content").attr("data-func")),l||(l=c(".tab-content_st_active").attr("data-func")))}e.content=b;e.msgName=d;e.funcName=l;e.node=t;d?n(e):a.trigger("showAlert",{msg:pageInfo.mistakeNosel})}function t(a){(a.which||a.keyCode)===h&&(a.ctrlKey||a.metaKey)&&p()}var h=13,e={};return{init:function(){29<=pageInfo.userLevel-0&&(a.obind(c(document),
"keyup",t),a.obind("#modal_mistake_cancel","click",b),a.obind("#modal_mistake_ok","click",l))}}}(window,$,EventMgr,App);"use strict";
App.CopyToBuffer=function(m,c,a,f){function n(b,c){var h=f.Dom.byId("permalink-"+c.tabId);h&&(h=new ZeroClipboard(h),h.on("aftercopy",function(b){a.trigger("showAlert",{msg:m.pageInfo.linkCopied,closeTimeout:1500})}))}function b(){var a=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}return a}function l(c){c.preventDefault();
b()||a.trigger("showAlert",{msg:"<div>"+m.pageInfo.linkToCopy+'</div><textarea class="b-textarea b-modal-mistake__textarea" readonly>'+this.getAttribute("data-clipboard-text")+"</textarea>"})}return{init:function(){m.ZeroClipboard&&b()&&a.bind("appendForm,appendList,appendReport,appendMap",n);a.on(c("#main-wrapper"),".b-permalink","click",l)}}}(window,$,EventMgr,App);"use strict";
App.TestCases=function(m,c,a,f){function n(){return f.u.selectorCache(".i-list-wr")}function b(b){b.preventDefault();var d=this.getAttribute("data-elid");b=this.getAttribute("data-tabid");var e=c("#cont-"+b).attr("data-func"),f=c(this),g=c("#cont-"+b+' input[type=hidden][name="'+d+'"],#cont-'+b+' input[type=text][name="'+d+'"],#cont-'+b+" textarea[name="+d+"]").val();void 0===g&&((g=c("#"+b+"-"+d+"-inner").html())||(g=c("#"+b+"-"+d).html()));d={func:"test.check",fieldname:d,ffunc:e,value:g};f.hasClass("b-elem_style_gracescale")?
f.removeClass("b-elem_style_gracescale"):(f.addClass("b-elem_style_gracescale"),d.cancel="yes");a.trigger("ajaxRequest",{param:d,invar:{sourceTab:b},type:"get",outtype:"json",trfunc:"DoNothing",queue:""})}function l(){return f.Dom.byId("testmode__list-icon")}function p(){var a=c(this),b=a.offset(),d=b.left,b=b.top,e=this.offsetWidth,f=l(),g=a.hasClass("editable")||a.hasClass("i-filter-field")||a.parent().hasClass("i-filter-field"),h=22;r=a;g&&(h+=22);f.className.match("active")||(u=d+e-h,f.style.left=
u+"px",f.style.top=b+"px",f.style.display="block")}function t(a){a=l();a.className.match("active")||(a.style.display="none")}function h(){l().style.display="block"}function e(a,b){var e=r.html(),f=r.closest(".tab-content"),g=f.attr("data-func"),h=r.closest(".b-form-list__table"),k=r.closest(".b-form-list__col"),l=h.attr("data-key"),h=h.attr("data-name"),f=f.attr("data-tabid"),f=c("#"+f+"-elid").val(),e={func:"test.check",colname:k.attr("data-colname"),ffunc:g,elid:f,keyname:l,value:e,fieldname:h};
d(e,r)}function k(a,b){var c=r.html(),e=r.closest(".block-table").attr("data-block-func"),f=r.attr("data-name");d({func:"test.check",ffunc:e,value:c,fieldname:f},r)}function g(a,b){if(r.hasClass("b-form-list__data"))e(a,b);else if(r.hasClass("b-infolist__col_type_value"))k(a,b);else{var c=r.find(".b-list__table-col-content").html(),f=r.closest(".b-list__table-row"),g=f.attr("data-elid"),h=f.attr("data-elkeyname"),l=r.closest("td").index(),l=r.closest("table").find("th")[l].getAttribute("data-colname"),
m=r.closest(".tab-content"),p=m.attr("data-tabid"),m=m.attr("data-func"),f=f.attr("data-index"),n="";r.find(".props").each(function(){""!==n&&(n+=",");n+=this.getAttribute("data-name");n+="=";this.getAttribute("data-value")&&(n+=this.getAttribute("data-value"))});b.__tabs[p]&&b.__tabs[p].__content&&b.__tabs[p].__content[f]&&b.__tabs[p].__content[f][l]&&b.__tabs[p].__content[f][l].orig&&(c=b.__tabs[p].__content[f][l].orig);c={func:"test.check",colname:l,ffunc:m,elid:g,keyname:h,value:c};n&&(c.p_value=
n);d(c,r)}}function d(b,c){c.hasClass("bg__green")?(c.removeClass("bg__green"),b.cancel="yes"):c.addClass("bg__green");a.trigger("ajaxRequest",{param:b,invar:{},type:"get",outtype:"json",trfunc:"DoNothing",queue:""})}function s(){c(this).closest(".l-form__table-control").find(".testmode__form-link").remove()}var r,u;return{init:function(){a.on(n(),".testmode__form-link","click",b);a.on(n(),".tab-content_st_testmode input, .tab-content_st_testmode textarea","change",s);n().append('<div class="testmode__list-icon" id="testmode__list-icon" style="display:none;"></div>');
a.on(n(),".i-testmode-field","mouseover",p);a.on(n(),".i-testmode-field","mouseout",t);a.obind("#testmode__list-icon","mouseout",t);a.obind("#testmode__list-icon","mouseover",h);a.onwithdata(n(),"#testmode__list-icon","click","testColCheck",g)}}}(window,$,EventMgr,App);"use strict";
App.TabDrag=function(m,c,a,f){function n(a){var b=[];a.children().each(function(){if(this.id!==h.obj.id&&"tab-group__shadow"!==this.className){var a=this.offsetLeft;b.push({left:a,right:this.offsetWidth+a,self:this})}});h.elems=b}function b(a,b){for(var c=h.elems,e=c.length,f;e--;){if(a>c[e].left&&a<c[e].right&&a<c[e].left+(c[e].right-c[e].left)/2){f=c[e];f.pos="before";break}if(b>c[e].left&&b<c[e].right){b>c[e].left+(c[e].right-c[e].left)/2&&(f=c[e],f.pos="after");break}}return f}function l(a){if("which"in
a&&3===a.which||"button"in a&&2===a.button)return!1;document.onmouseup=t;document.onmousemove=p;var b=c(this),e=b.parent(),f=this.offsetLeft;h.$obj=b;h.obj=this;h.$parent=e;b.addClass("tab-group_moving_yes");var g=b.width();b.height();b=c('<li class="tab-group__shadow" style="width: '+g+'px;"></li>');h.$shadow=b;h.width=g;h.$obj.after(h.$shadow);this.style.left=f+"px";this.style.position="absolute";k=e.width()-h.width;h.y=a.clientY;h.x=a.clientX;n(e);a.preventDefault()}function p(a){var f=a.clientY,
l=a.clientX,m=l-h.x,p=f-h.y;if(!(10>Math.abs(m)&&10>Math.abs(p))){h.x=l;h.y=f;f=parseInt(h.obj.style.left,10)+m;f=f>e?f:e;f=f<k?f:k;l=f+h.width;if(l=b(f,l))c(l.self)[l.pos](h.$shadow),h.cElem=l,clearTimeout(g),g=setTimeout(function(){n(h.$parent)},5);h.obj.style.left=f+"px";a.preventDefault()}}function t(b){h.cElem&&(c(h.cElem.self)[h.cElem.pos](h.$obj),a.trigger("changeTabSortIndex",{s:h.cElem.self.id,t:h.obj.id}));h.$shadow.remove();h.$obj.removeClass("tab-group_moving_yes");h.obj.style.position=
"";h={};document.onmouseup=null;document.onmousemove=null}var h={},e=0,k,g;return{init:function(){a.on(c("#nav-tabs"),".tab-group","mousedown",l)}}}(window,$,EventMgr,App);"use strict";
App.UsefulLinks=function(m,c,a,f){function n(a,b){if(b&&b.srcData&&b.srcData.usefulLinks){var h=pageInfo.messages.usefulLinksTitle,e=b.tabId,k=b.srcData.type,h=templates.usefulLinks({content:m.htmlDecode(b.srcData.usefulLinks),title:h}),g,d=m.document.createElement("div");c("#cont-"+e).addClass("tab-content_has_usefullinks");"list"===k?g=f.Dom.byId("ltwr-"+e):"form"===k&&(g=f.Dom.byId("form-scroll-in-"+e));g&&(d.innerHTML=h,g.appendChild(d))}}function b(a){a&&a.preventDefault();c("#content").addClass("b-useful-links-flag_is_collapsed");
m.localStorage&&m.localStorage.setItem("useful-links-flag-collapsed",!0)}function l(a){a&&a.preventDefault();c("#content").removeClass("b-useful-links-flag_is_collapsed");m.localStorage&&m.localStorage.setItem("useful-links-flag-collapsed",!1)}return{init:function(){m.localStorage&&"true"===m.localStorage.getItem("useful-links-flag-collapsed")&&b();a.bind("appendForm,appendList",n);a.on(f.u.selectorCache("#main-wrapper"),".i-userful-links-collapse","click",b);a.on(f.u.selectorCache("#main-wrapper"),
".b-usefulLinks__icon","click",l)}}}(window,$,EventMgr,App);"use strict";
App.InputMask=function(m,c,a,f){function n(a,b){c("#frm-"+b.tabId).find(".i-input-mask").each(function(){var a=this.getAttribute("data-mask");a&&c(this).inputmask({mask:a,showMaskOnHover:!1})})}function b(a,b){var f;b.elem&&void 0!==b.mask&&(""===b.mask?(f=b.elem.value,c(b.elem).inputmask("remove")):(f=b.value,b.elem.setAttribute("data-mask",b.mask),c(b.elem).inputmask({mask:b.mask,showMaskOnHover:!1})),b.elem.value=f)}return{init:function(){a.bind("appendForm",n);a.bind("inputMaskChangeBySetvalues",
b)}}}(window,$,EventMgr,App,doT);"use strict";
App.FormListFilter=function(m,c,a,f){function n(b,f){var e=c(this).closest(".i-form-list__filter"),k=e.attr("data-srcname"),g=this.getAttribute("data-tabid"),d=c("#"+g+"-"+k);a.trigger("formListFilterHandler",{tabId:g,name:k,$formList:d,$filterWrapper:e})}function b(b,c){var e=c.$formList,f=c.tabId,g=c.$filterWrapper,d=e.find(".row__has__tags"),l=[],m=0;g.find('input[type="hidden"]').each(function(){var a=this.getAttribute("name");"on"===this.value&&(l.push({name:a,isChecked:!0}),m++)});for(var n,
p=0,q=0,v=d.length;q<v;q++)if(n=!1,0!==m){e.addClass("b-form-list__table_filter_yes");g.addClass("b-form-list__filter_filter_yes");for(var w=0;w<m;w++)if(d[q]&&d[q].className.match(l[w].name))n=!0;else{n=!1;break}n?(d[q].style.display="",p++):d[q].style.display="none"}else d[q].style.display="",e.removeClass("b-form-list__table_filter_yes"),g.removeClass("b-form-list__filter_filter_yes");0===p&&0!==m?g.find(".b-form-list__filter-notfound").css("display","block"):g.find(".b-form-list__filter-notfound").css("display",
"");a.trigger("updateScroll",{id:"form-scroll-"+f})}function l(b,f){var e=f.tabId,k,g;c("#cont-"+e+" .i-form-list__filter").each(function(){g=this.getAttribute("data-srcname");k=c("#"+e+"-"+g);a.trigger("formListFilterHandler",{tabId:e,name:g,$formList:k,$filterWrapper:c(this)})})}function p(){var b=c(this).closest(".i-form-list__filter"),f=b.attr("data-tabid");b.find('input[type="hidden"]').each(function(){"on"===this.value&&c(this).closest(".b-checkbox__wrapper").find(".b-checkbox__control").trigger("click")});
a.trigger("updateScroll",{id:"form-scroll-"+f})}return{init:function(){a.on(c("#main-wrapper"),'.b-form-list__filter input[type="hidden"]',"change",n);a.on(c("#main-wrapper"),".i-form-list__filter-clear","click",p);a.bind("setValuesDone",l);a.bind("formListFilterHandler",b)}}}(window,$,EventMgr,App);"use strict";
App.LightBoxProvider=function(m,c,a,f){function n(a,b){c("body").append('<a id="b-lightbox-fake-link" data-lightbox="1" style="visibility: hidden;"></a>')}function b(a,b){var f=b.tabId,g=c("#cont-"+f+" .b-image-for-view");0<g.length&&(p(),g.attr("data-lightbox",f+"img"))}function l(a,b){!t&&c(".action-preview").length&&p()}function p(){t||(f.u.injectCss("/manimg/orion/lib/lightbox/css/lightbox.css"),f.u.required("/manimg/orion/lib/lightbox/js/lightbox.min.js"),t=!0)}c("#main-wrapper");var t=!1;return{init:function(){a.bind("appendForm",
b);a.bind("formSetValues",b);a.bind("appendList",l);a.bind("loadPage",n)}}}(window,$,EventMgr,App);"use strict";
App.FormFixedField=function(m,c,a,f){function n(a,b){c("#cont-"+b.tabId).find(".i-form__row_fixed_yes").each(function(a){var b=c(this),e=b.clone(),f=b.height(),g="i"+(new Date).getTime();e.addClass("b-form__row_visible_hidden");e.html('<td><div class="b-form__row-inner" id="'+g+'" style="height: '+f+'px;"></div></td>');b.css("position","fixed").css("z-index",10-a).css("width","100%");b.attr("data-id",g);b.after(e)})}function b(a,b){c("#cont-"+b.tabId).find(".i-form__row_fixed_yes").each(function(){var a=
c(this).height(),b=this.getAttribute("data-id");c("#"+b).css("height",a+"px")})}return{init:function(){a.bind("appendForm",n);a.bind("updateFixedField",b)}}}(window,$,EventMgr,App);"use strict";
App.GroupEdit=function(m,c,a,f){function n(){return c(".i-form-wr")}function b(a){a=c(this);""!==this.value&&a.hasClass("b-input-mixed")&&(a.removeClass("b-input-mixed").removeClass("i-control-mixed"),a.attr("placeholder",""))}function l(a){a=c(this);var b=a.closest(".b-checkbox__wrapper");a.removeClass("i-control-mixed");b.hasClass("b-checkbox_mixed_yes")&&b.removeClass("b-checkbox_mixed_yes")}function p(a){a=c(this);var b=a.closest(".b-myselect");a.removeClass("i-control-mixed");b.hasClass("b-select_mixed_yes")&&
b.removeClass("b-select_mixed_yes")}function t(a){a=c(this);var b=a.closest(".b-mselect");a.removeClass("i-mselect_mixed_yes");$unselectMsgNode=b.find(".b-mselect__item_msg_unselected");$unselectMsgNode.html($unselectMsgNode.attr("data-default-msg"));b.hasClass("b-mselect_mixed_yes")&&b.removeClass("b-mselect_mixed_yes")}function h(){var a=c(this);""!==this.value&&a.hasClass("b-textarea-mixed")&&(a.removeClass("b-textarea-mixed").removeClass("i-control-mixed"),a.attr("placeholder",""))}function e(){var a=
c(this),b=a.closest(".b-radio");a.removeClass("i-control-mixed");b.hasClass("b-radio_mixed_yes")&&b.removeClass("b-radio_mixed_yes")}return{init:function(){a.on(n(),".i-textarea-mixed","change",h);a.on(n(),".i-input-mixed","change",b);a.on(n(),".i-checkbox_mixed_yes input","change",l);a.on(n(),".i-select_mixed_yes input","change",p);a.on(n(),".i-mselect_mixed_yes input","change",t);a.on(n(),".i-radio_mixed_yes input","change",e)}}}(window,$,EventMgr,App,doT);"use strict";
App.GlobalSearch=function(m,c,a,f){function n(a){var d=a.which||a.keyCode,f=this.value,g=c(".b-gsearch__list-item_selected_yes");"UPKEY"===w[d]?(d=g[0]?g.prev():c(".b-gsearch__list-item:first"),0!==d.length&&(g.removeClass("b-gsearch__list-item_selected_yes"),d.addClass("b-gsearch__list-item_selected_yes")),a.preventDefault()):"DOWNKEY"===w[d]?(d=g[0]?g.next():c(".b-gsearch__list-item:first"),0!==d.length&&(g.removeClass("b-gsearch__list-item_selected_yes"),d.addClass("b-gsearch__list-item_selected_yes")),
a.preventDefault()):"ENTERKEY"===w[d]?(g[0]?e.apply(g[0],[a]):h(f),a.preventDefault()):(clearTimeout(u),u=setTimeout(function(){h(f)},250));""!==f?b():l()}function b(){var a=c(".b-gsearch__close");a.hasClass("b-gsearch__close_is_show")||a.addClass("b-gsearch__close_is_show")}function l(){c(".b-gsearch__close").removeClass("b-gsearch__close_is_show")}function p(a,b){d()}function t(a,b){var c=b.doc||{},e="";c.elem?(q=c.elem,20<q.length&&q.splice(20,q.length-1),e=y({elem:q})):e=y({elem:v});f.u.selectorCache(".i-gsearch").html(e);
f.u.selectorCache("body").on("click.globalSearch",k);d()}function h(b){""!==b&&(a.trigger("ajaxRequest",{param:{func:"globalindex",elid:b,out:"json"},trfunc:"globalSearchResponse",failfunc:"globalSearchFail",outtype:"json",queue:"noqueue"}),g())}function e(){var b=this.getAttribute("data-index");if(q&&q[b]&&!q[b].__empty__){var c=f.u.parseParams(q[b].filter.$);c.func=q[b].func.$;c.filter="on";a.trigger("ajaxRequest",{param:c,invar:{newtab:!0,__src:"menuAction"},type:"get",outtype:"json",trfunc:"ajaxResponse",
failfunc:"failMenuAjaxResponse",queue:"noqueue"})}k()}function k(){f.u.selectorCache(".i-gsearch").html("");q=[];f.u.selectorCache("body").off("click.globalSearch")}function g(){z=setTimeout(function(){c(".i-gsearch__input").addClass("b-gsearch__input_loading_yes")},100)}function d(){clearTimeout(z);c(".i-gsearch__input").removeClass("b-gsearch__input_loading_yes")}function s(a){a.preventDefault();c(".i-gsearch__input").val("");l()}function r(){return f.u.selectorCache("#main-wrapper")}var u,z,q=
[],v=[{description:{$:pageInfo.notfound},__empty__:!0}],w={38:"UPKEY",40:"DOWNKEY",37:"LEFTKEY",39:"RIGHTKEY",13:"ENTERKEY",9:"TABKEY"},y=m.doT.template('<div class="b-gsearch__list-wrapper b-select-ac__list-scroll-wrapper"><div class="b-select-ac__list-wrapper b-gsearch__list " style="display:block;"><ul class="b-select-ac__list">{{~it.elem :v :i}}<li class="b-gsearch__list-item i-gsearch__list-item b-select-ac__list-item" data-index="{{=i}}">{{=window.filterXSS(v.description.$)}}</li>{{~}}</ul></div></div>');
return{init:function(){a.on(r(),".i-gsearch__input","keyup",n);a.on(r(),".i-gsearch__input","focus",n);a.on(r(),".i-gsearch__list-item","click",e);a.on(r(),".i-gsearch__close","click",s);a.bind("globalSearchResponse",t);a.bind("globalSearchFail",p)}}}(window,$,EventMgr,App);"use strict";
App.PrefixSelect=function(m,c,a,f){function n(){return f.Common.selectorCache(".i-form-wr")}function b(a){var b=this;clearTimeout(e);e=setTimeout(function(){l(b)},300)}function l(b,e){var d,f,l,m=b.value,n=b.getAttribute("data-tabid"),p=b.getAttribute("data-prefix-name");a:{if(!h[n])h[n]={};else if(h[n][p]){l=h[n][p];break a}var t=h[n];l=c("#"+n+"-"+p+" li");var w=l.length;for(d={};w--;)d[l[w].getAttribute("data-code")]={mask:l[w].getAttribute("data-mask")};t[p]=d;l=h[n][p]}t=b.getAttribute("data-prefix");
a:{w=String(m).replace(/\)/g,"").replace(/\(/g,"").replace(/\s/g,"");d=0;for(f=String(m).length;d<f;d++){if(l[w]){d=!0;f=w;l=l[w].mask;break a}w=w.substring(0,w.length-1)}d=!1;l=f=void 0}e?(p=c("#"+n+"-"+p+" li.selected").trigger("click",[null,{isIgnore:!0}]),n=p.attr("data-code"),p=p.attr("data-mask"),b.setAttribute("data-prefix",n),p&&(b.setAttribute("data-mask",p),a.trigger("inputMaskChangeBySetvalues",{elem:b,mask:p,value:m}))):d&&t!==f&&(c(c("#"+n+"-"+p+' li[data-code="'+f+'"]:not(".selected")')[0]).trigger("click",
[null,{isIgnore:!0}]),b.setAttribute("data-prefix",f),l&&(b.setAttribute("data-mask",l),a.trigger("inputMaskChangeBySetvalues",{elem:b,mask:l,value:m})))}function p(b,e,d){if(!d||!d.isIgnore){b=this.getAttribute("data-targetinput");e=this.getAttribute("data-tabid");b=c("#"+b+"-"+e);var f=b.attr("data-prefix");d=this.value;var h=b.val();d=c("#"+e+"-"+this.getAttribute("name")+' li[data-val="'+d+'"]');e=d.attr("data-code");d=d.attr("data-mask");for(var h=String(h).split(""),f=String(f).split(""),l=
f.length,m=0,n=0,p=h.length;n<p;n++)if(" "!==h[n]&&"("!==h[n]&&")"!==h[n]&&"_"!==h[n]&&"-"!==h[n]){if(h[n]===f[m]&&(m++,h[n]="",l===m))break}else h[n]="";h=h.join("");h=e+h;b.val(h);d&&a.trigger("inputMaskChangeBySetvalues",{elem:b[0],mask:d,value:h});b.attr("data-prefix",e)}}function t(a,b){c("#cont-"+b.tabId+" .i-input_has_prefix").each(function(){l(this,!0)})}var h={},e;return{init:function(){a.on(n(),".i-myselect_is_prefix","change",p);a.on(n(),"input.i-input_has_prefix","change",b);a.on(n(),
"input.i-input_has_prefix","keyup",b);a.bind("appendForm",t)}}}(window,$,EventMgr,App);"use strict";
App.ResizeFormPage=function(m,c,a,f){function n(a,f){if(f&&f.tabObj&&"settings"===f.tabObj.func&&"form"===f.tabObj.type){for(var m=c("#form-wrapper-"+f.tabId+" .b-form-page"),n=[],h=0,e,k=0,g=m.length;k<g;k++){$fields=c(m[k]).find(".l-label__wrapper");for(var d=0,s=$fields.length;d<s;d++)if(e=$fields[d].offsetWidth,0!==e){e>h&&(h=e);n.push($fields[d]);break}}if(0<h)for(k=0,g=n.length;k<g;k++)n[k].style.minWidth=h+"px"}}return{init:function(){a.bind("appendForm",n)}}}(window,$,EventMgr,App);"use strict";
App.ConfirmForm=function(m,c,a,f){function n(a,c){if(c&&c.w){var f,g,d=c.d.plid,l=c.d.func,m=c.d.tabId,n=!1;t[m]={};for(var p in c.w)f=c.w[p],"extraconfirm"===f.type&&(g=f.func+f.value,n=!0,t[m][g]||(t[m][g]={elid:[],func:f.func,plid:d,listaction:l,action:f.src_func}),t[m][g].elid.push(String(f.elid).replace(/,\s/g,", , ")));n&&b(t[m],m)}}function b(b,c){var f=!1,g;for(g in b){var d=f=b[g];d.elid=f.elid.join(", ");a.trigger("ajaxRequest",{param:d,invar:{sourceTab:c,__innervars:{confirmKey:g,sourceTab:c,
afterFunc:"checkNextConfirmForm"}},type:"get",outtype:"json",trfunc:"ajaxResponseInspectorForm",queue:"",failfunc:"failResponseInspectorForm"});f=!0;break}f||(t[c]&&delete t[c],a.trigger("reloadTab",{tabId:c}))}function l(a,c){c&&c.d&&c.d.confirmKey&&c.d.sourceTab&&t[c.d.sourceTab]&&t[c.d.sourceTab][c.d.confirmKey]&&delete t[c.d.sourceTab][c.d.confirmKey];b(t[c.d.sourceTab],c.d.sourceTab)}function p(b,c){c&&c.tabId&&t[c.tabId]&&(delete t[c.tabId],a.trigger("closeModalForm"))}var t={};return{init:function(){a.bind("checkWarningForConfirm",
n);a.bind("checkNextConfirmForm",l);a.bind("closeTabEvent",p)}}}(window,$,EventMgr,App);"use strict";App.FieldHeight=function(m,c,a,f,n){function b(a,b){var f=b.tabId;setTimeout(function(){c("#form-wrapper-"+f).find(".i-control__fullwidth").each(function(){var a=c("#form-scroll-"+f).height(),b=c("#"+f+"-buttons").length,a=a-37;b&&(a-=52);this&&this.setAttribute("height",a+"px")})})}return{init:function(){a.bind("appendForm",b)}}}(window,$,EventMgr,App,ScrollHandler);"use strict";
_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"===typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};
App.Jscript=function(m,c,a){var f=function(a,c){if(c&&c.srcData&&c.srcData.jscript&&c.srcData.jscript.length)for(var f=c.srcData.jscript,m=0,h=f.length;m<h;m++)eval(f[m])},n=function(a){var c=this.getAttribute("name");m[c+"_event"]&&_typeof(m[c+"_event"])&&m[c+"_event"].apply(this,[a])};return{init:function(){a.bind("appendForm,appendList,appendReport",f);a.on("#wr-content","input.i-onchange-event, textarea.i-onchange-event","change",n)}}}(window,$,EventMgr);"use strict";
App.Notify=function(m,c,a){function f(){a.trigger("ajaxRequest",{url:w.url,param:{func:"notify"},type:"get",outtype:"json",ignore503:!0,failFunc:l,trfunc:"notificationResponse",queue:"notification"})}function n(b){a.trigger("ajaxRequest",{url:w.url,param:{func:"notificationbar.delete",elid:b},type:"get",outtype:"json",ignore503:!0,trfunc:"notifyBannerDeleteResponse",queue:"notification"})}function b(a){f()}function l(b,c){setTimeout(function(){a.trigger("ajaxRequest",c)},5E3)}function p(a){a=E(a);
var b=m.document.getElementById("notify");b.innerHTML=a;"none"===b.style.display&&c(b).slideDown(1E3)}function t(){var a=m.document.getElementById("notify");c(a).slideUp(1E3)}function h(a){var b="";a=a.items;var d=!1,f;if(a&&a.length){for(var g=0,h=a.length;g<h;g++)if("bannerlist"===a[g].type&&a[g].bitems&&a[g].bitems.length)for(var l=a[g].bitems,k=0,m=l.length;k<m;k++)f=f?f+(","+l[k].id):l[k].id,l[k].isNew&&(d=!0),b+=F({id:"__"+l[k].id,elid:l[k].id,isNew:l[k].isNew,status:l[k].status,msg:l[k].msg});
setTimeout(function(){e(l)},7E3);b&&(b=D({elids:f,hasNew:d})+b);s(b);setTimeout(function(){var a=c(A),a=a[0]?a[0].offsetLeft:0;c("#notify-banner-list").css("left",a+"px")},50)}}function e(a){a=a||[];for(var b=0,d=a.length;b<d;b++){var e=c("#__"+a[b].id);e.length&&e.hasClass("b-notify-banner_is_new")&&e.slideUp(function(){c(this).removeClass("b-notify-banner_is_new").css("display","")})}c(".b-notify-banner__close-all").removeClass("b-notify-banner_is_new")}function k(b){b.preventDefault();var e=c(this.parentNode);
b=e.attr("id");var f=e.attr("data-elid");b?(n(f),e.fadeOut("fast",function(){c(this).remove()}),c("#__"+b).remove(),d()):(a.trigger("ajaxRequest",{url:w.url,param:{func:"notificationbar.deleteall"},type:"get",outtype:"json",ignore503:!0,trfunc:"notifyBannerDeleteResponse",queue:"notification"}),c(".b-notify-banner").fadeOut("fast",function(){e.remove();c(".b-notify-banner").remove()}))}function g(a){a.preventDefault();a=c(this.parentNode);var b=a.attr("id"),e=a.attr("data-elid"),b=String(b).slice(0,
2);n(e);a.fadeOut("fast",function(){c(this).remove()});c("#"+b).remove();d()}function d(){0===c(".b-notify-banner").length?c(".b-notify-banner__close-all").remove():0===c(".b-notify-banner__list_is_open").length&&1===c(".b-notify-banner_is_new").length&&c(".b-notify-banner_is_new").removeClass("b-notify-banner_is_new")}function s(a){var b=c("#notify-banner-list");b&&b.html(a)}function r(){var a=c("#notify-banner-list"),b=this.offsetLeft;a.hasClass("b-notify-banner__list_is_open")?a.removeClass("b-notify-banner__list_is_open"):
(c(".b-notify-banner_is_new").removeClass("b-notify-banner_is_new"),a.addClass("b-notify-banner__list_is_open"),a.css("left",b+"px"))}function u(a){if(a&&a.sound){var b=m.document.getElementById("audio-beep");b||(b=m.document.createElement("audio"),b.style.display="none",b.setAttribute("id","audio-beep"),document.body.appendChild(b));b.setAttribute("src",a.sound);b.play()}}function z(a,b){b.items&&(0<b.items.length?(p(b),h(b),m.document.title=b&&b.title?b.title:w.title,u(b)):t(),b.timeout&&(clearTimeout(y),
y=setTimeout(function(){f()},parseInt(1E3*b.timeout,10))))}function q(){f()}function v(a,b){w.notify&&b.notify&&w.notify!==b.notify&&(w.notify=b.notify,f())}var w=m.pageInfo,y,D='<div class="b-notify-banner__close-all {{?it.hasNew}}b-notify-banner_is_new{{?}}" data-elid="{{=it.elids}}"><div class="b-notify-banner__close-all-inner i-notify-banner__close-all">'+w.messages.closeall+'<div class="b-notify-banner__close b-tab-close"></div></div></div>',E=m.doT.template('<div class="b-notif">{{~it.items :value:index}}<div class="b-notif__elem hint {{?value.type !== "bannerlist"}} b-menu-item newtab i-menu-link {{??}} i-bannerlist-open{{?}}" data-url="?func={{=value.action}}" data-hint="{{=value.hint}}"><div class="b-notif__img s-icon s16x16 props {{=value.img}}"></div>{{ var nums = String(value.value).split(""); }}<div class="b-notif__text">{{~nums :v:i}}<span class="b-number b-number_value_{{=v}}"></span>{{~}}</div></div>{{~}}</div>'),
F=m.doT.template('<div class="b-notify-banner b-notify-banner_status_{{=it.status}} {{?it.isNew}} b-notify-banner_is_new {{?}}" data-elid="{{=it.elid}}" id="{{=it.id}}"><div class="b-notify-banner__close i-notify-banner__close b-tab-close"></div>{{=it.msg}}</div>'),D=m.doT.template(D),A=".i-bannerlist-open";return{init:function(){a.bind("loadPage",q);a.bind("notificationResponse",z);a.bind("forceCheckNotify",f);a.bind("ajaxResponse,ajaxFormResponse",v);a.bind("notifyBannerDeleteResponse",b);a.on("#notify-banner-wrapper",
".i-notify-banner__close","click",k);a.on("#notify-banner-list",".i-notify-banner__close","click",g);a.on("#notify",A,"click",r);a.on("#notify-banner-list",".i-notify-banner__close-all","click",k)}}}(window,$,EventMgr);
App.mgr=function(){var m=[App.Common.init,App.Dom.init,App.Menu.init,App.UpSize.init,App.ScrollController.init,App.AceEditor.init,App.ActionHandler.init,App.ActionHandlerList.init,App.ActionHandlerDashboard.init,App.AjaxHelper.init,App.Alert.init,App.FormUtils.init,App.FormDependFields.init,App.Forms.init,App.MultiSelect.init,App.Select.init,App.Bands.init,App.ChangeBrandColors.init,App.Cookie.init,App.DashboardDragAndDrop.init,App.Deview.init,App.EditInList.init,App.FilterList.init,App.GoogleCharts.init,
App.Captcha.init,App.Help.init,App.Hint.init,App.HorizontScroll.init,App.HotKeys.init,App.KeepAlive.init,App.List.init,App.ListSorting.init,App.LiveListFilter.init,App.LoadScripts.init,App.LocalStorage.init,App.MultiLoadTabs.init,App.ProgressBar.init,App.SendFormWithFiles.init,App.Slider.init,App.SelectAutoComplete.init,App.TableRowResize.init,App.Tabs.init,App.Validators.init,App.Wizards.init,App.Calendar.init,App.ValidChecker.init,App.Toolbar.init,App.Map.init,App.Builder.init,App.CheckRestart.init,
App.TinyMCE.init,App.FormWatcher.init,App.ConfirmBox.init,App.HorizScrollControl.init,App.DashboardList.init,App.Desktop.init,App.MessageTempl.init,App.FontSettings.init,App.ContentMistake.init,App.CopyToBuffer.init,App.TestCases.init,App.TabDrag.init,App.UsefulLinks.init,App.InputMask.init,App.FormListFilter.init,App.LightBoxProvider.init,App.FormFixedField.init,App.GroupEdit.init,App.GlobalSearch.init,App.PrefixSelect.init,App.ResizeFormPage.init,App.ConfirmForm.init,App.FieldHeight.init,App.Jscript.init,
App.Notify.init],c=m.length,a;for(a=0;a<c;a++)if("function"===typeof m[a])m[a]();else console.log("undefined init function of module number: ",a);EventMgr.trigger("loadPage","data")};
App.ErrorReport=function(m,c,a,f){m.onerror=function(f,b,l,p,t){var h={};h.error_url=b+"______"+m.location.href;h.error_message=f;h.stack_trace=l;h.error=t;h.col_number=p;h.user_level=pageInfo.userLevel;h.product=pageInfo._product;h.is_branding=pageInfo.isBranding;h.theme="orion";h.module=c(".tab-content_st_active").attr("data-func");h.version=pageInfo.version;a.trigger("ajaxRequest",{url:"https://themereport.ispsystem.net:3001/api/errorreport/",param:h,type:"jsonp"})}}(window,$,EventMgr,App);
(function(m,c,a){function f(a,b,c,f){this.id=a;this.cid="cont-"+this.id;this.status=b||0;this.type=c;this.selfUrl=f;this.param=this.header=this.body="";this.sIndex=String(a).replace("tab","")-0}function n(a,b,c,f){this.level=a;this.id=b;this.status=null!==c?c:"0";this.self=f}f.fn=f.prototype;f.fn.deactive=function(){c("#"+this.id).removeClass("active");c("#switch-"+this.id).removeClass("active");"child"===this.hType&&(c("#"+this.gParent).removeClass("active"),c("#switch-"+this.gParent).removeClass("active"));
c("#"+this.cid).removeClass("tab-content_st_active").addClass("hidden");this.status=0};f.fn.activate=function(){c("#"+this.id).addClass("active");c("#switch-"+this.id).addClass("active");"child"===this.hType&&c("#"+this.gParent).addClass("active");c("#"+this.cid).addClass("tab-content_st_active").removeClass("hidden");this.status=1};f.fn.render=function(){switch(this.type){case "empty":this.htmlBody=a.tabContEmpty(this.body);this.htmlHeader="parent"===this.hType?a.tabLi(this.header):a.tabChld(this.header);
break;case "list":this.htmlBody=a.tabCont(this.body);this.htmlHeader="parent"===this.hType?a.tabLi(this.header):a.tabChld(this.header);break;case "form":this.htmlBody=a.tabContForm(this.body);this.htmlHeader="parent"===this.hType?a.tabLi(this.header):a.tabChld(this.header);break;case "report":this.htmlBody=a.tabContForm(this.body);this.htmlHeader="parent"===this.hType?a.tabLi(this.header):a.tabChld(this.header);break;case "dashboard":this.htmlBody=a.tabContDashBoard(this.body);break;case "map":case "rack":this.htmlBody=
a.tabContMap(this.body),this.htmlHeader="parent"===this.hType?a.tabLi(this.header):a.tabChld(this.header)}return this};f.fn.append=function(a){this.htmlHeader&&this.htmlBody?("parent"===this.hType?c("#nav-tabs #"+(a||"add-tab")).before(this.htmlHeader):c("#"+this.gParent).append(this.htmlHeader),c("#wr-content").append(this.htmlBody)):this.htmlBody&&c("#wr-content").append(this.htmlBody);return this};f.fn.update=function(){var a=document.getElementById(this.cid);null!==a&&a.parentNode.removeChild(a);
c("#wr-content").append(this.htmlBody);return this};f.fn.softUpdate=function(){var a=document.getElementById("ltwr-"+this.id),b="";null!==a&&(b='<div class="content" id="ltwr-'+this.id+'" data-tabid='+this.id+">"+this.body.table+"</div>",c(a).replaceWith(b));return this};f.fn.replace=function(){var a=document.getElementById(this.id),b=document.getElementById(this.cid);null!==b&&b.parentNode.removeChild(b);c("#wr-content").append(this.htmlBody);null!==a&&c(a).replaceWith(this.htmlHeader);return this};
f.fn.clean=function(){this.body=this.header=this.htmlHeader=this.htmlBody=null};f.fn.close=function(){if(void 0!==this.chart)for(var a=this.chart,b=this.chart.length;b--;)"function"===typeof a[b].clearChart&&(a[b].clearChart(),a[b]=null);a=document.getElementById(this.id);b=document.getElementById(this.cid);null!==a&&a.parentNode.removeChild(a);null!==b&&b.parentNode.removeChild(b)};m.TabObj=f;n.fn=n.prototype;n.fn.statusUp=function(a){this.status=a};n.fn.activate=function(){this.status="1";this.self.removeClass("collapsed")};
n.fn.disactivate=function(){this.status="0";this.self.addClass("collapsed")};n.fn.toggle=function(){this.status="1"===this.status?"0":"1";this.self.toggleClass("collapsed")};m.MenuGroup=n;m.setCookie=function(a,b,c){var f=new Date;f.setDate(f.getDate()+c);b=encodeURIComponent(b)+(null===c?"":"; expires="+f.toUTCString());document.cookie=a+"="+b};m.getCookie=function(a){var b,c,f,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),f=e[b].substr(e[b].indexOf("=")+
1),c=c.replace(/^\s+|\s+$/g,""),c===a)return decodeURIComponent(f);return""};c.fn.switchClass=function(a,b){return this.removeClass(b).addClass(a)};c.fn.serializeObject=function(){var a=this.serializeArray(),b={},c=a.length,f;for(f=0;f<c;f++)b[a[f].name]=a[f].value;return b};c.fn.getFlags=function(){var a={},b=this.attr("data-flags");if(b)for(var b=b.split("|"),f=0,h=b.length;f<h;f++)a[c.trim(b[f])]=!0;return a};c.fn.getVars=function(){var a={},b=this.attr("data-vars"),c;if(b)for(var b=String(b).split("|"),
f=0,e=b.length;f<e;f++)(c=b[f].split(":"))&&c[0]&&c[1]&&(a[c[0]]=c[1]);return a};m.blockEvent=function(a){a=a||m.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1};var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"};m.scrollToTopLeft=function(){m.pageInfo.mobile||m.pageInfo.store||m.pageInfo.extform||m.scrollTo(0,0)};m.htmlEscape=function(a){return String(a).replace(/[&<>"'\/]/g,
function(a){return b[a]})};m.htmlDecode=function(a){return c("<div/>").html(a).text()};m.htmlEncode=function(a){return a=String(a).replace(/&lt;/g,"<").replace(/&gt;/g,">")};m.blockSelection=function(){m.getSelection?m.getSelection().removeAllRanges():document.selection&&document.selection.empty&&document.selection.empty()};m.hash=function(a){var b=0,c,f;if(0===a.length)return b;for(f=0;f<a.length;f++)c=a.charCodeAt(f),b=(b<<5)-b+c,b&=b;return"id"+b};m.split||function(a){var b=String.prototype.split,
c=/()??/.exec("")[1]===a,f;f=function(e,f,g){if("[object RegExp]"!==Object.prototype.toString.call(f))return b.call(e,f,g);var d=[],h=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.extended?"x":"")+(f.sticky?"y":""),m=0,n,z,q;f=RegExp(f.source,h+"g");e+="";c||(n=RegExp("^"+f.source+"$(?!\\s)",h));for(g=g===a?4294967295:g>>>0;z=f.exec(e);){h=z.index+z[0].length;if(h>m&&(d.push(e.slice(m,z.index)),!c&&1<z.length&&z[0].replace(n,function(){for(var b=1;b<arguments.length-2;b++)arguments[b]===a&&(z[b]=
a)}),1<z.length&&z.index<e.length&&Array.prototype.push.apply(d,z.slice(1)),q=z[0].length,m=h,d.length>=g))break;f.lastIndex===z.index&&f.lastIndex++}m===e.length?!q&&f.test("")||d.push(""):d.push(e.slice(m));return d.length>g?d.slice(0,g):d};String.prototype.split=function(a,b){return f(this,a,b)};return f}()})(window,$,templates);
